(window.webpackJsonp=window.webpackJsonp||[]).push([["interests-wc~notification-bell-wc"],{"0+nS":function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.SysTag="SysTag",e.UserQuery="UserQuery"}(n||(n={}))},"0hJ9":function(e,t,i){"use strict";var n=i("v6nU");t.a=function(e){return"number"==typeof e&&e==Object(n.a)(e)}},"2pXY":function(e,t,i){"use strict";t.a=function(e,t,i){for(var n=-1,a=null==e?0:e.length;++n<a;)if(i(t,e[n]))return!0;return!1}},"3MDl":function(e,t,i){"use strict";i.d(t,"b",(function(){return u})),i.d(t,"a",(function(){return h}));var n=i("eftJ"),a=i("P4Ao"),r=i("oePG"),s=i("QBS5"),o=i("FGLN"),c=i("Gy7L"),d=i("C5kU"),l=i("6fxl");function u(e){return Object(o.d)(e)&&"treeitem"===e.getAttribute("role")}class h extends a.a{constructor(){super(...arguments),this.expanded=!1,this.focusable=!1,this.enabledChildTreeItems=[],this.handleFocus=e=>{},this.handleBlur=e=>{},this.handleKeyDown=e=>{if(e.target!==e.currentTarget)return!0;switch(e.keyCode){case c.h:this.collapseOrFocusParent();break;case c.i:this.expandOrFocusFirstChild();break;case c.g:e.preventDefault(),this.focusNextNode(1);break;case c.j:e.preventDefault(),this.focusNextNode(-1);break;case c.l:this.handleSelected(e)}return!0},this.handleExpandCollapseButtonClick=e=>{this.disabled||(e.preventDefault(),this.setExpanded(!this.expanded))},this.handleClick=e=>{e.defaultPrevented||this.disabled||this.handleSelected(e)},this.isNestedItem=()=>u(this.parentElement)}itemsChanged(e,t){this.$fastController.isConnected&&(this.items.forEach(e=>{u(e)&&(e.nested=!0)}),this.enabledChildTreeItems=this.items.filter(e=>u(e)&&!e.hasAttribute("disabled")))}getParentTreeNode(){return this.parentElement.closest("[role='tree']")}connectedCallback(){super.connectedCallback();const e=this.getParentTreeNode();e&&(e.hasAttribute("render-collapsed-nodes")&&(this.renderCollapsedChildren="true"===e.getAttribute("render-collapsed-nodes")),this.notifier=r.b.getNotifier(e),this.notifier.subscribe(this,"renderCollapsedNodes"))}disconnectedCallback(){super.disconnectedCallback(),this.notifier&&this.notifier.unsubscribe(this,"renderCollapsedNodes")}static focusItem(e){e.setAttribute("tabindex","0"),e.focusable=!0,e.focus()}handleChange(e,t){switch(t){case"renderCollapsedNodes":this.renderCollapsedChildren=e.renderCollapsedNodes}}childItemLength(){const e=this.childItems.filter(e=>u(e));return e?e.length:0}collapseOrFocusParent(){if(this.expanded)this.setExpanded(!1);else if(Object(o.d)(this.parentElement)){const e=this.parentElement.closest("[role='treeitem']");Object(o.d)(e)&&h.focusItem(e)}}expandOrFocusFirstChild(){"boolean"==typeof this.expanded&&(!this.expanded&&this.childItemLength()>0?this.setExpanded(!0):this.enabledChildTreeItems.length>0&&h.focusItem(this.enabledChildTreeItems[0]))}focusNextNode(e){const t=this.getVisibleNodes();if(!t)return;const i=t.indexOf(this);if(-1!==i){let n=t[i+e];if(void 0!==n)for(;n.hasAttribute("disabled");){if(n=t[i+e+(e>=0?1:-1)],!n)break}Object(o.d)(n)&&h.focusItem(n)}}getVisibleNodes(){return Object(o.c)(this.getTreeRoot(),"[role='treeitem']")}getTreeRoot(){return Object(o.d)(this)?this.closest("[role='tree']"):null}handleSelected(e){this.selected=!this.selected,this.$emit("selected-change",e)}setExpanded(e){this.expanded=e,this.$emit("expanded-change",this)}}Object(n.a)([Object(s.b)({mode:"boolean"})],h.prototype,"expanded",void 0),Object(n.a)([Object(s.b)({mode:"boolean"})],h.prototype,"selected",void 0),Object(n.a)([Object(s.b)({mode:"boolean"})],h.prototype,"disabled",void 0),Object(n.a)([r.d],h.prototype,"focusable",void 0),Object(n.a)([r.d],h.prototype,"childItems",void 0),Object(n.a)([r.d],h.prototype,"items",void 0),Object(n.a)([r.d],h.prototype,"nested",void 0),Object(n.a)([r.d],h.prototype,"renderCollapsedChildren",void 0),Object(l.a)(h,d.a)},"623N":function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.consumer="consumer",e.work="work"}(n||(n={}))},"6ADy":function(e,t,i){"use strict";i.d(t,"b",(function(){return d})),i.d(t,"c",(function(){return u})),i.d(t,"a",(function(){return h}));var n=i("rvYQ"),a=i("I6Lx"),r=i("kN1G"),s=i("tMmC");let o,c;function d(){const e=Object(n.b)();if(!o){!function(e){o=new URL("",e),g(o)}(Object(r.j)()&&Object(r.k)()?e.EnterpriseServiceUrlBase:e.ServiceUrlBase)}return o}function l(){const e=Object(n.b)();if(!c){!function(e){c=new URL("",e),g(c)}(Object(r.j)()&&Object(r.k)()?e.EnterpriseServiceUrlBase:e.FeedServiceUrlBase)}return c}function u(e,t=d()){return new URL(e+(null==t?void 0:t.search),t)}function h(e,t=l()){return new URL(e+(null==t?void 0:t.search),t)}function g(e){let t=!1;"dev"!==e.searchParams.get("env.service")&&Object(a.a)().UserIsSignedIn&&(t=!0),s.a.log("u-si: "+Object(n.b)().UserId),s.a.log("a-si: "+t),s.a.log("ss-si: "+Object(a.a)().UserIsSignedIn)}},"7qs3":function(e,t,i){"use strict";i.d(t,"a",(function(){return k}));var n,a=i("D57K"),r=i("h3hC"),s=i("ypwz"),o=i("tERu"),c=i("HxRh"),d=i("XlyT"),l=i("rvYQ"),u=i("I6Lx"),h=i("u5KZ"),g=i("6ADy"),p=i("msIb"),m=i("KETb"),b=i("k112"),f=i("KUTD"),v=i("Qo3E"),y=i("8ntK");!function(e){e[e.feedbackDefault=2224]="feedbackDefault",e[e.windowsFeed=2475]="windowsFeed"}(n||(n={}));class S{constructor(){this.manifestType="Sas",this.appId=n.feedbackDefault,this.source="Client",this.type="Idea"}}var O=i("HDSB"),T=i("4L2h"),w=i("r6MD"),C=i("/+Un"),j=i("ac9z");class I extends class{constructor(e,t){this.fetchImpl=e,this.additionalHeaders=t,this.isWindowsDashboard=l.a.AppType===s.a.NewsAndInterests||l.a.AppType===s.a.WindowsNewsPlus,this.providersServiceEndpointURL=Object(g.c)("./Msn/Providers"),this.cardActionsServiceEndpointURL=Object(g.c)("./Graph/Actions"),this.userFeedbackEventhubUrl="/labs/api/feedbackSignal",this.ocid="feeds",this.isWindowsDashboard?this.ocid="winp2":u.b.IsBlendedEnterprise&&(this.ocid="entnewsntp")}ShowFewer(e){return Object(a.a)(this,void 0,void 0,(function*(){return this.PostCardActionRequest(e,r.a.Dislike,null)}))}UnshowFewer(e){return Object(a.a)(this,void 0,void 0,(function*(){return this.DeleteCardActionRequest(e,r.a.Dislike)}))}ShowMore(e){return Object(a.a)(this,void 0,void 0,(function*(){return this.PostCardActionRequest(e,r.a.Like)}))}UnshowMore(e){return Object(a.a)(this,void 0,void 0,(function*(){return this.DeleteCardActionRequest(e,r.a.Like)}))}Save(e){return Object(a.a)(this,void 0,void 0,(function*(){return this.PostCardActionRequest(e,r.a.Save)}))}Unsave(e){return Object(a.a)(this,void 0,void 0,(function*(){return this.DeleteCardActionRequest(e,r.a.Save)}))}Hide(e){return Object(a.a)(this,void 0,void 0,(function*(){return this.PostCardActionRequest(e,r.a.Dislike,null)}))}Unhide(e){return Object(a.a)(this,void 0,void 0,(function*(){return this.DeleteCardActionRequest(e,r.a.Dislike)}))}Mute(e){return Object(a.a)(this,void 0,void 0,(function*(){return this.PostCardActionRequest(e,r.a.Mute,"SourceProvider")}))}Report(e,t,i){return Object(a.a)(this,void 0,void 0,(function*(){const n=u.b.ClientSettings?u.b.ClientSettings.aid:"";let a="";const r={serviceType:"oneservice",oneServiceTraceId:"",oneServiceActivityId:n};l.a.AppType===s.a.Windows&&(a=h.a.getPageMetadata().JoinIdProps.IDXId,r.oneServiceTraceId="",r.oneServiceActivityId=n),h.a.sendTraceInfoEvent(r);const o=JSON.stringify({article:{id:e},canvas:{name:l.a.AppType,version:navigator.userAgent,pageType:u.b.ClientSettings.pagetype},data:{activityId:n,feedbackTags:t,feedbackText:i},appEnvironment:l.a,clientSettings:u.b.ClientSettings,extSchema:r}),d=Object(g.b)().origin+this.userFeedbackEventhubUrl,m={method:"POST",headers:Object.assign(Object.assign({},yield p.a.getOneServiceHeaders()),this.additionalHeaders),body:o,credentials:"include"};let b;try{if(b=yield fetch(d,m),b.status>=400)throw new Error(b.statusText)}catch(e){h.a.sendAppErrorEvent(Object.assign(Object.assign({},c.ab.CardActionPostActionError),{message:"Error while posting action for card action",pb:Object.assign(Object.assign({},c.ab.CardActionPostActionError.pb),{customMessage:`url: ${d}, error: ${e}`})}))}return b}))}reportNonCMS(e,t,i,n){return Object(a.a)(this,void 0,void 0,(function*(){this.ReportOCV(e,t,i,n)}))}ReportOCV(e,t,i,n){return Object(a.a)(this,void 0,void 0,(function*(){let a=!1;const r="https://petrol.office.microsoft.com/v1/feedback",s=this.createOcvFeedbackData(e,t,i,n),o={method:"POST",mode:"cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)};try{const e=yield this.fetchImpl(r,o);if(e.ok)a=!0;else{const t=`Error code: ${e.status} Error message: ${e.statusText} Request params: ${o} Service url: ${r}`;Object(d.b)(c.ab.CardActionBadRequestReportingToOcv,"Request is not valid, it has no content, or the manifest is not formatted correctly",t)}}catch(e){const t=`Error code: ${e?e.code:"undefined"} Error message: ${e?e.message:"undefined"} Request params: ${o} Service url: ${r}`;Object(d.c)(e,c.ab.CardActionExceptionReportingToOcv,"Exception reporting feedback to OCV",t)}}))}createOcvFeedbackData(e,t,i,n){var a,r,s,o;const c=new S,d=null===u.b||void 0===u.b?void 0:u.b.ClientSettings,g=null===l.a||void 0===l.a?void 0:l.a.HostPage,p=(null==d?void 0:d.aid)||"";let m="";const b=(null===(r=null===(a=null===l.a||void 0===l.a?void 0:l.a.CurrentRequestTargetScope)||void 0===a?void 0:a.pageExperiments)||void 0===r?void 0:r.join(","))||"",f=null===(s=null===l.a||void 0===l.a?void 0:l.a.CurrentRequestTargetScope)||void 0===s?void 0:s.browser;return m=h.a.getPageMetadata().JoinIdProps.IDXId,c.submitTime=(new Date).toISOString(),c.clientFeedbackId=Object(T.e)(),c.comment=i,c.rating=4,c.application={appData:`{"ScreenResolution":"${window&&window.screen?[screen.width,screen.height].join("x"):""}","DDDActivityId":"${m}","articleId":"${e}"}`},c.telemetry={audience:(null===l.a||void 0===l.a?void 0:l.a.CurrentMarket)||"",audienceGroup:(null==g?void 0:g.verticalKey)||"Production",channel:(null==g?void 0:g.categoryKey)||"",deviceType:(null==d?void 0:d.deviceFormFactor)||"",errorClassification:JSON.stringify({NotRelevant:t.NotRelevant,ImageQuality:t.BlurryImage,MisleadingTitle:t.Misleading,OutdatedArticle:t.Outdated,DuplicateArticle:t.Duplicate,OffensiveContent:t.Offensive,Vertical:n}),featureArea:(null==d?void 0:d.pagetype)||"",flights:b,isUserSubscriber:Object(C.e)(),platform:null===(o=l.a.CurrentRequestTargetScope)||void 0===o?void 0:o.os,processSessionId:p,sourceContext:l.a.AppType},c.web={browser:(null==f?void 0:f.browserType)||"",browserVersion:(null==f?void 0:f.version)||"",sourcePageName:(null==g?void 0:g.subcategoryKey)||"",sourcePageURI:""},c}ReportAd(e,t){return Object(a.a)(this,void 0,void 0,(function*(){const i=e.concat("&f="+t);let n=new Image(1,1);n.src=i,n=null}))}GetProviderIcon(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.GetPublisherDetails(e);return Object(w.a)(t,"value[0].logos[0].imageLink.href",void 0)}))}PostCardActionEvent(e,t,i,n=(()=>null),s,o,c=!0,d,l=5e3){return Object(a.a)(this,void 0,void 0,(function*(){switch(t){case r.a.ShowMore:return e&r.b.showMore?(c&&v.a.renderToast({id:y.a.ShowMore+"-"+i,toastType:y.a.ShowMore,expirationInMs:l,onClick:()=>{s?s(i,e^r.b.showMore,t,!0):this.PostCardActionEvent(e^r.b.showMore,t,i,n)},referrerButton:d}),yield this.ShowMore(i)):(v.a.expireToast(y.a.ShowMore+"-"+i),yield this.UnshowMore(i)),n(i,e);case r.a.ShowFewer:return e&r.b.showFewer?(c&&v.a.renderToast({id:y.a.ShowFewer+"-"+i,toastType:y.a.ShowFewer,expirationInMs:l,onClick:()=>{s?s(i,e^r.b.showFewer,t,!0):this.PostCardActionEvent(e^r.b.showFewer,t,i,n)},referrerButton:d}),yield this.ShowFewer(i)):(v.a.expireToast(y.a.ShowFewer+"-"+i),yield this.UnshowFewer(i)),n(i,e);case r.a.Save:return e&r.b.saved?(c&&v.a.renderToast({id:y.a.Save+"-"+i,toastType:y.a.Save,expirationInMs:l,referrerButton:d}),yield this.Save(i)):(v.a.expireToast(y.a.Save+"-"+i),yield this.Unsave(i)),n(i,e);case r.a.Hide:return e&r.b.hide?yield this.Hide(i):yield this.Unhide(i),n(i,e);case r.a.Mute:yield this.Mute(o);break;case r.a.ReportAd:return n(i,e);default:return}}))}GetPublisherDetails(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=this.providersServiceEndpointURL,i={method:"GET",headers:Object.assign(Object.assign({},yield p.a.getOneServiceHeaders()),this.additionalHeaders)};[{key:"ids",value:e},...yield this.getOneServiceCommonParam()].forEach(e=>e.value&&t.searchParams.set(e.key,e.value));try{const n=yield Object(m.b)(()=>Object(a.a)(this,void 0,void 0,(function*(){return yield this.fetchImpl(t.href,i)})),"getProviderDetails");if(!n.ok){const i=`OneService returned error response. Status: ${n.status} for providerId: ${e} (url: ${t.href}`;throw new Error(i)}return n.json()}catch(e){h.a.sendAppErrorEvent(Object.assign(Object.assign({},c.ab.CardActionGetActionError),{message:`Error while calling getPublisherDetails action for card action: url: ${t.href}, error: ${e}`}))}}))}DeleteCardActionRequest(e,t){return Object(a.a)(this,void 0,void 0,(function*(){const i=this.cardActionsServiceEndpointURL,n={method:"DELETE",credentials:"include",headers:Object.assign(Object.assign({},yield p.a.getOneServiceHeaders()),this.additionalHeaders)};[{key:"$filter",value:`actionType eq '${t}' and targetId eq '${e}'`},...yield this.getOneServiceCommonParam()].forEach(e=>e.value&&i.searchParams.set(e.key,e.value));try{const r=yield Object(m.b)(()=>Object(a.a)(this,void 0,void 0,(function*(){return yield this.fetchImpl(i.href,n)})),"deleteCardAction"+t);if(r.status>=400){const i=`OneService returned error response. Status: ${r.status} for actionType: ${t} and targetId: ${e}`;throw new Error(i)}return Object(b.a)(this.getPreloadReloadReason(t)),Object(j.e)(),r}catch(e){h.a.sendAppErrorEvent(Object.assign(Object.assign({},c.ab.CardActionDeleteActionError),{message:`Error while calling delete action for card action: url: ${i.href}, error: ${e}`}))}}))}PostCardActionRequest(e,t,i){return Object(a.a)(this,void 0,void 0,(function*(){const n=this.cardActionsServiceEndpointURL,r={method:"POST",body:JSON.stringify({actionType:t,targetId:e,targetType:i}),headers:Object.assign(Object.assign({},yield p.a.getOneServiceHeaders()),this.additionalHeaders),credentials:"include"};(yield this.getOneServiceCommonParam()).forEach(e=>e.value&&n.searchParams.set(e.key,e.value));try{const s=yield Object(m.b)(()=>Object(a.a)(this,void 0,void 0,(function*(){return yield this.fetchImpl(n.href,r)})),"getCardAction"+t);if(s.status>=400){const n=`OneService returned error response. Status: ${s.status} for actionType: ${t}, targetId: ${e} and targetType: ${i}`;throw new Error(n)}return Object(b.a)(this.getPreloadReloadReason(t)),Object(j.e)(),s.json()}catch(e){h.a.sendAppErrorEvent(Object.assign(Object.assign({},c.ab.CardActionPostActionError),{message:`Error while posting action for card action: url: ${n.href}, error: ${e}`}))}}))}getOneServiceCommonParam(){return Object(a.a)(this,void 0,void 0,(function*(){return this.isWindowsDashboard?p.a.getOneServiceParamsWithoutAuth(l.a.UserId,this.ocid,!1):(yield this.isUserSignedIn())?p.a.getOneServiceParamsWithAuth(l.a.UserId,this.ocid,!u.b.IsBlendedEnterprise):p.a.getOneServiceParamsWithoutAuth(l.a.UserId,this.ocid,!u.b.IsBlendedEnterprise)}))}isUserSignedIn(){return Object(a.a)(this,void 0,void 0,(function*(){if(u.b.UserIsSignedIn)return!0;return(yield Object(C.d)())===o.c.SignedIn}))}getPreloadReloadReason(e){switch(e){case r.a.Mute:return f.a.MutePublisher;case r.a.Save:return f.a.Save;case r.a.Like:return f.a.Like;case r.a.Dislike:return f.a.Dislike;default:return f.a.SettingsChange}}}{constructor(e,t){let i;i=e||(Object(O.a)()?window.fetch.bind(window):fetch),super(i,t)}}let x;const k=(e,t)=>x||(x=new I(e,t),x)},"8ntK":function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.Save="Save",e.Mute="Mute",e.Follow="Follow",e.Unfollow="Unfollow",e.InterestFailure="InterestFailure",e.ShowMore="ShowMore",e.ShowFewer="ShowFewer",e.Hide="Hide",e.DisableNotification="DisableNotification",e.EnableNotification="EnableNotification"}(n||(n={}))},Aiug:function(e,t,i){"use strict";i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return a})),i.d(t,"b",(function(){return r}));const n=[{id:"ar-ae",value:"ar-ae",displayString:"الإمارات العربية المتحدة (العربية)",direction:"rtl"},{id:"ar-eg",value:"ar-eg",displayString:"مصر (العربية)",direction:"rtl"},{id:"ar-sa",value:"ar-sa",displayString:"المملكة العربية السعودية (العربية)",direction:"rtl"},{id:"bn-in",value:"bn-in",displayString:"India (বাংলা)",direction:"ltr"},{id:"cs-cz",value:"cs-cz",displayString:"Česká republika (čeština)",direction:"ltr"},{id:"da-dk",value:"da-dk",displayString:"Danmark (Dansk)",direction:"ltr"},{id:"de-at",value:"de-at",displayString:"Österreich (Deutsch)",direction:"ltr"},{id:"de-ch",value:"de-ch",displayString:"Schweiz (Deutsch)",direction:"ltr"},{id:"de-de",value:"de-de",displayString:"Deutschland (Deutsch)",direction:"ltr"},{id:"el-gr",value:"el-gr",displayString:"Ελλάδα (ελληνικά)",direction:"ltr"},{id:"en-ae",value:"en-ae",displayString:"United Arab Emirates (English)",direction:"ltr"},{id:"en-au",value:"en-au",displayString:"Australia (English)",direction:"ltr"},{id:"en-ca",value:"en-ca",displayString:"Canada (English)",direction:"ltr"},{id:"en-gb",value:"en-gb",displayString:"United Kingdom (English)",direction:"ltr"},{id:"en-ie",value:"en-ie",displayString:"Ireland (English)",direction:"ltr"},{id:"en-in",value:"en-in",displayString:"India (English)",direction:"ltr"},{id:"en-my",value:"en-my",displayString:"Malaysia (English)",direction:"ltr"},{id:"en-nz",value:"en-nz",displayString:"New Zealand (English)",direction:"ltr"},{id:"en-ph",value:"en-ph",displayString:"Philippines (English)",direction:"ltr"},{id:"en-sg",value:"en-sg",displayString:"Singapore (English)",direction:"ltr"},{id:"en-us",value:"en-us",displayString:"United States (English)",direction:"ltr"},{id:"en-xl",value:"en-xl",displayString:"International Edition (English)",direction:"ltr"},{id:"en-za",value:"en-za",displayString:"South Africa (English)",direction:"ltr"},{id:"es-ar",value:"es-ar",displayString:"Argentina (español)",direction:"ltr"},{id:"es-cl",value:"es-cl",displayString:"Chile (español)",direction:"ltr"},{id:"es-co",value:"es-co",displayString:"Colombia (español)",direction:"ltr"},{id:"es-es",value:"es-es",displayString:"España (español)",direction:"ltr"},{id:"es-mx",value:"es-mx",displayString:"México (español)",direction:"ltr"},{id:"es-pe",value:"es-pe",displayString:"Perú (español)",direction:"ltr"},{id:"es-us",value:"es-us",displayString:"United States (español)",direction:"ltr"},{id:"es-ve",value:"es-ve",displayString:"Venezuela (español)",direction:"ltr"},{id:"es-xl",value:"es-xl",displayString:"América Latina (español)",direction:"ltr"},{id:"fi-fi",value:"fi-fi",displayString:"Suomi (suomi)",direction:"ltr"},{id:"fr-be",value:"fr-be",displayString:"Belgique (français)",direction:"ltr"},{id:"fr-ca",value:"fr-ca",displayString:"Canada (français)",direction:"ltr"},{id:"fr-ch",value:"fr-ch",displayString:"Suisse (français)",direction:"ltr"},{id:"fr-fr",value:"fr-fr",displayString:"France (français)",direction:"ltr"},{id:"fr-xl",value:"fr-xl",displayString:"Afrique francophone (français)",direction:"ltr"},{id:"he-il",value:"he-il",displayString:"ישראל (עברית)",direction:"rtl"},{id:"hi-in",value:"hi-in",displayString:"India (हिंदी)",direction:"ltr"},{id:"hu-hu",value:"hu-hu",displayString:"Magyarország (magyar)",direction:"ltr"},{id:"id-id",value:"id-id",displayString:"Indonesia (Bahasa Indonesia)",direction:"ltr"},{id:"it-it",value:"it-it",displayString:"Italia (italiano)",direction:"ltr"},{id:"ja-jp",value:"ja-jp",displayString:"日本 (日本語)",direction:"ltr"},{id:"ko-kr",value:"ko-kr",displayString:"한국 (한국어)",direction:"ltr"},{id:"mr-in",value:"mr-in",displayString:"India (मराठी)",direction:"ltr"},{id:"nb-no",value:"nb-no",displayString:"Norge (norsk, bokmål)",direction:"ltr"},{id:"nl-be",value:"nl-be",displayString:"België (Nederlands)",direction:"ltr"},{id:"nl-nl",value:"nl-nl",displayString:"Nederland (Nederlands)",direction:"ltr"},{id:"pl-pl",value:"pl-pl",displayString:"Polska (polski)",direction:"ltr"},{id:"pt-br",value:"pt-br",displayString:"Brasil (português)",direction:"ltr"},{id:"pt-pt",value:"pt-pt",displayString:"Portugal (Português)",direction:"ltr"},{id:"ru-ru",value:"ru-ru",displayString:"Россия (Pусский)",direction:"ltr"},{id:"sv-se",value:"sv-se",displayString:"Sverige (svenska)",direction:"ltr"},{id:"te-in",value:"te-in",displayString:"India (తెలుగు)",direction:"ltr"},{id:"th-th",value:"th-th",displayString:"ไทย (ไทย)",direction:"ltr"},{id:"tr-tr",value:"tr-tr",displayString:"Türkiye (Türkçe)",direction:"ltr"},{id:"vi-vn",value:"vi-vn",displayString:"Việt Nam (Tiếng Việt)",direction:"ltr"},{id:"zh-cn",value:"zh-cn",displayString:"中华人民共和国 (简体中文)",direction:"ltr"},{id:"zh-hk",value:"zh-hk",displayString:"香港特别行政區 (繁體中文)",direction:"ltr"},{id:"zh-tw",value:"zh-tw",displayString:"台灣 (繁體中文)",direction:"ltr"}];function a(e,t){return e.displayString<t.displayString?-1:e.displayString>t.displayString?1:0}function r(e){if(""!==document.dir)return"rtl"===document.dir;const t=n.find(t=>t.id===e);return t&&"rtl"===t.direction}},CgWR:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.HoroscopeCard="horoscopeCardEnabled",e.WeatherCard="weatherCardEnabled",e.SportsCard="sportsCardEnabled",e.MoneyCard="moneyCardEnabled",e.FinanceCard="financeCardEnabled",e.OnThisDayCard="onThisDayCardEnabled",e.ShoppingCard="shoppingCardEnabled",e.TrafficCard="trafficCardEnabled",e.EsportsCard="esportsCardEnabled",e.ElectionsCard="genericElectionCardEnabled",e.LotteryCard="lotteryCardEnabled",e.QnaCard="qnaCardEnabled",e.RecipesCard="recipeCardEnabled"}(n||(n={}))},CzGr:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("D57K"),a=(i("fuIx"),i("Zsg4"),i("e8jz"));function r(){return Object(n.a)(this,void 0,void 0,(function*(){const e={},t=Object(a.b)();if(t){e.MUID=t.muid;const i=yield Object(a.a)("service::api.msn.com::MBI_SSL");"MSA"===t.accountType&&i?e.UserAuthToken=i:"AAD"===t.accountType&&i&&(e.Authorization=i)}return e}))}},HFNa:function(e,t,i){"use strict";var n,a,r,s,o,c;i.d(t,"e",(function(){return n})),i.d(t,"c",(function(){return a})),i.d(t,"d",(function(){return r})),i.d(t,"a",(function(){return o})),i.d(t,"b",(function(){return v})),function(e){e.BroadcastNews_BreakingNews="BroadcastNews_BreakingNews",e.BroadcastNews_DailyBrief="BroadcastNews_DailyBrief",e.BroadcastNews_TopStories="BroadcastNews_TopStories",e.Community_SocialAchievements="Community_SocialAchievements",e.Community_SocialAlerts="Community_SocialAlerts",e.Community_SocialFollowers="Community_SocialFollowers",e.Community_SocialReactions="Community_SocialReactions",e.Community_SocialReplies="Community_SocialReplies",e.Elections_Deadline="Elections_Deadline",e.Elections_PrimaryResults="Elections_PrimaryResults",e.Elections_ScheduleChange="Elections_ScheduleChange",e.EsportsTeam_MatchUpcoming="EsportsTeam_MatchUpcoming",e.Finance_StockChangeAtMarketClose="Finance_StockChangeAtMarketClose",e.Finance_Watchlist="Finance_Watchlist",e.Flight_Info="Flight_Info",e.Flight_Info_TimerBased="Flight_Info_TimerBased",e.HotelReservation_PriceDrop="HotelReservation_PriceDrop",e.Lottery_DrawHappened="Lottery_DrawHappened",e.MsnNews_DailyBriefCoronavirus="MsnNews_DailyBriefCoronavirus",e.QuizType_NewQuizAvailable="QuizType_NewQuizAvailable",e.RealEstateCategory_ListingsUpdated="RealEstateCategory_ListingsUpdated",e.RealEstateEntity_Updated="RealEstateEntity_Updated",e.Rebates_CashOutAvailable="Rebates_CashOutAvailable",e.Rebates_PurchaseCancelled="Rebates_PurchaseCancelled",e.Rebates_PurchaseConfirmed="Rebates_PurchaseConfirmed",e.Rewards_ConfirmationOfDonation="Rewards_ConfirmationOfDonation",e.Rewards_ReminderToRedeem="Rewards_ReminderToRedeem",e.SapphireClient_Recall="SapphireClient_Recall",e.Shopping_DealOfTheDay="Shopping_DealOfTheDay",e.Shopping_DealOfTheDay_2="Shopping_DealOfTheDay_2",e.Shopping_PriceDrop="Shopping_PriceDrop",e.SportsTeam_GameEnded="SportsTeam_GameEnded",e.SportsTeam_SportsTopStories="SportsTeam_SportsTopStories"}(n||(n={})),function(e){e.AllNotifications="AllNotifications",e.AllCommunityNotifications="AllCommunityNotifications",e.AllFinanceNotifications="AllFinanceNotifications",e.AllNewsNotifications="AllNewsNotifications",e.AllSportsNotifications="AllSportsNotifications",e.Community_SocialAchievements="Community_SocialAchievements",e.Community_SocialAlerts="Community_SocialAlerts",e.Community_SocialFollowers="Community_SocialFollowers",e.Community_SocialReactions="Community_SocialReactions",e.Community_SocialReplies="Community_SocialReplies",e.News_BreakingNews="News_BreakingNews",e.News_DailyBrief="News_DailyBrief",e.News_TopStories="News_TopStories",e.Finance_StockChangeAtMarketClose="Finance_StockChangeAtMarketClose",e.SportsTeam_GameEnded="SportsTeam_GameEnded",e.SportsTeam_SportsTopStories="SportsTeam_SportsTopStories"}(a||(a={})),function(e){e.New="New",e.Seen="Seen"}(r||(r={})),function(e){e.AddInterest="AddInterest",e.BlockInference="BlockInference",e.DisableFeatureConsumption="DisableFeatureConsumption"}(s||(s={})),function(e){e.Follow="Follow",e.NotInterested="NotInterested",e.Disable="Disable",e.StopNotifying="StopNotifying"}(o||(o={})),function(e){e.Post="Post"}(c||(c={}));var d=i("D57K"),l=i("A90Q"),u=i("rvYQ"),h=i("dTwT"),g=i("hOj1"),p=i("I6Lx"),m=i("BQg2"),b=i("HxRh"),f=i("u5KZ");class v{constructor(){this.notificationHost="https://www.bing.com",this.getNotificationSettingClientPath="pnp/api/v1/notifications/settings/read",this.updateNotificationSettingClientPath="profile/interestmanager/update",this.getNotificationCountClientPath="bnc/notifications/count",this.getNotificationListClientPath="bnc/notifications"}getNotificationHeaders(){const e={"X-PERSONALBING-CSRF":"1"},t=Object(u.b)().CurrentMarket;t&&(e["X-Search-UILang"]=t);const i=Object(h.a)().getItem(l.e);i&&(e["X-Search-RPSToken"]=i);const n=Object(g.b)();return n&&(e["X-Search-ClientID"]=n),p.b.CurrentFlights&&(e["X-PERSONALBING-FLIGHTS"]=p.b.CurrentFlights),e}getNotificationSetting(){return Object(d.a)(this,void 0,void 0,(function*(){const e={service:"Anaheim"},t=new m.a;for(const i in e)t.set(i,e[i]);const i=new URL(this.getNotificationSettingClientPath,this.notificationHost);let n;i.search=t.toString();try{const e=yield fetch(i.href,{credentials:"same-origin",headers:this.getNotificationHeaders()});if(!e.ok)throw Error(e.statusText);n=yield e.json()}catch(e){return void f.a.sendAppErrorEvent(Object.assign(Object.assign({},b.if.WCDataFetchError),{message:"Error while fetching notifications",pb:{customMessage:"Error: "+e}}))}if(n)return n;f.a.sendAppErrorEvent(Object.assign(Object.assign({},b.if.WCJsonParseError),{message:"Didn't get valid JSON from notifications response."}))}))}updateNotificationSetting(e){return Object(d.a)(this,void 0,void 0,(function*(){const t=new URL(this.updateNotificationSettingClientPath,this.notificationHost),i=[];let n,a={};try{if("string"==typeof e){a[JSON.parse(JSON.parse(e)[0].ParametersJson).FeatureName]=!1}else a=e}catch(e){return void f.a.sendAppErrorEvent(Object.assign(Object.assign({},b.if.WCSettingUpdateError),{message:"Error while updating notification settings",pb:{customMessage:"Error: "+e}}))}for(const t in a)i.push({Partner:"Platform",Name:"SetIsConsumptionAllowedAllUp",ParametersJson:JSON.stringify({InterestConsumingService:"Anaheim",FeatureName:t,NewIsConsumptionAllowed:e[t]})});if(i.length){try{const e=yield fetch(t.href,{credentials:"same-origin",headers:this.getNotificationHeaders(),method:"POST",body:JSON.stringify(i)});if(!e.ok)throw Error(e.statusText);n=yield e.json()}catch(e){return void f.a.sendAppErrorEvent(Object.assign(Object.assign({},b.if.WCSettingUpdateError),{message:"Error while updating notification settings",pb:{customMessage:"Error: "+e}}))}return n}}))}getNotificationCount(){return Object(d.a)(this,void 0,void 0,(function*(){const e=new m.a;e.set("app","anaheim");const{pagetype:t}=p.b.ClientSettings||{};t&&e.set("pageId",t);const i=new URL(this.getNotificationCountClientPath,this.notificationHost);let n;i.search=e.toString();try{const e=yield fetch(i.href,{credentials:"same-origin",headers:this.getNotificationHeaders()});if(!e.ok)throw Error(e.statusText);n=yield e.json()}catch(e){return void f.a.sendAppErrorEvent(Object.assign(Object.assign({},b.if.WCDataFetchError),{message:"Error while fetching notification count",pb:{customMessage:"Error: "+e}}))}if(n)return n;f.a.sendAppErrorEvent(Object.assign(Object.assign({},b.if.WCJsonParseError),{message:"Didn't get valid JSON from notification count response."}))}))}getNotificationList(){return Object(d.a)(this,void 0,void 0,(function*(){const e=new m.a;e.set("app","anaheim");const{pagetype:t}=p.b.ClientSettings||{};t&&e.set("pageId",t);const i=new URL(this.getNotificationListClientPath,this.notificationHost);let n;i.search=e.toString();try{const e=yield fetch(i.href,{credentials:"same-origin",headers:this.getNotificationHeaders()});if(!e.ok)throw Error(e.statusText);n=yield e.json()}catch(e){return void f.a.sendAppErrorEvent(Object.assign(Object.assign({},b.if.WCSettingFetchError),{message:"Error while fetching notification settings",pb:{customMessage:"Error: "+e}}))}if(n)return n;f.a.sendAppErrorEvent(Object.assign(Object.assign({},b.if.WCJsonParseError),{message:"Didn't get valid JSON from notification settings response."}))}))}}},JzSW:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("HxRh"),a=i("u5KZ");class r extends Map{constructor(e){super(),this.identifier=e,this.subscriptions=new Map}set(e,t){super.set(e,t);const i=this.subscriptions.get(e)||[];return i.length?(i.forEach((i,r)=>{try{i&&i(t)}catch(t){a.a.sendAppErrorEvent(Object.assign(Object.assign({},n.jh),{message:"Failed to exceute subscription callback",pb:Object.assign(Object.assign({},n.jh.pb),{customMessage:`Error executing subscription callback for key [${e}] at handler index [${r}]`,instanceId:this.identifier,errorMessage:t&&t.message})}))}}),this):this}subscribe(e,t){const i=this.subscribeInternal(e,t);return this.has(e)&&this.tryExecuteSubscriptionCallback(e,i.index,this.get(e)),{unsubscribe:i.unsubscribe}}subscribeInternal(e,t){const i=this.subscriptions.get(e)||[];this.subscriptions.set(e,[...i,t]);const n=i.length;return{unsubscribe:()=>{const t=this.subscriptions.get(e)||[];t[n]&&(t[n]=null),this.subscriptions.set(e,t)},index:n}}tryExecuteSubscriptionCallback(e,t,i){const n=this.subscriptions.get(e);if(!n||!n.length)return;const a=n[t];"function"==typeof a&&a(i)}}},KETb:function(e,t,i){"use strict";i.d(t,"a",(function(){return D})),i.d(t,"b",(function(){return A}));var n=i("D57K"),a=i("XlyT"),r=i("IhCV"),s=i("z2Ro"),o=i("vq4Z"),c=i("VcDS");class d extends s.a{constructor(e,t,i,n){super(e,i,c.a.BeginActivity,r.a.newGuid(),new Date,t),this.LogLevel=o.a.Activity,this.Ended=!1,this.correlationVector=n}}var l=i("KSHU"),u=i("mRXR");class h extends s.a{constructor(e,t,i,n,a,s,d,l){super(e,l,c.a.BeginNetworkActivity,r.a.newGuid(),new Date,d),this.serviceName=t,this.LogLevel=o.a.Activity,this.Ended=!1,this.requestUri=i,this.requestHttpMethod=n,this.currentOperationName=a,this.correlationVector=s}}var g=i("9RHM");class p extends l.a{constructor(e,t){super(e),this.correlationVectorProvider=t}static getInstance(e,t){var i=e||"Default",n=p.InstancesMap[i];if(n)return n;var a=new u.a(i,o.a.Activity);return n=new p(a,t),p.InstancesMap[i]=n,n}isActivityEnabled(){return this.logger.isEnabledFor(o.a.Activity)}createActivity(e,t,i){if(this.isActivityEnabled()){let n,a;t&&(n=t.ActivityId,a=this.getVectorForNewActivity(t,!1));let r=new d(e,n,i,a);return this.logger.log(o.a.Activity,r),r}return t||null}createActivityCallback(e,t,i){return this.isActivityEnabled()?this.createActivity(e(),t,i):t||null}endActivity(e){if(this.isActivityEnabled()&&e&&!e.Ended){e.Ended=!0;const t=new Date,i=Object(g.a)(e);i.LogType=c.a.EndActivity,i.LogDateTime=t;const n=i.LogDateTime.getTime()-e.LogDateTime.getTime();i.Message=i.Message+" ElapsedTime (Milliseconds):"+n.toString(),i.elapsedTimeInMs=n,this.logger.log(o.a.Activity,i)}}createNetworkActivity(e,t,i,n,a,r,s,o){if(this.isActivityEnabled()){r||s||console.warn("'correlationVector' or 'parentActivity' is required to create network activity");let c=r||this.getVectorForNewActivity(s,!0),d=s?s.ActivityId:"";return new h(e,t,i,n,a,c,d,o)}return null}endSuccessfulNetworkActivity(e,t,i){this.endNetworkActivity(e,!0,t,i)}endFailedNetworkActivity(e,t,i,n){this.endNetworkActivity(e,!1,t,i,n)}endNetworkActivity(e,t,i,n,a){if(e&&!e.Ended){e.Ended=!0;let r=new Date,s=Object(g.a)(e);s.LogType=c.a.EndNetworkActivity,s.LogDateTime=r,s.elapsedTimeInMs=s.LogDateTime.getTime()-e.LogDateTime.getTime(),s.successful=t,s.responseSize=i,s.responseStatusCode=n,s.errorMessage=a,this.logger.log(o.a.Activity,s)}}getVectorForNewActivity(e,t){return e&&this.correlationVectorProvider?(e.latestChildCorrelationVector?e.latestChildCorrelationVector=this.correlationVectorProvider.incrementExternalVector(e.latestChildCorrelationVector):(e.latestChildCorrelationVector=this.correlationVectorProvider.extendExternalVector(e.correlationVector),t&&(e.latestChildCorrelationVector=this.correlationVectorProvider.incrementExternalVector(e.latestChildCorrelationVector))),e.latestChildCorrelationVector):""}}p.InstancesMap={};var m=i("/wq8");class b{constructor(e){if(this.loggingService=e,!e)throw"loggingService is required for LoggedExceptionManager."}error(e){throw this.loggingService.error(e),e}fatal(e){throw this.loggingService.fatal(e),e}}var f=i("HDSB");class v{constructor(e,t,i,n,a,r,s){if(!e)throw new Error("loggingService is required for ExponentialBackoffRetry.");const o=new b(e);this.logInvalidParams(o,t,i,n,a,s),this.loggingService=e,this.maxRetries=t||v.defaultMaxRetries,this.baseRetryDelayInMs=i||v.defaultBaseRetryDelayInMs,this.maxRetryDelayInMs=n||v.maxAllowedRetryDelayInMs,this.factor=a||v.defaultFactor,this.minOffsetInMs=r||v.defaultMinOffsetInMs,this.maxOffsetInMs=s||v.defaultMaxOffsetInMs,Object(f.a)()&&this.loggingService.infoCallback(()=>"ExponentialBackoffRetry has been configured.",null,{maxRetries:t,minTimeout:i,maxTimeout:n,factor:a})}executeRequest(e,t,i){return Object(n.a)(this,void 0,void 0,(function*(){return new Promise((a,r)=>Object(n.a)(this,void 0,void 0,(function*(){yield this.tryRequest(e,a,r,0,t,i)})))}))}logInvalidParams(e,t,i,n,a,r){t&&(t<1||t>v.maxAllowedRetries)&&e.fatal(`maxRetries should be at least 1 and less than ${v.maxAllowedRetries}.`),i&&i<v.defaultBaseRetryDelayInMs&&e.fatal("baseRetryDelay has to be a positive value greater than or equal to 100."),i&&r&&i<=r&&e.fatal("baseRetryDelay must not be smaller than the maximum delay offset."),n&&(n<=0||n>v.maxAllowedRetryDelayInMs)&&e.fatal(`maxRetryDelay has to be a positive value less than ${v.maxAllowedRetryDelayInMs}.`),a&&a<=0&&e.fatal("factor has to be a positive value.")}tryRequest(e,t,i,a,r,s){return Object(n.a)(this,void 0,void 0,(function*(){try{const i=1e4,n=yield this.timeoutServiceRequest(i,e());t(n)}catch(n){if(Object(f.a)()&&a<this.maxRetries){const o=3,c=parseFloat((Math.random()*(this.minOffsetInMs-this.maxOffsetInMs)+this.maxOffsetInMs).toFixed(o)),d=.5,l=Math.random()<d?-1:1,u=Math.min(this.baseRetryDelayInMs*Math.pow(this.factor,a),this.maxRetryDelayInMs)+c*l;this.loggingService.warnCallback(()=>`Retrying the request in ${u} milliseconds.`,s,{error:n,currentRetry:a+1,requestInfo:r}),setTimeout(()=>this.tryRequest(e,t,i,a+1,r,s),u)}else this.loggingService.errorCallback(()=>Object(f.a)()&&a<this.maxRetries?"ExponentialBackoffRetry has exceeded maximum retries "+this.maxRetries:"Request has failed.",s,{error:n,currentRetry:a,requestInfo:r}),i(n)}}))}timeoutServiceRequest(e,t){return Object(n.a)(this,void 0,void 0,(function*(){return new Promise((i,a)=>Object(n.a)(this,void 0,void 0,(function*(){const n=setTimeout(()=>a(new Error("Service Request Timed out!")),e);try{const e=yield t;i(e),clearTimeout(n)}catch(e){a(e),clearTimeout(n)}})))}))}}v.defaultBaseRetryDelayInMs=100,v.defaultFactor=2,v.defaultMaxOffsetInMs=25,v.defaultMaxRetries=5,v.defaultMinOffsetInMs=1,v.maxAllowedRetries=10,v.maxAllowedRetryDelayInMs=2e3;var y,S=i("VOUN"),O=i("hqLi");class T extends s.a{constructor(e,t,i,n,a){super(e,i,c.a.Instrumentation,n,a),this._counterName=e,this.CounterValue=t}get CounterName(){return this._counterName}incrementValue(){if("number"!=typeof this.CounterValue)throw"ERROR: Counter value is never initialized, cannot perform increment action.";this.CounterValue++}}class w extends l.a{constructor(e){super(e)}static getInstance(e){const t=e||"Default";let i=w.InstancesMap[t];if(i)return i;let n=new u.a(t,o.a.Trace);return i=new w(n),w.InstancesMap[t]=i,i}static getDimensionedLogItems(e,t){let i=[],n=new T(e.CounterName,e.CounterValue,Object(g.a)(e.Data),e.ActivityId,e.LogDateTime);if(n.LogLevel=o.a.Trace,i.push(n),t&&!Object(O.a)(t))for(let n of Object.keys(t))for(let a of t[n]){let t=n.indexOf(":")>-1?`${e.CounterName}(${n.replace(":","-")}: ${a})`:`${e.CounterName}(${n}: ${a})`,r=new T(t,e.CounterValue,Object(g.a)(e.Data),e.ActivityId,e.LogDateTime);r.LogLevel=o.a.Trace,i.push(r)}return i}logPerfCounter(e,t,i,n){const a=new T(e,t,n);this.logPerfCounterItem(a,i)}logPerfCounterItem(e,t){const i=w.getDimensionedLogItems(e,t);for(let e of i)this.logger.log(o.a.Trace,e)}}w.InstancesMap={};class C extends s.a{constructor(e,t,i,n,a,r,s,c){super(e,s),this.pageName=e,this.LogLevel=o.a.Activity,this._userActivityType=t,this.correlationVector=i,this.trackingData=n,this.pageTitle=a,this.pageUri=r,this.eventData=c}get userActivityType(){return this._userActivityType}}!function(e){e[e.None=0]="None",e[e.PageAction=1]="PageAction",e[e.PageView=2]="PageView"}(y||(y={}));class j extends l.a{constructor(e){super(e)}static getInstance(e){var t=e||"Default",i=j.InstancesMap[t];if(i)return i;var n=new u.a(t,o.a.Activity);return i=new j(n),j.InstancesMap[t]=i,i}isActivityTrackingEnabled(){return this.logger.isEnabledFor(o.a.Activity)}logPageView(e,t,i,n,a,r){this.isActivityTrackingEnabled()&&this.logger.log(o.a.Activity,this.getUserActivityLogItem(e,t,i,a,r,n))}logPageActionEvent(e,t,i,n,a,r,s){if(this.isActivityTrackingEnabled()){if(!e)throw"''eventData' required for logging page action event.";e.elementTitle&&e.eventType&&e.elementTitle.trim()&&e.eventType.trim()&&this.logger.log(o.a.Activity,this.getUserActivityLogItem(t,i,n,r,s,a,e))}}getUserActivityLogItem(e,t,i,n,a,r,s){if(!e)throw"''pageName' is required for logging user activity.";return s?new C(e,y.PageAction,t,i,n,a,r,s):new C(e,y.PageView,t,i,n,a,r)}}j.InstancesMap={};class I{constructor(e,t,i,n){this.loggingServiceInstance=e||S.a.getInstance(),this.activityServiceInstance=t||p.getInstance(),this.userActivityServiceInstance=i||j.getInstance(),this.perfCounterServiceInstance=n||w.getInstance()}get loggingService(){return this.loggingServiceInstance}get activityLoggingService(){return this.activityServiceInstance}get userActivityTrackingService(){return this.userActivityServiceInstance}get perfCounterLoggingService(){return this.perfCounterServiceInstance}getLoggingServiceByName(e){return this.checkLoggerName(e),S.a.getInstance(e)}getActivityLoggingServiceByName(e){return this.checkLoggerName(e),p.getInstance(e)}getUserActivityTrackingServiceByName(e){return this.checkLoggerName(e),j.getInstance(e)}getPerfCounterLoggingServiceByName(e){return this.checkLoggerName(e),w.getInstance(e)}addActivityLoggingService(e){this.checkServiceInstance(e),p.getInstance(e.getLoggerName())}checkLoggerName(e){if(!e)throw"'loggerName' is required."}checkServiceInstance(e){if(!e)throw"'serviceInstance' is required."}}var x=i("msIb"),k=i("tMmC");let P,E;function D(e,t,i){return Object(n.a)(this,void 0,void 0,(function*(){let n,r;try{if(n=yield fetch(e,t),n&&n.ok)return n}catch(t){Object(a.c)(t,i,"Exception calling 1S primary Url: "+e)}return n&&n.headers&&n.headers.get("OneWebServiceLatency")?n:e.indexOf("assets.msn.com/service/")>0?(r=e.replace("assets.msn.com/service/","api.msn.com/"),yield fetch(r,t)):n}))}function A(e,t){return Object(n.a)(this,void 0,void 0,(function*(){const i=M().activityLoggingService.createActivity(t);return yield x.a.serviceRequestOnComplete(()=>function(){if(E)return E;return E=new v(M().loggingService,3),E}().executeRequest(e,null,i),()=>M().activityLoggingService.endActivity(i))}))}function M(){if(P)return P;const e=p.getInstance("ExperienceActivityLogger");return Object(f.a)()&&k.a.isDebug()&&e.addAppender(new m.a(o.a.Activity)),P=new I(k.a.getLoggingService(),e),P}},LHdR:function(e,t,i){"use strict";var n=i("XhxR"),a=i("zI0X"),r=i("2pXY"),s=i("aPP9"),o=i("FROA"),c=i("d9YH"),d=i("U64u"),l=o.a&&1/Object(d.a)(new o.a([,-0]))[1]==1/0?function(e){return new o.a(e)}:c.a;t.a=function(e,t,i){var o=-1,c=a.a,u=e.length,h=!0,g=[],p=g;if(i)h=!1,c=r.a;else if(u>=200){var m=t?null:l(e);if(m)return Object(d.a)(m);h=!1,c=s.a,p=new n.a}else p=t?[]:g;e:for(;++o<u;){var b=e[o],f=t?t(b):b;if(b=i||0!==b?b:0,h&&f==f){for(var v=p.length;v--;)if(p[v]===f)continue e;t&&p.push(f),g.push(b)}else c(p,f,i)||(p!==g&&p.push(f),g.push(b))}return g}},LJMo:function(e,t,i){"use strict";var n;function a(e){switch(e){case"ArticlePreview":return 13;case"SlideshowPreview":return 14;case"VideoPreview":return 15;default:return null}}i.d(t,"a",(function(){return n})),i.d(t,"b",(function(){return a})),function(e){e.Article="article",e.Slideshow="slideshow",e.Video="video",e.Spotlight="content360",e.Infopane="infopane",e.TabbedInfopane="tabbedInfopane",e.HalfPane="HalfPane",e.HeadToHead="HeadToHead",e.Mosaic="Mosaic",e.Triptych="Triptych",e.TabbedInfopaneTab="tabbedInfopaneTab",e.WebContent="webcontent",e.ExternalLink="link",e.DenseList="DenseList",e.BackFillContent="BackfillContent",e.MyBriefRiverCard="toppicks",e.NativeAd="nativead",e.CmsAd="cmsad",e.ShoppingCard="ShoppingCard",e.ShoppingCarousel="ShoppingCarousel",e.ComicsCarousel="ComicsCarousel",e.EditorsPickCarousel="EditorsPickCarousel",e.SelectCarousel="SelectCarousel",e.DailyFixGamesCarousel="DailyFixGamesCarousel",e.NewsSegmentCarousel="NewsSegmentCarousel",e.SubscriptionCarousel="SubscriptionCarousel",e.TopStories="topStories",e.WorkHeadlines="workNews",e.Trending="trendingnow",e.LocalNews="XfeedUpsell",e.LocalNewsFeed="LocalNewsFeed",e.TrendingInTenMinutes="trendingInTenMinutes",e.Horoscope="Horoscope",e.Elections="GenericElection",e.RecommendedSearchCarousel="RecommendedSearch",e.OnThisDay="OnThisDay",e.Lottery="Lottery",e.PartnerUpsell="PartnerUpsell",e.Qna="qnacard",e.Recipes="recipecard",e.TravelDestinationCard="TravelDestinationCard",e.TravelDestinationCarouselCard="TravelDestinationCarouselCard",e.BingHealthCovid19StatsCard="Covid19Stats",e.PlaceholderCard="placeholder",e.BingVideo="BingVideo",e.BingVideoCarousel="BingVideoCarousel",e.EsportsHighlight="esportsHighlight",e.EsportsLiveStream="esportsLiveStream",e.EsportsMatch="esportsMatch",e.EsportsTournament="esportsTournament",e.WeatherSummary="WeatherSummary",e.WeatherSummary_spotlight="WeatherSummary_spotlight",e.StockQuote="StockQuote",e.StockQuote_spotlight="StockQuote_spotlight",e.MoneyInfo="MoneyInfo",e.SportsMatch="SportsMatch",e.SportsOlympics="SportsOlympics",e.TrafficDelays="TrafficDelays",e.ShoppingMerchantCategoryDeals="ShoppingMerchantCategoryDeals",e.Group="group",e.Upsell="FreUpsell",e.Dense="densetab",e.IndustryNewsCard="IndustryNewsCard",e.RecommendedCardFeed="RecommendedCardFeed",e.TopicFeed="TopicFeed"}(n||(n={}))},MMvm:function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var n=i("D57K"),a=i("ax+D"),r=i("rvYQ"),s=i("y+Kz"),o=i("6ADy"),c=i("msIb"),d=i("KETb"),l=i("fuIx"),u=i("CzGr"),h=i("e8jz"),g=i("Zsg4"),p=i("HxRh"),m=i("tERu"),b=i("/+Un"),f=i("NkTa");class v{constructor(e,t){this.fetchImpl=e,this.handleAppErrorEventCall=t,this.endPoint="msn/suggestions",this.servicdeOcid="feeds"}getSuggestedInterests(e,t,i){return Object(n.a)(this,void 0,void 0,(function*(){if(a.a.isNullOrWhiteSpace(e))return[];const n=e.trim(),r=yield this.getRequestInit(),s=[...yield this.getCommonParams(this.servicdeOcid),{key:"qscope",value:"news"},{key:"q",value:n},{key:"Type",value:i||"provider,bingtopic,category"},{key:"$top",value:String(t)}],c=Object(o.c)(this.endPoint);s.forEach(e=>e.value&&c.searchParams.set(e.key,e.value));const d=yield this.sendRequest(decodeURIComponent(c.href),r);if(!d)return null;let l=null;try{l=d.value[0].groups[0].suggestionItems}catch(e){this.handleAppErrorEventCall(p.Je.ErrorResponseFromOneServiceIsInvalid)}return Object(f.a)(l,"id")}))}getRequestInit(e=null){return Object(n.a)(this,void 0,void 0,(function*(){return null==e&&(e={method:"GET"}),(yield Object(b.d)())===m.c.SignedIn&&(e.credentials="include"),e.headers=Object(l.b)()?yield Object(u.a)():yield c.a.getOneServiceHeaders(),e}))}getCommonParams(e){return Object(n.a)(this,void 0,void 0,(function*(){if(Object(l.b)())return this.getSapphireQueryParams();return(yield Object(b.d)())===m.c.SignedIn?c.a.getOneServiceParamsWithAuth(r.a.UserId,e):c.a.getOneServiceParamsWithoutAuth(r.a.UserId,e)}))}getSapphireQueryParams(){const e=c.a.getOneServiceNonDynamicParamsWithoutAuth(this.servicdeOcid),t=Object(h.b)();return t&&(e.push({key:s.t.market,value:t.market}),e.push({key:s.t.fdhead,value:t.features}),e.push({key:s.t.activityId,value:t.activityId}),t.latitude&&t.longitude&&e.push({key:s.t.location,value:`${t.latitude}|${t.longitude}`})),e}sendRequest(e,t){return Object(n.a)(this,void 0,void 0,(function*(){return Object(l.b)()?yield this.sapphireRequest(decodeURIComponent(e),t):yield this.networkRequest(decodeURIComponent(e),t)}))}sapphireRequest(e,t){return Object(n.a)(this,void 0,void 0,(function*(){const i={url:e,headers:t.headers,body:t.body,refresh:!0},n=yield Object(g.c)(i);return JSON.parse(n||"{}")}))}networkRequest(e,t){return Object(n.a)(this,void 0,void 0,(function*(){return yield Object(d.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const i=yield this.fetchImpl(e,t);return i.ok?i.json():(this.handleAppErrorEventCall(p.Je.ErrorResponseFromOneService),null)})),"getSuggestedInterests")}))}}},NkTa:function(e,t,i){"use strict";var n=i("wh7w"),a=i("LHdR");t.a=function(e,t){return e&&e.length?Object(a.a)(e,Object(n.a)(t,2)):[]}},OTKB:function(e,t,i){"use strict";i.d(t,"c",(function(){return s})),i.d(t,"b",(function(){return o})),i.d(t,"g",(function(){return c})),i.d(t,"f",(function(){return d})),i.d(t,"e",(function(){return l})),i.d(t,"d",(function(){return u})),i.d(t,"a",(function(){return h}));var n=i("hOj1"),a=i("rvYQ"),r=i("I6Lx");const s="00000000400F9D16",o="3a4d129e-7f50-4e0d-a7fd-033add0a29f4",c="service::www.msn.com::MBI_SSL",d="User.Read Userinfo.ReadWrite",l="https://www.api.msn.com/",u="https://enterprisenews.microsoft.com/";function h(e){var t;const i=a.a.IsCnDomain||"zh-cn"===(null===(t=null===r.b||void 0===r.b?void 0:r.b.Locale)||void 0===t?void 0:t.toLowerCase());e&&Object(n.c)("MUID",e,365,i?".msn.cn":".msn.com","/")}},OTRt:function(e,t,i){"use strict";var n,a;i.d(t,"a",(function(){return n})),function(e){e.CardView="cardview",e.FlatView="flatview"}(n||(n={})),function(e){e.t3="T3",e.t6="T6"}(a||(a={}))},OkDC:function(e,t,i){"use strict";var n;i.d(t,"c",(function(){return n})),i.d(t,"a",(function(){return a})),i.d(t,"d",(function(){return r})),i.d(t,"e",(function(){return s})),i.d(t,"b",(function(){return o})),function(e){e.Publisher="Publisher",e.Article="Article",e.Topic="Topic"}(n||(n={}));const a={Publisher:{actionType:"More",targetType:"SourceProvider"},Article:{actionType:"Like"},Topic:{actionType:"Follow"}};var r,s;!function(e){e.Get="GET",e.Post="POST",e.Delete="DELETE"}(r||(r={})),function(e){e.Providers="Providers",e.ArticlesMulti="ArticlesMulti",e.Confirmation="Confirmation",e.Topics="Topics",e.Upsell="Upsell"}(s||(s={}));const o=-1},Qo3E:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("u5KZ"),a=i("XlyT"),r=i("HxRh");class s{static renderToast(e){this.renderToastCallback?this.renderToastCallback(e):n.a.sendAppErrorEvent(Object(a.a)(r.Lh,"Undefined toast render callback function"))}static setRenderToastCallback(e){this.renderToastCallback=e}static expireToast(e){this.expireToastCallback?this.expireToastCallback(e):n.a.sendAppErrorEvent(Object(a.a)(r.Kh,"Undefined toast expire callback function"))}static setExpireToastCallback(e){this.expireToastCallback=e}static setCurrentToast(e,t){this.currentToastId!==e&&(this.currentToastId=e,this.renderToastCallback=t,this.currentToastIdChangeCallbacks.forEach(t=>t(e)),this.renderToast())}static addCurrentToastIdChangeCallback(e){e&&this.currentToastIdChangeCallbacks.push(e)}}s.currentToastIdChangeCallbacks=[]},RIQ7:function(e,t,i){"use strict";i.d(t,"c",(function(){return r})),i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return o}));var n=i("Am8i"),a=i("u5KZ");i("y+Kz");function r(e,t){if(e){const i={type:n.e.Module,name:t,content:{}};return e.addOrUpdateChild(i)}return null}function s(){if(!a.a)return;const e=a.a.getPageMetadata();return e&&e.contract&&e.contract.page?e.contract.page.ocid:void 0}function o(e){const t=s(),i=e.toLowerCase();if(!t||-1!=i.indexOf("?ocid=")||-1!=i.indexOf("&ocid="))return e;const n=-1==e.indexOf("?")?"?":"&";return`${e}${n}ocid=${encodeURIComponent(t)}`}},RX41:function(e,t,i){"use strict";i.d(t,"b",(function(){return Ut})),i.d(t,"a",(function(){return Nt}));var n,a=i("D57K"),r=i("h3hC"),s=i("7qs3"),o=i("S8sE"),c=i("3KaK");!function(e){e.c1="c1",e.c2="c2",e.c3="c3",e.c4="c4",e.c5="c5"}(n||(n={}));var d=i("mJTN"),l=i("qxGE"),u=i("uaFm"),h=i("oNh7"),g=i("Hrev"),p=i("tERu"),m=i("lEej"),b=i("J/Ia"),f=i("rOCc"),v=i("rvYQ"),y=i("hOj1"),S=i("2+Xb");let O;class T{constructor(e={}){this.options=e,this.defaultColumSize=300,this.update=()=>{const e=this.identifyBreakpoint(window.innerWidth);this.breakpoint.column!==e.column&&(this.breakpoint=e,d.b.set(d.a.ColumnArrangement,e.column)),this.openRequestAnimationFrame=!1},this.requestFrame=()=>{this.openRequestAnimationFrame||(this.openRequestAnimationFrame=!0,window.requestAnimationFrame(this.update))},this.options.gutterSize=this.options.gutterSize||12,this.options.breakpointOverrides=this.options.breakpointOverrides||new Map,this.options.enableFiveColumnLayout=this.options.enableFiveColumnLayout||!1,this.setBreakpoints(),this.breakpoint=this.identifyBreakpoint(window.innerWidth),d.b.set(d.a.ColumnArrangement,this.breakpoint.column),window.addEventListener("resize",this.requestFrame)}get currentColumnArrangement(){return this.breakpoint.column}setBreakpoints(){this.breakpoints=[this.getBreakpoint(n.c1),this.getBreakpoint(n.c2,2),this.getBreakpoint(n.c3,3),this.getBreakpoint(n.c4,4)],this.options.enableFiveColumnLayout&&this.breakpoints.push(this.getBreakpoint(n.c5,5))}getBreakpoint(e,t){return{column:e,width:this.options.breakpointOverrides.get(e)||this.calculateBreakpointWidth(t)}}calculateBreakpointWidth(e){return!e||e<=0?0:this.defaultColumSize*e+this.options.gutterSize*(e-1)+32}identifyBreakpoint(e){for(let t=this.breakpoints.length-1;t>-1;t--){const i=this.breakpoints[t];if(e>=i.width)return i}}}let w=!1;function C(){if(w)return;const e=function(){const e=v.a.AuthCookieName;if(e===g.b.Unknown)return p.c.NotSignedIn;const t=e===g.b.AppAnon?g.a.AppAnonCookieExists:g.a.AnonCookieExists;return Object(y.a)(t)?p.c.SignedIn:p.c.NotSignedIn}(),t=Object(S.c)();var i;d.b.set(d.a.IsSignedIn,e),d.b.set(d.a.CookieConsentStatus,t?m.a.Required:m.a.NotRequired),t&&window.addEventListener(b.a,j),Object(S.d)()&&j(),function(){const e=matchMedia("(prefers-color-scheme:dark)");d.b.set(d.a.IsDarkMode,e.matches),e.addEventListener("change",e=>{d.b.set(d.a.IsDarkMode,e.matches)})}(),d.b.set(d.a.IsDocumentVisible,"visible"===document.visibilityState),document.addEventListener("visibilitychange",()=>{d.b.set(d.a.IsDocumentVisible,"visible"===document.visibilityState)}),O||(O=new T(i)),w=!0}function j(){const e=window.OnetrustActiveGroups;let t=[];t=e&&e.trim().split(",").filter(e=>e&&e.trim()&&e in f.a).map(e=>f.a[e]),t.length||t.push(f.a.C0001),d.b.set(d.a.OnetrustActiveCookieGroups,t)}var I=i("hSGL"),x=i("Zn5T"),k=i("s9+9"),P=i("Aiug"),E=i("Am8i"),D=i("Gsg7"),A=i("kpPY");const M="contentLinkButton",F="cinterests",R="followedinterests",L="discoverinterests",U="recommendedtopics",N="Saved Stories",$="Read Stories",H="Content Card",B="destination",z="Save",q="Undo save",W="Card Action Ellipses",V="Followed Publishers Management",_="Publisher Management",G="Information Cards",J="Feed Settings",K="Interests Nav",Q="Publisher Confirmation",X="Unhide",Y="Unmute",Z="Cancel",ee="Close",te="TuneYourFeed",ie="moreoptions",ne="restoredefaultinterests",ae="Hamburger",re="Dismiss",se="Language and content settings",oe="InterestsSearchBox",ce="Topic_{0}",de="Publisher_{0}",le="Notification";class ue{constructor(e){this.rootTelemetryObject=e,this.moreOptionsTelemetryTag=e=>{var t;return null===(t=this.followedInterestsSectionTelemetryObject)||void 0===t?void 0:t.addOrUpdateChild({name:ie,behavior:E.b.More,content:{headline:e},destinationUrl:""}).getMetadataTag()},this.moreOptionsRestoreDefaultTelemetryTag=e=>{var t;return null===(t=this.followedInterestsSectionTelemetryObject)||void 0===t?void 0:t.addOrUpdateChild({name:ne,behavior:E.b.Rearrange,content:{headline:e},destinationUrl:""}).getMetadataTag()},this.settingCardTelemetryTag=(e,t)=>null==e?void 0:e.addOrUpdateChild({name:t,content:{headline:t},destinationUrl:location.href,type:E.e.Interaction}).getMetadataTag(),this.topicsSectionTelemetryObject=e=>{var t;return null===(t=this.interestsTelemetryObject)||void 0===t?void 0:t.addOrUpdateChild({name:e})},this.topicsSectionTelemetryTag=e=>{var t;return null===(t=this.interestsTelemetryObject)||void 0===t?void 0:t.addOrUpdateChild({name:e}).getMetadataTag()},this.publisherActionButtonTelemetryTag=(e,t)=>{var i;return null===(i=this.hiddenPublishersSectionTelemetryObject)||void 0===i?void 0:i.addOrUpdateChild({name:X,type:E.e.Interaction,behavior:E.b.Show,content:{headline:e,id:t}}).getMetadataTag()},this.notificationTopicTelemetryTag=e=>{var t;if(!e)return"";const i=e.type?"GeneralSettings":e.name+"Notification";return null===(t=this.notificationSectionTelemetryObject)||void 0===t?void 0:t.addOrUpdateChild({name:i,content:{headline:i}}).getMetadataTag()},this.notificationSwitchClickTelemetryTag=(e,t)=>{var i;return null===(i=this.notificationSectionTelemetryObject)||void 0===i?void 0:i.addOrUpdateChild({name:e,type:E.e.Interaction,behavior:t?E.b.TurnOn:E.b.TurnOff,content:{headline:e}}).getMetadataTag()},e&&(this.interestsTelemetryObject=this.rootTelemetryObject,this.interestsSearchBoxTelemetryObject=this.interestsTelemetryObject.addOrUpdateChild({name:oe}),this.recommendedInterestsTopicsSectionTelemetryObject=this.interestsTelemetryObject.addOrUpdateChild({name:U}),this.followedInterestsSectionTelemetryObject=this.interestsTelemetryObject.addOrUpdateChild({name:R}),this.followedPublishersSectionTelemetryObject=this.interestsTelemetryObject.addOrUpdateChild({name:_}),this.hiddenPublishersSectionTelemetryObject=this.interestsTelemetryObject.addOrUpdateChild({name:_}),this.savedStoriesSectionTelemetryObject=this.interestsTelemetryObject.addOrUpdateChild({name:N}),this.readStoriesSectionTelemetryObject=this.interestsTelemetryObject.addOrUpdateChild({name:$}),this.informationCardSectionTelemetryObject=this.interestsTelemetryObject.addOrUpdateChild({name:G}),this.feedSettingsSectionTelemetryObject=this.interestsTelemetryObject.addOrUpdateChild({name:J}),this.notificationSectionTelemetryObject=this.interestsTelemetryObject.addOrUpdateChild({name:le}),this.marketSettingsSectionTelemetryObject=this.interestsTelemetryObject.addOrUpdateChild({name:se}),this.interestsTelemetryTag=this.interestsTelemetryObject.getMetadataTag(),this.interestsSearchBoxTelemetryTag=this.interestsSearchBoxTelemetryObject.getMetadataTag(),this.recommendedInterestsTopicsSectionTelemetryTag=this.recommendedInterestsTopicsSectionTelemetryObject.getMetadataTag(),this.followedInterestsSectionTelemetryTag=this.followedInterestsSectionTelemetryObject.getMetadataTag(),this.followedPublishersSectionTelemetryTag=this.followedPublishersSectionTelemetryObject.getMetadataTag(),this.hiddenPublishersSectionTelemetryTag=this.hiddenPublishersSectionTelemetryObject.getMetadataTag(),this.savedStoriesSectionTelemetryTag=this.savedStoriesSectionTelemetryObject.getMetadataTag(),this.readStoriesSectionTelemetryTag=this.readStoriesSectionTelemetryObject.getMetadataTag(),this.informationCardSectionTelemetryTag=this.informationCardSectionTelemetryObject.getMetadataTag(),this.feedSettingsSectionTelemetryTag=this.feedSettingsSectionTelemetryObject.getMetadataTag(),this.notificationSectionTelemetryTag=this.notificationSectionTelemetryObject.getMetadataTag(),this.marketSettingsSectionTelemetryTag=this.marketSettingsSectionTelemetryObject.getMetadataTag())}}class he{constructor(e,t,i,n,a,r){if(this.rootTelemetryObject=e,!e)return;const s={brand:a,category:n,headline:i,id:t,vertical:n},o=e.addOrUpdateChild({name:H,behavior:E.b.Navigate,content:s});this.contentCardTelemetryTag=o.getMetadataTag(),this.destinationTelemetryTag=o.addOrUpdateChild({name:B,behavior:E.b.Navigate,content:s,destinationUrl:r}).getMetadataTag(),this.moreButtonTelemetryObject=o.addOrUpdateChild({name:W,behavior:E.b.More,type:E.e.ActionButton,content:s}),this.moreButtonTelemetryTag=this.moreButtonTelemetryObject.getMetadataTag(),this.saveButtonTelemetryTag=o.addOrUpdateChild({name:z,behavior:E.b.Save,content:s}).getMetadataTag(),this.undoSaveButtonTelemetryTag=o.addOrUpdateChild({name:q,behavior:E.b.UndoSave,content:s}).getMetadataTag()}}class ge{constructor(e,t,i,n,a,r,s){if(this.rootTelemetryObject=e,!e)return;const o=Object(A.a)(s===E.c.Publisher?de:ce,i);this.followButtonTelemetryTag=e.addOrUpdateChild({name:o,behavior:E.b.Unfollow,type:E.e.ActionButton,content:{headline:n?Object(A.a)(n,i):"",type:s,id:t},destinationUrl:"",feed:{id:t}}).getMetadataTag(),this.unfollowButtonTelemetryTag=e.addOrUpdateChild({name:o,behavior:E.b.Follow,type:E.e.ActionButton,content:{headline:a?Object(A.a)(a,i):"",type:s,id:t},destinationUrl:"",feed:{id:t}}).getMetadataTag(),this.contentLinkButtonTelemetryTag=e.addOrUpdateChild({name:M,behavior:E.b.Navigate,type:E.e.ActionButton,content:{headline:r?Object(A.a)(r,i):"",type:s,id:t},destinationUrl:"",feed:{id:t}}).getMetadataTag()}}class pe{constructor(e,t,i,n){this.dialogTelemetryObject=this.getChildTelemetryItem(t,e,{name:Q,content:{headline:""}}),this.dialogTelemetryTag=this.dialogTelemetryObject.getMetadataTag(),this.actionButtonTelemetryObject=this.getChildTelemetryItem(t,this.dialogTelemetryObject,{name:Y,behavior:E.b.Unmute,content:{headline:i},destinationUrl:""}),this.actionButtonTelemetryTag=this.actionButtonTelemetryObject.getMetadataTag(),this.cancelButtonTelemetryObject=this.getChildTelemetryItem(t,this.dialogTelemetryObject,{name:Z,behavior:E.b.MuteCancel,content:{headline:n},destinationUrl:""}),this.cancelButtonTelemetryTag=this.cancelButtonTelemetryObject.getMetadataTag(),this.closeButtonTelemetryObject=this.getChildTelemetryItem(t,this.dialogTelemetryObject,{name:ee,behavior:E.b.Close,content:{headline:""},destinationUrl:""}),this.closeButtonTelemetryTag=this.closeButtonTelemetryObject.getMetadataTag()}getChildTelemetryItem(e,t,i){if(!t)return null;const n=`${t.contract.name}-${i.name}`,a=e[n]||t.addOrUpdateChild(i);return e[n]=a,a}}class me{constructor(e,t,i,n,a,r){this.followButtonTelemetryTag=new D.a({name:t,behavior:E.b.Unfollow,type:E.e.ActionButton,content:{headline:Object(A.a)(i,a),type:r,id:e}}).getMetadataTag(),this.unfollowButtonTelemetryTag=new D.a({name:t,behavior:E.b.Follow,type:E.e.ActionButton,content:{headline:Object(A.a)(n,a),type:r,id:e}}).getMetadataTag()}}var be=i("+djJ"),fe=i("XlyT"),ve=i("HxRh"),ye=i("uH2+"),Se=i("623N"),Oe=i("MMvm"),Te=i("0+nS"),we=i("6urM"),Ce=i("m4Zs"),je=i("cqAE");class Ie{constructor(e="Personalize"){this.getPageType=()=>this.pageType,this.initializeData=async e=>{const{config:t,fetchTopicsAndUserInterests:i,fetchFollowedPublishers:n,fetchMutedPublishers:a,fetchReadStories:r,fetchSavedStories:s,fetchNotificationSetting:o,fetchUserPreferences:c}=e,{enableFollowedPublishersExperience:d,enableMutedPublishersExperience:l,enableNotificationExperience:u}=t;i().then(()=>{if(d&&n(),l&&a(),this.isPersonalizePage){const{enableSavedStoriesExperience:e,enableReadStoriesExperience:i}=t;e&&s(),i&&r(),u&&o(),c()}})},this.pageType=e,this.isPersonalizePage="Personalize"===this.pageType}}class xe{constructor(){this.pageType="MySaves",this.getPageType=()=>this.pageType,this.initializeData=async e=>{const{savedStoriesLoaded:t,fetchSavedStories:i}=e;t||await i()}}}class ke{constructor(){this.pageType="History",this.getPageType=()=>this.pageType,this.initializeData=async e=>{const{readStoriesLoaded:t,fetchReadStories:i,savedStoriesLoaded:n,fetchSavedStories:a}=e;n||await a(),t||await i()}}}class Pe{constructor(){this.pageType="Setting",this.getPageType=()=>this.pageType,this.initializeData=async e=>{const{settingLoaded:t,fetchUserPreferences:i}=e;t||await i()}}}class Ee{constructor(){this.getPageType=()=>"Notification",this.initializeData=async e=>{await e.fetchNotificationSetting()}}}var De,Ae,Me,Fe,Re=i("ax+D"),Le=i("I6Lx"),Ue=i("g447"),Ne=i("AxnZ"),$e=i("lifk"),He=i("+8mm"),Be=i("Z3LZ"),ze=i("kS2v"),qe=i("HFNa"),We=i("k112"),Ve=i("KUTD"),_e=i("fNg4"),Ge=i("W3y6"),Je=i("ZwaX"),Ke=i("hme2"),Qe=i("u5KZ"),Xe=i("Qo3E"),Ye=i("8ntK"),Ze=i("y+Kz"),et=i("LJMo"),tt=i("msIb"),it=i("6ADy"),nt=i("KETb"),at=i("ac9z");!function(e){e.Cancel="cancel",e.Share="share",e.Save="save",e.Like="like",e.Dislike="dislike",e.HideStory="hide",e.MutePublisher="mute",e.ReportArticle="reportArticle",e.Report="report",e.AdChoice="adChoice",e.ShowMore="showMore",e.ShowFewer="showFewer",e.Divider="divider",e.ManageInterests="manageInterests"}(De||(De={})),function(e){e.Top="top",e.Middle="middle",e.Bottom="bottom"}(Ae||(Ae={})),function(e){e[e.OffensiveOrAdult=1]="OffensiveOrAdult",e[e.InaccurateOrMisleading=2]="InaccurateOrMisleading",e[e.Outdated=3]="Outdated",e[e.Duplicate=4]="Duplicate",e[e.DisplayIssue=5]="DisplayIssue",e[e.Other=6]="Other"}(Me||(Me={})),function(e){e[e.Misleading=1]="Misleading",e[e.Inappropriate=2]="Inappropriate",e[e.BadImage=3]="BadImage",e[e.Other=4]="Other"}(Fe||(Fe={}));var rt,st=i("/+Un"),ot=i("OTRt"),ct=i("zJcZ");!function(e){e.SavedContent="SavedContent",e.ReadHistory="ReadHistory"}(rt||(rt={}));class dt{constructor(e){this.config=e,this.requestUserFeedBase="MSN/User/me/"}getUserStoriesFromFeed(e,t=!1){return Object(a.a)(this,void 0,void 0,(function*(){const i=this.config.initialRequest;if(!i)return Qe.a.sendAppErrorEvent(Object.assign(Object.assign({},e===rt.SavedContent?ve.He.InterestsSavedStoriesInvalidConfigError:ve.He.InterestsReadStoriesInvalidConfigError),{message:"default OneService fetch configuration was invalid"})),null;const n=(yield Object(st.d)())===p.c.SignedIn?tt.a.getOneServiceParamsWithAuth(v.a.UserId,i.ocid,i.addPageInfoToOcid):tt.a.getOneServiceParamsWithoutAuth(v.a.UserId,i.ocid,i.addPageInfoToOcid),r=Object(at.b)(),s=[...n,{key:Ze.t.responseSchema,value:t?ot.a.CardView:ot.a.FlatView},{key:Ze.t.timeOut,value:""+i.timeoutMs},{key:Ze.t.top,value:""+i.count},{key:Ze.t.select,value:"title,id,url,images,provider"},{key:at.a,value:r?r.toString():null}],o=Object(it.c)(this.requestUserFeedBase+e);let c;s.forEach(e=>{e.value&&o.searchParams.set(e.key,e.value)});try{const e=yield Object(nt.b)(()=>Object(a.a)(this,void 0,void 0,(function*(){const e={credentials:"include",method:"GET",headers:yield tt.a.getOneServiceHeaders()},t=yield fetch(decodeURIComponent(o.href),e);if(!t||!t.ok)throw Error(t.statusText);return t})),"OneServiceCardProvider.fetch");c=e&&e.ok?yield e.json():null}catch(t){return void Qe.a.sendAppErrorEvent(Object.assign(Object.assign({},e===rt.SavedContent?ve.He.InterestsRetrieveSavedStoriesError:ve.He.InterestsRetrieveReadStoriesError),{message:"Error while fetching OneService user stories response",pb:Object.assign(Object.assign({},e===rt.SavedContent?ve.He.InterestsRetrieveSavedStoriesError.pb:ve.He.InterestsRetrieveReadStoriesError.pb),{customMessage:"Error: "+t})}))}if(!c)return void Qe.a.sendAppErrorEvent(Object.assign(Object.assign({},e===rt.SavedContent?ve.He.InterestsSavedStoriesInvalidJsonError:ve.He.InterestsReadStoriesInvalidJsonError),{message:"Didn't get valid JSON from user stories response."}));const{value:d}=c;if(d&&Re.a.arrayHasData(d))return t?this.mapUserStoriesToContentResponseCardView(d[0],e):this.mapUserStoriesToContentResponse(d[0].feedItems,e);Qe.a.sendAppErrorEvent(Object.assign(Object.assign(Object.assign({},ve.He.InterestsSavedStoriesInvalidListError),e===rt.SavedContent?ve.He.InterestsSavedStoriesInvalidListError:ve.He.InterestsReadStoriesInvalidListError),{message:"Didn't get valid user stories feed items list from response.",pb:Object.assign(Object.assign({},e===rt.SavedContent?ve.He.InterestsSavedStoriesInvalidListError.pb:ve.He.InterestsReadStoriesInvalidListError.pb),{customMessage:"serviceUrl.href: "+o.href})}))}))}mapUserStoriesToContentResponse(e,t){if(e)return{cardMetadata:e.map(e=>Object.assign(Object.assign({},e),{type:e.type||et.a.Article,metadata:Object.assign(Object.assign({},e.metadata),{abstractLength:null,actions:t===rt.SavedContent?[De.Save]:e.metadata.actions,kicker:[{feedName:" ",id:""}]})}))}}mapUserStoriesToContentResponseCardView(e,t){if(!e)return;const i=Object(ct.b)(e).feedItems;return t===rt.SavedContent&&i.map(e=>e.metadata.actions=[De.Save]),{cardMetadata:i}}}var lt=i("oePG"),ut=i("QBS5"),ht=i("0QZK"),gt=i("hqLi"),pt=i("DYG5"),mt=i("9RHM"),bt=i("3Me6"),ft=i("f8ag"),vt=i("IqCT"),yt=i("+Ht2"),St=i("XgsJ"),Ot=i("w0HK"),Tt=i("uPYz");const wt={arrowsort:ht.o,open:ht.Pb,myinterests:ht.Fb,workinterests:ht.Xc,news:ht.Gb,entertainment:ht.H,sports:ht.wc,esports:ht.J,business:ht.r,yourmoney:ht.Yc,lifestyle:ht.rb,fashionbeauty:ht.N,health:ht.db,autos:ht.p,self:ht.oc,video:ht.Pc,local:ht.xb,society:ht.vc,shopping:ht.sc,passions:ht.Qb,savedstories:ht.kc,hiddenpublishers:ht.eb,informationcards:ht.mb,globewestlegacy:ht.Z,soccerball:ht.uc,suitcase:ht.Ac,entertainmentlogolegacy:ht.I,readStories:ht.cc,discover:ht.B,notificationBell:ht.Hb,notificationGeneral:ht.Kb,notificationNews:ht.Lb,notificationSports:ht.Mb,notificationFinance:ht.Jb,notificationCommunity:ht.Ib,weather:ht.Uc,finance:ht.Q,traffic:ht.Kc,qna:ht.ac,reactions:ht.bc,comments:ht.y,feedsettings:ht.O},Ct={behavior:E.b.Show};function jt(e,t,i,n,a){const{localizedStrings:r,stickyHeaderHeightPx:s}=e;let o;switch(a){case"Setting":o=function(e,t,i){const{root:n,Market:a}=ft.a.settingsSectionIds,{heading:r}=e.localizedStrings.settings,{marketSettingsHeading:s}=e.localizedStrings,o=Ft({name:K,type:E.e.Module},t,i),c=Ft({name:G,type:E.e.Module},o,i),d=Ft({name:J,type:E.e.Module},o,i),l=Ft({name:se,type:E.e.Module},o,i),u=[{id:n,display:r,glyphStart:ht.mb,childItems:Dt(e.settingCards,e.localizedStrings.settings,ft.a.SettingsOrder,ft.a.settingsSectionIds,c,i),telemetryTag:c.getMetadataTag()}];e.feedSettingCards&&u.unshift({id:ft.a.feedSettingsSectionIds.root,display:e.localizedStrings.feedSettings&&e.localizedStrings.feedSettings.heading,glyphStart:ht.O,childItems:Dt(e.feedSettingCards,e.localizedStrings.feedSettings,ft.a.FeedSettingsOrder,ft.a.feedSettingsSectionIds,d,i),telemetryTag:d.getMetadataTag()});Object(v.b)().IsCnDomain||u.unshift({id:a,display:s||"Language & content",glyphStart:ht.zb,telemetryTag:l.getMetadataTag()});return{navItems:u,telemetryTag:o.getMetadataTag()}}(e,i,n);break;case"Notification":o=It.call(this,e,i,n);break;case"MyInterests":o=kt.call(this,e,t,i,n,a),o.navItems=o.navItems.filter(e=>e.id!==ft.a.sectionIds.notification);break;default:o=kt.call(this,e,t,i,n,a)}const c=function(e,t){const i=Ft({name:ae,type:E.e.ActionButton,behavior:E.b.Open},e,t).getMetadataTag(),n=Ft({name:re,type:E.e.ActionButton,behavior:E.b.Close},e,t).getMetadataTag();return{navigationMenuTelemetryTag:i,navigationMenuDismissTelemetryTag:n}}(i,n);return{sidePaneLayoutTitle:null==r?void 0:r.sideNavigationTitle,sidePaneTreeViewData:o,sidePaneMenuTelemetryTags:c,stickyHeaderHeightPx:s||ft.a.defaultStickyHeaderHeightPx}}function It(e,t,i){const n=[],a=Ft(Object.assign({name:K},Ct),t,i);return e.enableNotificationExperience&&n.push(xt(e,a,i,this.strings)),{navItems:n,telemetryTag:a.getMetadataTag()}}function xt(e,t,i,n,a){var r,s;const{notification:o}=ft.a.sectionIds,{enableNotificationExperience:c,notification:d}=e;if(!c)return null;const l=Ft(Object.assign({name:le},Ct),t,i);return{id:o,display:null===(s=null===(r=n)||void 0===r?void 0:r.notification)||void 0===s?void 0:s.cardName,glyphStart:Mt(wt.notificationBell),telemetryTag:Ft(Object.assign({name:le},Ct),t,i).getMetadataTag(),childItems:Pt(d,n.notification,l,i),showDivider:a}}function kt(e,t,i,n,a){var r,s;const{discoverInterests:o,mutedPublishers:c,savedStories:d,readStories:l,tuneFeed:u}=ft.a.sectionIds,{localizedStrings:h,enableMutedPublishersExperience:g,enableSavedStoriesExperience:p,enableReadStoriesExperience:m,enableSidePaneTreeView:b,enableFollowedPublishersExperience:f,enableNotificationExperience:v,enableSageHub:y,childExperienceReferencesWC:S}=e,{discoverTopicsListSectionTitle:O,mutedPublisherSectionHeader:T,savedStoriesSectionHeader:w,readStoriesSectionHeader:C,tuneFeedButtonTitle:j}=h||{},I=Ft(Object.assign({name:K},Ct),i,n),x=Ft(Object.assign({name:L},Ct),I,n),k={id:ft.a.sectionIds.followedInterests,display:null==h?void 0:h.followedTopicsListSectionTitle,glyphStart:Mt(wt.myinterests),telemetryTag:Ft(Object.assign({name:R},Ct),I,n).getMetadataTag()},P={id:o,display:O,glyphStart:Mt(wt.discover),childItems:Et(e,t,x,n),telemetryTag:x.getMetadataTag()};let D=[];return b?(k.showDivider=!0,D=[P,k]):D=[k].concat(P.childItems),f&&D.push({id:ft.a.sectionIds.followedPublishers,display:null==h?void 0:h.followedPublishersSectionTitle,glyphStart:Mt(wt.news),telemetryTag:Ft(Object.assign({name:V},Ct),I,n).getMetadataTag()}),"Personalize"===a&&(p&&D.push({id:d,display:w,glyphStart:Mt(wt.savedstories),showDivider:!0,telemetryTag:Ft(Object.assign({name:N},Ct),I,n).getMetadataTag()}),m&&D.push({id:l,display:C,glyphStart:Mt(wt.readStories),telemetryTag:Ft(Object.assign({name:$},Ct),I,n).getMetadataTag()}),e.feedSettingCards&&D.push({id:ft.a.feedSettingsSectionIds.root,display:null===(r=e.localizedStrings)||void 0===r?void 0:r.feedSettings.heading,glyphStart:ht.O,telemetryTag:Ft(Object.assign({name:J},Ct),I,n).getMetadataTag()}),D.push({id:ft.a.settingsSectionIds.root,display:null===(s=e.localizedStrings)||void 0===s?void 0:s.settings.heading,glyphStart:ht.mb,telemetryTag:Ft(Object.assign({name:G},Ct),I,n).getMetadataTag()})),g&&D.push({id:c,display:T,glyphStart:Mt(wt.hiddenpublishers),showDivider:"Personalize"!==a,telemetryTag:Ft(Object.assign({name:_},Ct),I,n).getMetadataTag()}),y&&(null==S?void 0:S.coldStartModal)&&D.push({id:u,display:j,glyphStart:Mt(wt.arrowsort),glyphEnd:Mt(wt.open),telemetryTag:Ft({name:te,behavior:E.b.Open,type:E.e.FRE,content:{headline:j}},I,n).getMetadataTag()}),v&&D.push(xt(e,I,n,this.strings,!0)),{navItems:D,telemetryTag:I.getMetadataTag()}}function Pt(e,t,i,n){var a,r;const s=[{id:qe.c.AllNotifications,display:null===(r=null===(a=null==t?void 0:t.topics)||void 0===a?void 0:a.General)||void 0===r?void 0:r.menuName,glyphStart:Mt(wt.notificationGeneral),telemetryTag:Ft(Object.assign({name:qe.c.AllNotifications},Ct),i,n).getMetadataTag()}];return(null==e?void 0:e.children)&&e.children.forEach(e=>{var a;s.push({id:e.type,display:(null===(a=t.topics[e.name])||void 0===a?void 0:a.topicName)||"",glyphStart:Mt(wt["notification"+e.name]),telemetryTag:Ft(Object.assign({name:e.type},Ct),i,n).getMetadataTag()})}),s}function Et(e,t,i,n){const{iconsMapping:a}=e,{topicListIds:r,topicListMap:s}=t,o=[];if(!r)return o;const c=r.map(e=>{const t=s[e],r=Ft(Object.assign({name:t.title},Ct),i,n).getMetadataTag();return{display:t.title,id:e,glyphStart:Mt(wt[a[t.title]]),telemetryTag:r}});return o.concat(c)}function Dt(e,t,i,n,a,r){const s=[];return i.forEach(i=>{if(e&&e[i]){const e=n[i],o=Ft({name:e,type:E.e.Module},a,r).getMetadataTag();s.push({display:At(t,i),id:e,glyphStart:Mt(wt[i.toLowerCase()]),telemetryTag:o})}}),s}function At(e,t){return e&&e.settingCardDict&&e.settingCardDict[t]&&e.settingCardDict[t].cardName}function Mt(e){return e||""}function Ft(e,t,i){const n=`${t.contract.name}-${e.name}`;return i[n]||(i[n]=t.addOrUpdateChild(e)),i[n]}var Rt=i("d0Z1"),Lt=i("8X6I");let Ut=null;class Nt extends vt.a{constructor(){super(),this.subscriptions=[],this.viewportChangeHandler=e=>{this.useStickyHeaderHeightSmallScreen=this.config.stickyHeaderSmallScreenHeightPx&&(e===n.c1||e===n.c2)},this.handleClick=e=>{var t;if(!this.marketSelectorRef||!(null===(t=this.marketSelectorRef)||void 0===t?void 0:t.select.open))return;const i=e.path.some(e=>e instanceof Node&&this.marketSelectorRef.shadowRoot.contains(e));!this.marketSelectorRef.select.open||i||(this.marketSelectorRef.select.open=!1)},this.mapInterestsData=async()=>{var e;const t=(null===(e=this.context)||void 0===e?void 0:e.pageType)||"Personalize",{interestsRiverData:i,sidePaneLayoutData:n}=this.mapPersonalizeData(t);if(this.interestsData={interestsRiverData:i,interestsPageType:t,sidePaneLayoutData:n,rootTelemetryObject:Object(gt.a)(this.interestsTelemetryObject)?null:this.interestsTelemetryObject,trackAppErrorEvent:this.onAppError,postCardActionStatus:this.postCardActionStatus,resetNonTopicFetchingStatesCallback:this.resetNonTopicFetchingStatesCallback,getScrollToSection:this.sectionScrollTo&&this.getScrollToSection,updateSegmentCardsEnabledStatus:this.updateSegmentCardsEnabledStatusData,updateFeedSettingsOptOutStatus:this.updateFeedSettingsOptOutStatusData,getPdpUserPreference:this.getPdpUserPreference,searchData:this.getSearchData()},this.triggerTtvrMarker(t),this.interestsNextState=Object.assign(Object.assign({},this.interestsNextState),{settings:this.interestsData.interestsRiverData.settings}),this.setInterestsRiverBottomPadding(),this.interestsData&&!1===this.navTreeFocus){await Object(o.a)();const e=this.shadowRoot.querySelector("fluent-tree-item");e&&(e.focus(),this.navTreeFocus=!0)}},this.triggerTtvrMarker=e=>{var t,i,n,a,r,s;const{interestsRiverData:o}=this.interestsData;if(!this.ttvrFired&&o){let c=!1;switch(e){case"MyInterests":c=!(!(null===(i=null===(t=o.discoverSectionData)||void 0===t?void 0:t.topicSections)||void 0===i?void 0:i.length)&&!(null===(a=null===(n=o.followedInterestsSectionData)||void 0===n?void 0:n.followedTopics)||void 0===a?void 0:a.length));break;case"MySaves":c=!!o.savedStoriesSectionData;break;case"History":c=!!o.readStoriesSectionData;break;case"Setting":c=!!(null===(s=null===(r=o.settings)||void 0===r?void 0:r.cards)||void 0===s?void 0:s.length);break;case"Notification":c=!!o.notification;break;default:return void(this.ttvrFired=!0)}c&&(this.setVisuallyReadyMarkers(),this.ttvrFired=!0)}},this.setVisuallyReadyMarkers=()=>{window.requestAnimationFrame(async()=>{Object(be.m)(x.a.interestsWC),d.b.has(d.a.AboveTheFoldVisuallyReady)||d.b.set(d.a.AboveTheFoldVisuallyReady,x.a.interestsWC);const e=await Object(yt.a)(k.a.MilestoneData);e&&He.a.updateVisuallyReadyTiming.getActionSender(e).send(Object(Be.c)(x.a.interestsWC,void 0,void 0,void 0,window.performance.now()))})},this.sidePaneSticky=!1,this.searchBoxSticky=!1,this.useStickyHeaderHeightSmallScreen=!1,this.notificationSettingMap={},this.discoverSectionsToRender=1,this.sectionIds=new Set,this.renderedDiscoverSections=0,this.needToScroll=!1,this.scrollDebounceTimerMs=50,this.navTreeFocus=!1,this.expandedTreeItems={[ft.a.sectionIds.discoverInterests]:!0,[ft.a.settingsSectionIds.root]:!0,[ft.a.feedSettingsSectionIds.root]:!0,[ft.a.sectionIds.notification]:!0},this.interestsRiverTelemetryObjects={},this.sidePaneLayoutTelemetryObjects={},this.cardActionRef={ref:void 0},this.mutedPublishersChanged=()=>{this.mapInterestsData()},this.followedPublishersChanged=()=>{this.mapInterestsData()},this.savedStoriesChanged=()=>{this.mapInterestsData()},this.readStoriesChanged=()=>{this.mapInterestsData()},this.suggestionsChanged=()=>{this.mapInterestsData()},this.notificationSettingMapChanged=()=>{this.mapInterestsData()},this.onMenuClick=e=>{if(!e.target)return;const t=e.target,i=t.id;Ce.a.focusItem(t),this.changeSelectedTreeItem(i),i.indexOf(ft.a.sectionIds.tuneFeed)>=0?this.startColdStartExperience():this.scrollToSection(i),this.sidePaneLayoutContainerRef&&this.sidePaneLayoutContainerRef.clientWidth<=ft.a.sidePaneLayoutResponsiveWidth&&(this.interestsNextState=Object.assign(Object.assign({},this.interestsNextState),{sidePaneVisible:!1}))},this.startColdStartExperience=()=>{try{Object(Ke.a)().getFreArtifacts().then(e=>{e&&e.subCards&&e.subCards.length&&e.stage?(this.freArtifact=e,this.renderColdStart=!0):Object(fe.b)(ve.Ih,"FRE request was made but returned insufficent data to render ColdStart")})}catch(e){Object(fe.c)(e,ve.ye,"Getting data for the required artifacts failed in interests wc when initializing cold start experience")}},this.coldStartConfirmHandler=()=>{if(this.renderColdStart=!1,this.config.freGoBackToFeed)if(l.a.getRouteById("myfeed"))l.a.navigate("myfeed");else{const e=new URL(window.location.href);e.pathname=`/${Object(v.b)().CurrentMarket}/feed/`,window.history.pushState({shouldPush:!0},"",e.toString())}},this.closeColdStart=async()=>{this.renderColdStart=!1,this.freArtifact=null,await this.fetchFollowedPublishers(),await this.fetchTopicsAndUserInterests(),this.mapInterestsData()},this.onExpandedChange=e=>{if(!e.target)return;const t=e.target;this.expandedTreeItems[t.id.replace("menuItem-","")]=t.expanded},this.sidePaneAndSearchBoxScrollHandler=()=>{var e,t,i,n;const a=Math.max(document.documentElement.scrollTop,document.body.scrollTop),r=this.topStickyBreakpoint>=0&&a>this.topStickyBreakpoint,s=this.config.enableStickySearch&&this.topStickyBreakpoint>=0&&a>this.topStickyBreakpoint+ft.a.searchBoxHalfHeight;if(this.sidePaneSticky!==r&&(this.sidePaneSticky=r),this.searchBoxSticky!==s&&(this.searchBoxSticky=s),this.ignoreNextScrollEvent)return void(this.ignoreNextScrollEvent=!1);const o=this.getHeaderBottom();for(const a of this.sectionIds){let r=this.shadowRoot.getElementById(Re.a.removeHyphens(a));if(a===ft.a.sectionIds.discoverInterests&&(r=(null===(e=this.interestsData.searchData)||void 0===e?void 0:e.enableSearch)?this.searchBoxRef:null===(n=null===(i=null===(t=null==r?void 0:r.shadowRoot)||void 0===t?void 0:t.firstElementChild)||void 0===i?void 0:i.shadowRoot)||void 0===n?void 0:n.firstElementChild),a===ft.a.sectionIds.notification&&(r=null==r?void 0:r.firstElementChild),r&&this.isSectionVisible(r,o))return void this.changeSelectedTreeItem("menuItem-"+a)}},this.sidePaneExpandedHandler=e=>{if(!e.target)return;const t=e.target;this.interestsNextState=Object.assign(Object.assign({},this.interestsNextState),{sidePaneVisible:null==t?void 0:t.paneVisible})},this.openCardActions=(e,t,i,n)=>{const a=n,s=this.interestsNextState.cardActionStatusMap.get(e)||r.b.enabled,o={enabled:!0,buttonElement:a.currentTarget,cardStatus:s,article:t,onStatusChange:this.setCardActionState,isUserStoryCardAction:!0,parentTelemetryObject:i};this.cardActionRef.ref.updateCardActionProps(o)},this.onCardActionClick=(e,t,i)=>{const n=(this.interestsNextState.cardActionStatusMap.get(e)||r.b.enabled)^r.b.saved;Qe.a.sendActionEvent(i.currentTarget,E.a.Click),this.interestsData.postCardActionStatus(i,e,n,t),this.setCardActionState(e,n)},this.setCardActionState=(e,t)=>{const i=this.interestsNextState.cardActionStatusMap;if(i.set(e,t),this.interestsNextState=Object.assign(Object.assign({},this.interestsNextState),{cardActionStatusMap:i}),t&r.b.saved){const t=this.savedStories&&this.savedStories.filter(t=>t.id===e),i=this.readStories&&this.readStories.filter(t=>t.id===e);this.savedStories=t&&t.length||!i||!i.length?this.savedStories:this.savedStories.concat(i)}},this.onScroll=()=>{var e,t;"MySaves"!==(null===(e=this.interestsData)||void 0===e?void 0:e.interestsPageType)&&"History"!==(null===(t=this.interestsData)||void 0===t?void 0:t.interestsPageType)&&this.sidePaneAndSearchBoxScrollHandler()},this.updateSegmentCardsEnabledStatus=e=>{Qe.a.sendActionEvent(e,E.a.Click);const t=[],i=this.interestsNextState.settings;i.cards.forEach(i=>{const n=this.getCardEnabledSettingName(i.cardType);i.cardType===e.id&&(i.toggleChecked=!i.toggleChecked),n&&t.push({cardType:n,enabled:i.toggleChecked})}),t.length>0&&this.interestsData.updateSegmentCardsEnabledStatus&&(async()=>{await this.interestsData.updateSegmentCardsEnabledStatus(t).then(e=>{e&&(this.interestsNextState=Object.assign(Object.assign({},this.interestsNextState),{settings:i}),Object(u.b)())})})()},this.updateFeedSettingsOptOutStatus=e=>{Qe.a.sendActionEvent(e,E.a.Click);const t=[],i=this.interestsNextState.settings.feedSettings;i.cards.forEach(i=>{const n=this.getOptOutFeedSettingName(i.cardType);i.cardType===e.id&&(i.toggleChecked=!i.toggleChecked),n&&t.push({settingType:n,optedOut:!i.toggleChecked})}),t.length>0&&this.interestsData.updateFeedSettingsOptOutStatus&&(async()=>{await this.interestsData.updateFeedSettingsOptOutStatus(t).then(e=>{e&&(this.interestsNextState=Object.assign(Object.assign({},this.interestsNextState),{settings:Object.assign(Object.assign({},this.interestsNextState.settings),{feedSettings:i})}),Object(u.b)())})})()},this.updateNotificationSetting=e=>{const t=e.id,i=e.checked;this.notificationSettingMap=Object.assign({},this.notificationSettingMap,{[t]:i}),e.dirtyChecked=!1,(async()=>{await this.notificationServiceClient.updateNotificationSetting({[t]:i})})()},this.getCardEnabledSettingName=e=>e?e.toLowerCase()+"CardEnabled":"",this.getOptOutFeedSettingName=e=>e?e.toLowerCase()+"OptOut":"",this.unmuteDialogToggleCallback=(e,t)=>{this.interestsNextState=Object.assign(Object.assign({},this.interestsNextState),{publisherOnDialog:t}),document.addEventListener("keydown",this.onTabKeydown),this.calcUnmutedPublishersCardFocus(e,t)},this.onTabKeydown=e=>{"Tab"===e.key&&(e.shiftKey?this.shadowRoot.activeElement&&"actionDialogCloseButton"===this.shadowRoot.activeElement.id&&(e.preventDefault(),this.shadowRoot.getElementById("actionDialogCancelButton").focus()):this.shadowRoot.activeElement&&"actionDialogCancelButton"===this.shadowRoot.activeElement.id&&(e.preventDefault(),this.shadowRoot.getElementById("actionDialogCloseButton").focus()))},this.followPublisherCallback=async(e,t)=>{const{followedPublishersSectionData:i}=this.interestsData.interestsRiverData,{sectionId:n,publisherCards:a}=i,r=e.target,{followed:s,topicId:o,topicTitle:c}=r||{};Qe.a.sendActionEvent(e.currentTarget,E.a.Click);const d=null==a?void 0:a.findIndex(e=>e.publisherId===o),l=d>-1&&a[d];l?l.followed=s:t&&s&&a.push({publisherId:o,publisherTitle:c,followed:s,actionButtonAriaLabel:null,actionButtonCallback:null,actionButtonTelemetryTag:null,actionButtonText:null,actionDateLabel:null,imgSrc:r.imgSrc,imgAltText:c}),this.followedPublishers=a;let u=!0;try{await this.publisherServiceClient.publisherUserAction(o,_e.a.More,s?"POST":"DELETE"),Object(We.a)(Ve.a.InterestsChange)}catch(e){const t=`Error: ${e&&e.message}, Publisher Id: ${o}, Publisher Name: ${c}`;this.onAppError(s?Object.assign(Object.assign({},ve.Zf),{message:"Failed following publisher",pb:Object.assign(Object.assign({},ve.Zf.pb),{customMessage:t})}):Object.assign(Object.assign({},ve.ag),{message:"Failed unfollowing publisher",pb:Object.assign(Object.assign({},ve.ag.pb),{customMessage:t})})),u=!1}this.requestInterestToast(o,c,s,u),u||this.restoreTopicCardFollowState(n+"-topic",o,!s)},this.followedClickedHandler=async(e,t,i)=>{var n;const a=e.target,{topicId:r,topicTitle:s}=a||{},{enableSageHub:o}=this.config,{topicMap:c}=this.topicsDataConnector.getCurrentState(),d=c[r],l=Object.keys(c).some(e=>c[e].followState===ye.a.Followed);let u,h;l||(u=await this.topicsDataConnector.getOneServiceFollowedTopics());try{let e;e=i?o&&(null==d?void 0:d.isInferred)?await this.topicsDataConnector.followTopic(r,s,!0):await this.topicsDataConnector.followTopic(r,s):await this.topicsDataConnector.unfollowTopic(r),this.requestInterestToast(r,s,i,e),l||(delete u[r],this.restoreDefaultFollowedTopics(Object.keys(u))),h=e}catch(e){this.onAppError(i?ve.He.InterestsFollowTopicError:ve.He.InterestsUnfollowTopicError),h=!1}if(h){this.updateRepeatedTopicCardInstances(r,i);let e=null===(n=this.followedTopics)||void 0===n?void 0:n.find(e=>e.id===r),t=this.topicDataState.topicMap[r];if(!t&&s){const e=Object.entries(this.topicDataState.topicMap).find(e=>e[1].name===s);t=e&&e.length>1&&e[1]}r||e||(e=this.followedTopics.find(e=>e.name===s),e&&(e.id=t.id)),e?e.followState=i?ye.a.Followed:ye.a.Unfollowed:i&&this.followedTopics.push(Object.assign(Object.assign({},t),{followState:i?ye.a.Followed:ye.a.Unfollowed}))}else this.restoreTopicCardFollowState(t,r,!i);this.mapInterestsData()},this.restoreFollowedInterestsButtonClickedHandler=async()=>{await this.topicsDataConnector.restoreDefaultTopics(),this.mapInterestsData()},this.topicSelectedHandler=e=>{const t=e.target,{topicId:i}=t||{};this.loadXFeedCallback(i)},this.loadXFeedCallback=e=>{var t,i,n;const a=this.topicsDataConnector.getCurrentState().topicMap[e],{xfeedConfigIndexHref:r,xfeedConfigIndexRef:s}=this.config;(r||s)&&Object(Ot.a)().switchPivot({pivotId:e,configIndexHref:r,configIndexRef:s,context:{feedId:e,overwriteBaseApiURL:null===(t=a.apiSource)||void 0===t?void 0:t.baseUrl,forceEnterpriseCompliance:(null===(i=a.apiSource)||void 0===i?void 0:i.id)===Se.a.work,apiSourceId:null===(n=a.apiSource)||void 0===n?void 0:n.id},telemetryPageName:"Xfeed",display:a.name,branding:a.branding})},this.onAppError=e=>Qe.a.sendAppErrorEvent(e),this.fetchTopicsAndUserInterests=async()=>{const{topicListIds:e,followedTopicIds:t,recommendedTopics:i}=this.topicDataState||{},{enableRecommendedTopics:n}=this.config;return!(!(null==e?void 0:e.length)&&!await this.topicsDataConnector.getTopics(ft.a.ImageSize.TopicCardImageStandardDimensions))&&(!(!t.length&&!await this.topicsDataConnector.getFollowedTopics())&&(n&&!i.length&&await this.topicsDataConnector.getRecommendedTopics(),this.topicsAndInterestsLoaded=!0,this.mapInterestsData(),!0))},this.fetchFollowedPublishers=async()=>{this.publisherServiceClient=this.publisherServiceClient||new _e.b(window.fetch.bind(window));try{const e=await this.publisherServiceClient.getUserFollowedPublishers();this.followedPublishers=e.map(e=>Object.assign(Object.assign({},this.mapPublisher(e)),{followed:!0}))}catch(e){this.onAppError(Object.assign(Object.assign({},ve.Ie),{message:"Failed fetching followed publishers"}))}},this.fetchMutedPublishers=async()=>{this.publisherServiceClient=this.publisherServiceClient||new _e.b(window.fetch.bind(window));try{const e=await this.publisherServiceClient.getUserMutedPublishers();this.mutedPublishersLoaded=!0,this.mutedPublishers!==e&&(this.mutedPublishers=e)}catch(e){this.onAppError(ve.He.InterestsRetrieveMutedPublishersError),this.mutedPublishersError=!0,this.mutedPublishersLoaded=!0,this.mutedPublishers=[]}},this.fetchSavedStories=async()=>{let e;this.userStoriesServiceClient=this.userStoriesServiceClient||new dt(this.config.cardProviderConfig);try{e=await this.userStoriesServiceClient.getUserStoriesFromFeed(rt.SavedContent,!0),this.savedStoriesLoaded=!0}catch(e){return this.onAppError(ve.He.InterestsRetrieveSavedStoriesError),!1}return this.savedStories=null==e?void 0:e.cardMetadata,!!(e&&e.cardMetadata&&e.cardMetadata.length)},this.fetchNotificationSetting=async()=>{const e=async()=>{var e;this.notificationServiceClient=this.notificationServiceClient||new qe.b;const t=await this.notificationServiceClient.getNotificationSetting();if(!t&&!t.featureLevelSettings)return void this.onAppError(Object.assign(Object.assign({},ve.if.WCSettingFetchError),{message:"Error while fetching notification settings, response data is null: "+JSON.stringify(t)}));const i={};for(const e in qe.c)i[e]=!0;for(const n in t.featureLevelSettings)i[n]=null===(e=t.featureLevelSettings[n])||void 0===e?void 0:e.isConsumptionAllowed;this.notificationSettingMap=i};e(),Ut=Ut||e},this.fetchReadStories=async()=>{let e;this.userStoriesServiceClient=this.userStoriesServiceClient||new dt(this.config.cardProviderConfig);try{e=await this.userStoriesServiceClient.getUserStoriesFromFeed(rt.ReadHistory,!0),this.readStoriesLoaded=!0}catch(e){return this.onAppError(ve.He.InterestsRetrieveReadStoriesError),!1}return this.readStories=null==e?void 0:e.cardMetadata,!!(e&&e.cardMetadata&&e.cardMetadata.length)},this.mapSettingCardsData=()=>{var e;const{localizedStrings:t}=this.config;return{heading:(null===(e=null==t?void 0:t.settings)||void 0===e?void 0:e.heading)||"",cards:this.settingCards||this.initializeSettingCards(),sectionId:Re.a.removeHyphens(ft.a.settingsSectionIds.root),emptyListMessage:this.settingLoaded?null==t?void 0:t.informationCardEmptyListMessage:null==t?void 0:t.sectionLoadingMessage,feedSettings:this.mapFeedSettingCardsData()}},this.mapFeedSettingCardsData=()=>{if(!this.config.feedSettingCards)return;return{heading:this.strings.feedSettings&&this.strings.feedSettings.heading||"",cards:this.feedSettingCards||this.initializeFeedSettingCards(),sectionId:Re.a.removeHyphens(ft.a.feedSettingsSectionIds.root),emptyListMessage:this.settingLoaded?this.strings.feedSettingsEmptyListMessage:this.strings.sectionLoadingMessage}},this.fetchUserPreferences=async()=>{const e=this.initializeSettingCards(),t=this.initializeFeedSettingCards(),i=await this.getPdpUserPreference(),n=i.segmentCardSettings,a=i.communitySettings;this.settingLoaded=!0,n&&(e.forEach(e=>{const t=this.getCardEnabledSettingName(e.cardType);if(t&&Object.prototype.hasOwnProperty.call(n,t)){const i=n[t];e.toggleChecked="1"===i}}),this.settingCards=e),a&&(t.forEach(e=>{const t=this.getOptOutFeedSettingName(e.cardType);if(t&&Object.prototype.hasOwnProperty.call(a,t)){const i=a[t];e.toggleChecked="0"===i}}),this.feedSettingCards=t),this.mapInterestsData()},this.initializeSettingCards=()=>this.initializeSettingCardsForSection(this.config.settingCards,this.strings.settings,ft.a.SettingsOrder,ft.a.settingsSectionIds),this.initializeFeedSettingCards=()=>this.initializeSettingCardsForSection(this.config.feedSettingCards,this.strings.feedSettings,ft.a.FeedSettingsOrder,ft.a.feedSettingsSectionIds),this.initializeSettingCardsForSection=(e,t,i,n)=>{const a=[];if(e&&t){const{settingCardDict:r={}}=t;i.forEach(t=>{e[t]&&a.push(Object.assign(Object.assign({},r[t]),{id:Re.a.removeHyphens(n[t]),cardType:t,toggleChecked:!0}))})}return a},this.updateDiscoverSectionsToRender=()=>{var e,t;const i=null===(t=null===(e=this.interestsData.interestsRiverData.discoverSectionData)||void 0===e?void 0:e.topicSections)||void 0===t?void 0:t.length;if(!i||i===this.renderedDiscoverSections||!this.lastRenderedDiscoverSectionId)return void this.handleInitialScroll();const n=this.shadowRoot.getElementById(this.lastRenderedDiscoverSectionId),{bottom:a}=n.getBoundingClientRect();a>(window.innerHeight||document.documentElement.clientHeight)?this.discoverSectionsToRender=i:this.discoverSectionsToRender=this.discoverSectionsToRender+1},this.unmutePublisherClickHandler=async e=>{try{return await this.publisherServiceClient.publisherUserAction(e,_e.a.Mute,"DELETE"),this.mutedPublishers=this.mutedPublishers.filter(t=>t.id!==e),!0}catch(e){return this.onAppError(ve.He.InterestsUnMutePublisherError),!1}},this.onInputChange=async e=>{var t,i,n,a;this.interestsSearchServiceClient=this.interestsSearchServiceClient||new Oe.a(window.fetch.bind(window),this.onAppError);let r=(null===(t=null==e?void 0:e.target)||void 0===t?void 0:t.value)||(null===(a=null===(n=null===(i=null==e?void 0:e.detail)||void 0===i?void 0:i.event)||void 0===n?void 0:n.target)||void 0===a?void 0:a.value);if(r=r&&r.replace(/[[@^_=;\]&/\\#,+()$~%.'":*?!<>{}]/g," ").trim(),!r)return void(this.suggestions=[]);const s=await this.interestsSearchServiceClient.getSuggestedInterests(encodeURIComponent(r),ft.a.maxNumberOfResults,this.config.searchSuggestionSourceType)||[];(null==s?void 0:s.some(e=>e.displayText.toLowerCase()===r.trim().toLowerCase()))||s.unshift({displayText:r,name:r,type:Te.a.UserQuery});const o=s.slice(0,ft.a.maxNumberOfResults).map(e=>this.mapSuggestionItemToTopicListboxData(e));this.suggestions=o},this.postCardActionStatus=(e,t,i,n)=>{Object(s.a)().PostCardActionEvent(i,n,t,void 0,null,null,!0,null==e?void 0:e.target)},this.resetNonTopicFetchingStatesCallback=()=>{this.mutedPublishersLoaded=!1,this.readStoriesLoaded=!1,this.savedStoriesLoaded=!1,this.settingLoaded=!1},this.getScrollToSection=()=>{const{savedStories:e,mutedPublishers:t}=ft.a.sectionIds;if(this.sectionScrollTo===t){if(this.mutedPublishersLoaded)return this.sectionScrollTo=void 0,t}else if(this.sectionScrollTo===e&&this.savedStoriesLoaded)return this.sectionScrollTo=void 0,e;return null},this.updateSegmentCardsEnabledStatusData=async e=>{let t=!1;try{t=await I.a.updateSegmentCardsEnableStatus(e)}catch(e){Object(fe.c)(e,ve.kc,"User settings update failed"),t=!1}return t},this.updateFeedSettingsOptOutStatusData=async e=>{let t=!1;try{t=await I.a.updateCommunitySettingsOptOutStatus(e)}catch(e){Object(fe.c)(e,ve.jc,"User settings update failed"),t=!1}return t},this.getPdpUserPreference=async()=>{var e;const t=await I.a.getPdpUserPreference(),i={};if((null===(e=null==t?void 0:t.value)||void 0===e?void 0:e.length)>0){try{i.segmentCardSettings=JSON.parse(t.value[0].segmentCardSettings)}catch(e){this.onAppError(Object.assign(Object.assign({},ve.Eg),{message:"Invalid JSON format for segmentCard settings",pb:Object.assign(Object.assign({},ve.Eg),{customMessage:`Error: ${JSON.stringify(e)}. User settings: ${t.value[0].segmentCardSettings}`})}))}i.communitySettings=t.value[0].communitySettings}return i},this.marketUpdatedCallback=e=>{I.a.updateMarketPreference(e).then(()=>{Object(h.a)("ntps",void 0,-1),Object(h.a)("ntps",JSON.stringify({m:e}),182,v.a.HostPage.topDomain,"/"),Promise.all([Object(u.a)(),Object(we.a)()]).then(()=>{l.a.updateMarket(e)})})},this.getBackgroundColor=()=>this.isDarkMode?c.a:c.c,this.backgroundColorChangeHandler=()=>{this.isDarkMode=Object(c.e)(),this.backgroundColors={pageBackground:this.getBackgroundColor(),coldStartBackground:"--cold-start-background: "+(this.isDarkMode?Tt.b.DarkMode:Tt.b.LightMode)}},this.getSportsSettings=async()=>{Ge.a.getDislikeSportsEntities(e=>{this.sportsDislikes=e,this.interestsNextState=Object.assign(Object.assign({},this.interestsNextState),{settings:this.interestsNextState.settings})})},C()}experienceConnected(){var e,t,i;["en-us","en-gb","en-ca"].includes(Le.b.Locale)||Le.b.CurrentFlights.includes("prg-wpo-ntr")||(this.config.enableNotificationExperience=!1);try{if(this.interestsNextState={cardActionStatusMap:new Map,publisherOnDialog:null,settings:null!==(i=null===(t=null===(e=this.interestsData)||void 0===e?void 0:e.interestsRiverData)||void 0===t?void 0:t.settings)&&void 0!==i?i:null,sidePaneVisible:!0},this.context)switch(this.context.pageType){case"MyInterests":this.dataInitializer=new Ie("MyInterests");break;case"MySaves":this.dataInitializer=new xe;break;case"History":this.dataInitializer=new ke;break;case"Setting":this.dataInitializer=new Pe;break;case"Notification":this.dataInitializer=new Ee;break;default:this.dataInitializer=new Ie}else this.dataInitializer=new Ie;this.loadAndSubscribeInterestsDataConnector(),this.toast=this.config.childExperienceReferencesWC[String("toastWC")],this.scrollHandler=Object(pt.a)(this.onScroll,this.scrollDebounceTimerMs),this.config.useFluentDesignSystem?this.backgroundColorChangeHandler():Object(Rt.c)(k.a.ChromiumPageSettings,()=>{this.isDarkMode=Object(c.e)()})}catch(e){this.onAppError(Object.assign(Object.assign({},ve.He.UndefinedTopicDataConnector),{message:"Uncaught error occurred in InterestsWC"+e}))}Object(Ue.b)("navBar",e=>{this.onTranslucentBackgroundClass="translucentBackground"===e?"translucentBackground":""}),this.getSportsSettings()}shadowDomPopulated(){var e,t,i,n;this.subscriptions.push(d.b.subscribe(d.a.ColumnArrangement,this.viewportChangeHandler));const a=d.b.get(d.a.ColumnArrangement);this.viewportChangeHandler(a),Object(bt.c)(e=>{this.topStickyBreakpoint=e}),this.topStickyBreakpoint=bt.e||0;const{sectionIds:{mutedPublishers:r},publishersHash:s}=ft.a;this.needToScroll=!!((null===(e=this.context)||void 0===e?void 0:e.isRequestFromSdCardAddRemoveClick)||(null===(t=this.context)||void 0===t?void 0:t.isRequestFromSavedStoryToast)||(null===(i=this.context)||void 0===i?void 0:i.isRequestFromMutePublisherToast)||0===Object(St.f)().indexOf(s)||0===Object(St.f)().indexOf("#"+r)||(null===(n=this.context)||void 0===n?void 0:n.isRequestForReadingHistory)),addEventListener("scroll",this.scrollHandler),addEventListener("resize",this.scrollHandler),addEventListener("mouseup",this.handleClick),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",this.backgroundColorChangeHandler)}disconnectedCallback(){this.subscriptions.forEach(e=>e.unsubscribe()),removeEventListener("scroll",this.scrollHandler),removeEventListener("resize",this.scrollHandler),removeEventListener("mouseup",this.handleClick),window.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",this.backgroundColorChangeHandler)}getExperienceType(){return x.a.interestsWC}async loadAndSubscribeInterestsDataConnector(){this.topicsDataConnector=await Object(yt.a)(k.a.TopicData),this.topicsDataConnector||this.onAppError(Object.assign(Object.assign({},ve.He.UndefinedTopicDataConnector),{message:"Topic Data Connector is not defined."})),this.interestsTelemetryObject=new D.a({name:F,type:E.e.Module}),this.interestsTelemetry=new ue(this.interestsTelemetryObject),Object(Rt.c)(k.a.TopicData,e=>{this.topicDataState=e}),await this.dataInitializer.initializeData(this)}mapPersonalizeData(e){const{enableMutedPublishersExperience:t,enableSavedStoriesExperience:i,enableReadStoriesExperience:n,enableFollowedPublishersExperience:a,enableSageHub:r,enableNotificationExperience:s}=this.config;let o,c;const d=jt.bind(this);switch(e){case"MyInterests":o={followedInterestsSectionData:this.mapFollowedInterestsProps(this.topicDataState),followedPublishersSectionData:a&&this.mapFollowedPublisherCardProps(),discoverSectionData:this.mapDiscoverInterestsProps(this.topicDataState),mutedPublisherSectionData:t&&this.mapMutedPublisherCardProps(),enableSageHub:r},c=d(this.config,this.topicDataState,this.interestsTelemetryObject,this.sidePaneLayoutTelemetryObjects,e);break;case"History":o={readStoriesSectionData:n&&this.mapReadStoriesCardProps(),enableSageHub:r};break;case"MySaves":o={savedStoriesSectionData:i&&this.mapSavedStoriesCardProps(),enableSageHub:r};break;case"Setting":o={settings:Object.assign(Object.assign({},this.mapSettingCardsData()),{marketSettings:{sectionId:Re.a.removeHyphens(ft.a.settingsSectionIds.Market),heading:this.config.localizedStrings.marketSettingsHeading,description:this.config.localizedStrings.marketSettingsDescription}}),enableSageHub:r},c=d(this.config,this.topicDataState,this.interestsTelemetryObject,this.sidePaneLayoutTelemetryObjects,e);break;case"Notification":o={notification:s},c=d(this.config,this.topicDataState,this.interestsTelemetryObject,this.sidePaneLayoutTelemetryObjects,e);break;default:o={followedInterestsSectionData:this.mapFollowedInterestsProps(this.topicDataState),followedPublishersSectionData:a&&this.mapFollowedPublisherCardProps(),discoverSectionData:this.mapDiscoverInterestsProps(this.topicDataState),mutedPublisherSectionData:t&&this.mapMutedPublisherCardProps(),savedStoriesSectionData:i&&this.mapSavedStoriesCardProps(),readStoriesSectionData:n&&this.mapReadStoriesCardProps(),settings:this.mapSettingCardsData(),notification:s,enableSageHub:r},c=d(this.config,this.topicDataState,this.interestsTelemetryObject,this.sidePaneLayoutTelemetryObjects,e)}return{interestsRiverData:o,sidePaneLayoutData:c}}get sidePaneLayoutStyle(){if(!this.interestsData)return null;let e="--side-pane-min-width: "+ft.a.sidePaneWidth;return this.isDarkMode&&(e+="; --discover-interests-header-background: radial-gradient(100% 194% at 100% 0%, #2B3033 0%, #2B2E33 16%, #332B30 32%, #33292F 50%, #332B30 64%, #2B2C33 82%, #2D3238 100%, #2B2F33 100%)"),this.sidePaneSticky&&(e+=`; --navigation-pane-wrapper-sticky-top: ${this.getHeaderBottom()}px`),this.backgroundColors&&(e+="; --search-background:"+(this.isDarkMode?Object(je.a)({backgroundColor:this.backgroundColors.pageBackground}):c.f)),e}get sidePaneHeaderElement(){return this.interestsNextState.sidePaneVisible?ht.v:ht.ub}get sidePaneMenuElement(){if(!this.interestsData)return null;const{sidePaneLayoutData:e,interestsRiverData:t,getScrollToSection:i,interestsPageType:n}=this.interestsData;if(!e||!e.sidePaneTreeViewData||!e.sidePaneTreeViewData.navItems)return null;this.selectedNavId||(this.selectedNavId=i?i(t):ft.a.defaultSelectedSection[n]);const a=`width: ${ft.a.sidePaneWidth}; overflow-y: auto; max-height: calc(100vh - ${this.getHeaderBottom()}px - 21px)`,r=e.sidePaneTreeViewData.navItems.map(e=>this.getMenuItem(e));return{styles:a,selectedChange:this.onMenuClick,expandedChange:this.onExpandedChange,interestMenuItem:null,menuItems:r,telemetryTag:e.sidePaneTreeViewData.telemetryTag,enableSidePaneTreeView:this.config.enableSidePaneTreeView}}getMenuItem(e){let t,i;(this.config.enableSearch||e.id!==ft.a.sectionIds.discoverInterests)&&this.sectionIds.add(e.id),e.childItems&&(t=e.childItems.map(e=>this.getMenuItem(e)),i=this.expandedTreeItems[e.id]);const n={selected:this.selectedNavId===e.id,"aria-current":this.selectedNavId===e.id};return{id:"menuItem-"+e.id,selected:n.selected,expanded:i,display:e.display,glyphStart:e.glyphStart,glyphEnd:e.glyphEnd,menuItems:t,telemetryTag:e.telemetryTag,showDivider:e.showDivider,nestedClass:this.config.enableSidePaneTreeView}}handleInitialScroll(){var e,t,i,n,a,r,s,o;let c;const{settingsSectionIds:d,sectionIds:{savedStories:l,mutedPublishers:u,readStories:h,notification:g,followedInterests:p},publishersHash:m}=ft.a;(null===(e=this.context)||void 0===e?void 0:e.isRequestFromSdCardAddRemoveClick)?c=d.root:(null===(t=this.context)||void 0===t?void 0:t.isRequestFromSavedStoryToast)?c=l:(null===(i=this.context)||void 0===i?void 0:i.isRequestFromMutePublisherToast)||0===Object(St.f)().indexOf(m)||0===Object(St.f)().indexOf("#"+u)?c=u:(null===(n=this.context)||void 0===n?void 0:n.isRequestForReadingHistory)?c=h:(null===(a=this.context)||void 0===a?void 0:a.scrollToSection)?c=null===(r=this.context)||void 0===r?void 0:r.scrollToSection:(null===(s=this.context)||void 0===s?void 0:s.scrollToNotification)?c=g:(null===(o=this.context)||void 0===o?void 0:o.scrollToFollowedInterests)&&(c=p),this.shadowRoot.getElementById(Re.a.removeHyphens(c))&&(this.changeSelectedTreeItem("menuItem-"+c),this.scrollToSection(c)),this.needToScroll=!1}scrollToSection(e){let t=0;if(e!=="menuItem-"+ft.a.sectionIds.discoverInterests){const i=e.replace("menuItem-",""),n=Re.a.removeHyphens(i),a=this.shadowRoot.getElementById(n),r=this.useStickyHeaderHeightSmallScreen?this.config.stickyHeaderSmallScreenHeightPx:this.config.stickyHeaderHeightPx;if(t=a.getBoundingClientRect().top+window.pageYOffset-r-ft.a.sectionVisibilityBufferPx,this.searchBoxRef&&this.config.enableStickySearch){const e=d.b.get(d.a.ColumnArrangement);this.useStickyHeaderHeightSmallScreen?t-=ft.a.stickySearchHeights[e]:t-=ft.a.stickySearchHeights.default}}this.ignoreNextScrollEvent=!0,window.scrollTo({left:0,top:t})}changeSelectedTreeItem(e){const t=this.shadowRoot.getElementById("menuItem-"+this.selectedNavId),i=this.shadowRoot.getElementById(e);t&&(t.selected=!1,t.ariaCurrent=!1),i&&(i.selected=!0,i.ariaCurrent=!0,this.selectedNavId=i.id.replace("menuItem-",""),i.parentElement.tagName===ft.a.treeItemTag&&(i.parentElement.expanded=!0)),this.sidePaneLayoutRef&&(this.sidePaneLayoutRef.currentSelected=i)}getHeaderBottom(){let e;e=this.useStickyHeaderHeightSmallScreen?this.config.stickyHeaderSmallScreenHeightPx:this.config.stickyHeaderHeightPx||ft.a.defaultStickyHeaderHeightPx;const t=document.getElementById("bnb");if(t){const i=t.getBoundingClientRect().bottom;e=Math.max(i,e)}return this.config.enableOneColumn&&d.b.get(d.a.ColumnArrangement)===n.c1&&(e=ft.a.oneColumnStickyHeaderHeightPx),e}isSectionVisible(e,t){const i=e.getBoundingClientRect(),n=this.searchBoxRef&&this.searchBoxSticky?ft.a.stickySearchHeights.default:0;return Math.floor(i.bottom)>t+ft.a.sectionVisibilityBufferPx+n}get followedInterestsSectionElement(){if(!this.interestsData||!this.interestsData.interestsRiverData||!this.interestsData.interestsRiverData.followedInterestsSectionData)return null;const{emptyStateCardTitle:e,sectionTitle:t,sectionSubTitle:i,sectionId:n,followedTopics:a,resetFollowedInterestsActionText:r,moreOptionsAriaLabel:s}=this.interestsData.interestsRiverData.followedInterestsSectionData,o=this.mapTopicsSectionProps(a,n+"-topic",this.interestsTelemetry.followedInterestsSectionTelemetryObject,this.interestsTelemetry.followedInterestsSectionTelemetryTag);return{id:n,description:i,heading:t,enableSageHub:!1,emptyStateCardTitle:e,topicsSection:{id:n+"-topic",topics:o.topics,followedClickedHandler:o.followedClickedHandler,topicSelectedHandler:o.topicSelectedHandler,topicsSectionTelemetryTag:o.topicsSectionTelemetryTag},moreOptionsAriaLabel:this.config.enableDefaultInterests?s:"",restoreFollowedInterestsActionText:this.config.enableDefaultInterests?r:"",restoreFollowedInterestsButtonClickedHandler:()=>this.restoreFollowedInterestsButtonClickedHandler()}}get followedPublishersSectionElement(){if(!this.interestsData||!this.interestsData.interestsRiverData||!this.interestsData.interestsRiverData.followedPublishersSectionData)return null;const{emptyStateCardTitle:e,sectionTitle:t,sectionSubTitle:i,sectionId:n,publisherCards:a}=this.interestsData.interestsRiverData.followedPublishersSectionData,r=this.mapFollowedPublishersSectionProps(a,this.interestsTelemetry.followedPublishersSectionTelemetryObject,this.interestsTelemetry.followedPublishersSectionTelemetryTag);return{id:n,description:i,heading:t,enableSageHub:!1,emptyStateCardTitle:e,topicsSection:{id:n+"-topic",topics:r.topics,followedClickedHandler:r.followedClickedHandler,topicSelectedHandler:r.topicSelectedHandler,topicsSectionTelemetryTag:r.topicsSectionTelemetryTag}}}get discoverInterestsRiverElement(){if(!this.interestsData||!this.interestsData.interestsRiverData||!this.interestsData.interestsRiverData.discoverSectionData)return null;const{sectionTitle:e,sectionSubTitle:t,sectionId:i,topicSections:n}=this.interestsData.interestsRiverData.discoverSectionData,{enableSearch:a,placeHolderText:r,suggestionItems:s}=this.interestsData.searchData||{},{localizedStrings:o}=this.config;this.needToScroll?this.renderedDiscoverSections=(null==n?void 0:n.length)||0:this.renderedDiscoverSections=Math.max(Math.min(this.discoverSectionsToRender,(null==n?void 0:n.length)||0),this.renderedDiscoverSections);const c=[];for(let e=0;e<this.renderedDiscoverSections;e++){const{id:t,title:i,topics:a,emptyStateCardTitle:r}=n[e],s=this.mapTopicsSectionProps(a,t,this.interestsTelemetry.topicsSectionTelemetryObject(i),this.interestsTelemetry.topicsSectionTelemetryTag(i),this.renderedDiscoverSections-1===e);c.push({id:t,sectionTitle:i,topics:s.topics,emptyStateCardTitle:null!=r?r:"",followedClickedHandler:s.followedClickedHandler,topicSelectedHandler:s.topicSelectedHandler,topicsSectionTelemetryTag:s.topicsSectionTelemetryTag}),this.lastRenderedDiscoverSectionId=t}const d={placeholder:r,handleFollowStateChange:e=>{e.target.type===ft.a.provideNameTag?this.followPublisherCallback(e,!0):this.followedClickedHandler(e,i,e.target.followed)},inputChange:this.onInputChange,glyphType:ht.lc,telemetryTag:this.interestsTelemetry.interestsSearchBoxTelemetryTag,telemtryObject:this.interestsTelemetry.interestsSearchBoxTelemetryObject},l=s&&s.map(e=>{var t;let i;return this.config.searchSuggestionSourceType.indexOf(ft.a.provideNameTag)>-1&&(i=(null===(t=e.type)||void 0===t?void 0:t.toLowerCase())===ft.a.provideNameTag?o.interestsSearchTopicTypeAsPublisher:o.interestsSearchTopicTypeAsInterest),{topicCardData:e,topicType:i}});return{id:i,description:t,heading:e,enableSearch:a,topicSections:c,interestsSearch:d,suggestionItems:l}}get unmuteDialogElement(){if(!this.interestsData||!this.interestsNextState.publisherOnDialog)return null;const{interestsRiverData:{mutedPublisherSectionData:{unmuteData:e,unmutePublisherCallback:t}}}=this.interestsData,{unmuteDialogData:i}=e,{publisherOnDialog:n}=this.interestsNextState,a=new pe(this.interestsTelemetry.hiddenPublishersSectionTelemetryObject,this.interestsRiverTelemetryObjects,i.localizedStrings.actionButtonText,i.localizedStrings.cancelButtonText);return{actionButtonTelemetryTag:null==a?void 0:a.actionButtonTelemetryTag,cancelButtonTelemetryTag:null==a?void 0:a.cancelButtonTelemetryTag,closeButtonTelemetryTag:null==a?void 0:a.closeButtonTelemetryTag,telemetryTag:null==a?void 0:a.dialogTelemetryTag,actionButtonCallback:()=>{t(n.publisherId).then(e=>{e?(this.interestsNextState=Object.assign(Object.assign({},this.interestsNextState),{publisherOnDialog:null}),this.confirmHiddenFocusElement.tagName.toLocaleLowerCase()===ft.a.FluentTreeItemTagName?Ce.a.focusItem(this.confirmHiddenFocusElement):this.confirmHiddenFocusElement.focus()):this.interestsNextState=Object.assign(Object.assign({},this.interestsNextState),{publisherOnDialog:null}),document.removeEventListener("keydown",this.onTabKeydown)})},cancelButtonCallback:e=>this.unmuteDialogToggleCallback(e),localizedStrings:Object.assign(Object.assign({},i.localizedStrings),{dialogHeadline:i.localizedStrings.dialogHeadline.replace("${publisher}",n.publisherTitle)}),actionDialogDismiss:()=>{this.interestsNextState=Object.assign(Object.assign({},this.interestsNextState),{publisherOnDialog:null}),this.cancelHiddenFocusElement.focus(),document.removeEventListener("keydown",this.onTabKeydown)}}}get unmuteDialogBodyElement(){if(!this.interestsData||!this.interestsNextState.publisherOnDialog)return null;const{interestsRiverData:{mutedPublisherSectionData:{unmuteData:e}}}=this.interestsData,{publisherOnDialog:{imgSrc:t,publisherTitle:i}}=this.interestsNextState,n=`<b key="provider-name">${i}</b>`;return{imgSrc:t,providerContent:Object(Ne.a)(e.dialogContent,[n])}}get hiddenPublishersSectionElement(){if(!this.interestsData||!this.interestsData.interestsRiverData||!this.interestsData.interestsRiverData.mutedPublisherSectionData)return null;const{enableSageHub:e,mutedPublisherSectionData:t}=this.interestsData.interestsRiverData,{sectionTitle:i,publisherCards:n,emptyListMessage:a,emptyStateCardTitle:r,sectionId:s}=t,o=n;return{id:s,description:(null==o?void 0:o.length)?null:a,heading:i,emptyStateCardTitle:r,enableSageHub:e,publishers:this.mapPublishersData(o)}}get savedStoriesSectionElement(){if(!this.interestsData||!this.interestsData.interestsRiverData||!this.interestsData.interestsRiverData.savedStoriesSectionData)return null;try{const{emptyListMessage:e,sectionTitle:t,cards:i}=this.interestsData.interestsRiverData.savedStoriesSectionData,{sectionIds:{savedStories:n}}=ft.a,a=n;let r=[];return i&&(this.mapCardActionStatuses(i),r=i.map(e=>this.getContentCard(e,this.interestsTelemetry.savedStoriesSectionTelemetryObject))),{sectionId:Re.a.removeHyphens(a),sectionTitle:t,emptyListMessage:e,cardProps:r}}catch(e){this.fireUncaughtSectionError(ft.a.sectionIds.savedStories,e);const{savedStoriesSectionHeader:t,errorMessageHeading:i}=this.config.localizedStrings;return{sectionId:ft.a.sectionIds.savedStories,sectionTitle:t,emptyListMessage:i,cardProps:[]}}}get readStoriesSectionElement(){if(!this.interestsData||!this.interestsData.interestsRiverData||!this.interestsData.interestsRiverData.readStoriesSectionData)return null;try{const{emptyListMessage:e,sectionTitle:t,cards:i}=this.interestsData.interestsRiverData.readStoriesSectionData,{sectionIds:{readStories:n}}=ft.a,a=n;let r=[];return i&&(this.mapCardActionStatuses(i),r=i.map(e=>this.getContentCard(e,this.interestsTelemetry.readStoriesSectionTelemetryObject))),{sectionId:Re.a.removeHyphens(a),sectionTitle:t,emptyListMessage:e,cardProps:r}}catch(e){this.fireUncaughtSectionError(ft.a.sectionIds.readStories,e);const{readStoriesSectionHeader:t,errorMessageHeading:i}=this.config.localizedStrings;return{sectionId:ft.a.sectionIds.readStories,sectionTitle:t,emptyListMessage:i,cardProps:[]}}}get settingPageElement(){var e,t;return this.getSettingPageElement(null===(t=null===(e=this.interestsData)||void 0===e?void 0:e.interestsRiverData)||void 0===t?void 0:t.settings,this.interestsTelemetry.informationCardSectionTelemetryTag,this.interestsTelemetry.informationCardSectionTelemetryObject,ft.a.SettingCardTelemetryMapping,this.strings.informationCardEmptyListMessage,ft.a.settingsSectionIds.root,this.updateSegmentCardsEnabledStatus)}get feedSettingPageElement(){var e,t,i;return this.getSettingPageElement(null===(i=null===(t=null===(e=this.interestsData)||void 0===e?void 0:e.interestsRiverData)||void 0===t?void 0:t.settings)||void 0===i?void 0:i.feedSettings,this.interestsTelemetry.feedSettingsSectionTelemetryTag,this.interestsTelemetry.feedSettingsSectionTelemetryObject,ft.a.FeedSettingCardTelemetryMapping,this.strings.feedSettingsEmptyListMessage,ft.a.feedSettingsSectionIds.root,this.updateFeedSettingsOptOutStatus)}get notificationRiverElement(){if(!this.interestsData||!this.interestsData.interestsRiverData||!this.interestsData.interestsRiverData.notification)return null;const{notification:e}=this.config,{notification:t}=this.strings,i=[];return e&&e.children&&i.push([{name:t.topics.General.children.AllNotifications.topicName,type:e.type,menuItemId:qe.c.AllNotifications,toggleChecked:this.notificationSettingMap[qe.c.AllNotifications],updateNotificationSetting:this.updateNotificationSetting,telemetryTag:this.interestsTelemetry.notificationSwitchClickTelemetryTag(e.type,!this.notificationSettingMap[qe.c.AllNotifications])}]),e&&e.children.forEach(e=>{const n=[{name:t.topics[e.name].topicName,desc:t.topics[e.name].description,menuItemId:e.type}];n.push({name:t.topics[e.name].children[e.type].topicName,desc:t.topics[e.name].children[e.type].description,type:e.type,toggleChecked:this.notificationSettingMap[e.type],updateNotificationSetting:this.updateNotificationSetting,telemetryTag:this.interestsTelemetry.notificationSwitchClickTelemetryTag(e.type,!this.notificationSettingMap[e.type])}),e.children.forEach(i=>{const a=i.type.split("_")[1];n.push({name:t.topics[e.name].children[a].topicName,desc:t.topics[e.name].children[a].description,type:i.type,toggleChecked:this.notificationSettingMap[i.type],updateNotificationSetting:this.updateNotificationSetting,telemetryTag:this.interestsTelemetry.notificationSwitchClickTelemetryTag(i.type,this.notificationSettingMap[i.type])})}),i.push(n)}),i}get settingMarketSelectorElement(){var e,t,i;if(!(null===(i=null===(t=null===(e=this.interestsData)||void 0===e?void 0:e.interestsRiverData)||void 0===t?void 0:t.settings)||void 0===i?void 0:i.marketSettings)||Object(v.b)().IsCnDomain)return null;try{const{sectionId:e,heading:t,description:i}=this.interestsData.interestsRiverData.settings.marketSettings;return this.settingsMarkets=this.settingsMarkets||P.c.sort(P.a),{heading:t,settingsId:e,defaultSelection:Object(v.b)().CurrentMarket||"en-us",description:i,telemetryTag:this.interestsTelemetry.marketSettingsSectionTelemetryTag}}catch(e){return this.fireUncaughtSectionError(ft.a.settingsSectionIds.Market,e),{heading:this.config.localizedStrings.marketSettingsHeading,description:this.config.localizedStrings.errorMessageHeading,settingsId:null,defaultSelection:"en-us",telemetryTag:this.interestsTelemetry.marketSettingsSectionTelemetryTag}}}fireUncaughtSectionError(e,t){this.onAppError(Object.assign(Object.assign({},ve.Ke),{message:"Uncaught exception occurred in section "+e,pb:Object.assign(Object.assign({},ve.Ke),{customMessage:t})}))}setInterestsRiverBottomPadding(){if(this.interestsRiverRef){const e=this.interestsRiverRef.lastElementChild;if(e){const t=e.querySelector(":last-child").getBoundingClientRect().height,i=this.searchBoxRef&&this.config.enableStickySearch?ft.a.stickySearchHeights.default:0;e.style.paddingBottom=`calc(100vh - ${this.getHeaderBottom()}px - ${t}px - ${i}px - 21px)`}}}getSettingPageElement(e,t,i,n,a,r,s){if(!e)return null;try{const a=e.cards&&e.cards.map(e=>Object.assign(Object.assign({},e),{updateSettingStatus:s,telemetryTag:this.interestsTelemetry.settingCardTelemetryTag(i,n[e.cardType])}));return{heading:e.heading,cards:a,settingsId:e.sectionId,emptyListMessage:e.emptyListMessage,telemetryTag:t}}catch(e){return this.fireUncaughtSectionError(r,e),{heading:"",cards:[],settingsId:"",emptyListMessage:a,telemetryTag:t}}}getContentCard(e,t){const{id:i,destinationUrl:n,title:a,category:r,providerName:s,imageProps:o,providerProps:c,articleProps:d,titleAriaLabel:l,titleLabel:u,saveButtonText:h,undoSaveButtonText:g,actionsButtonText:p}=e,m=new he(t,i,a,r,s,n);return{id:i,href:n,ariaLabel:l,titleLabel:u,title:a,imageProps:null!=o?o:null,articleProps:null!=d?d:null,providerProps:null!=c?c:null,providerName:s,saveActionTrigger:this.getSaveActionTrigger(i,h,g,null==m?void 0:m.saveButtonTelemetryTag,null==m?void 0:m.undoSaveButtonTelemetryTag),actionTrigger:this.getActionTrigger(p,null==m?void 0:m.moreButtonTelemetryTag),telemetryTag:null==m?void 0:m.contentCardTelemetryTag,anchorTelemetryTag:null==m?void 0:m.destinationTelemetryTag,moreButtonTelemetryObject:null==m?void 0:m.moreButtonTelemetryObject}}getSaveActionTrigger(e,t,i,n,a){const{cardActionStatusMap:s}=this.interestsNextState,o=((null==s?void 0:s.get(e))||r.b.enabled)&r.b.saved,c=o?i:t;return{ariaLabel:c,title:c,click:this.onCardActionClick,glyphType:o?Object(ht.gc)(!this.config.enableNeutralFilledSaveIconOnCard&&ht.q):ht.ic,telemetryTag:o?a:n}}getActionTrigger(e,t){return{ariaLabel:e,title:e,click:this.openCardActions,glyphType:ht.nc,telemetryTag:t}}mapCardActionStatuses(e){if(!e||!e.length)return;const t=this.interestsNextState.cardActionStatusMap;e.forEach(e=>{t.has(e.id)||this.setCardActionState(e.id,e.actions.length?r.b.saved:r.b.enabled)})}mapPublishersData(e){return e?e.map(e=>Object.assign(Object.assign({},e),{actionButtonCallback:t=>this.unmuteDialogToggleCallback(t,e)})):[]}mapTopicsSectionProps(e,t,i,n,a){return{topics:this.mapDataToTopicSectionCards(e,i,a),topicsSectionTelemetryTag:n,topicSelectedHandler:e=>this.topicSelectedHandler(e),followedClickedHandler:e=>this.followedClickedHandler(e,t,e.target.followed)}}mapFollowedPublishersSectionProps(e,t,i){return{topics:this.mapFollowedPublishersDataToTopicSectionCards(e,t),topicsSectionTelemetryTag:i,followedClickedHandler:this.followPublisherCallback}}restoreTopicCardFollowState(e,t,i){const n=document.getElementById(e),a=n&&n.shadowRoot.querySelectorAll(`msn-topic-card[topicid=${t}]`);if((null==a?void 0:a.length)>0){const e=a[0];e instanceof ze.a&&(e.followed=i)}}updateRepeatedTopicCardInstances(e,t){const i=this.shadowRoot.querySelectorAll("msn-topics-section");(null==i?void 0:i.length)>0&&i.forEach(i=>{const n=i.shadowRoot.querySelectorAll(`msn-topic-card[topicid=${e}]`);(null==n?void 0:n.length)>0&&n.forEach(e=>{e instanceof ze.a&&(e.followed=t)})})}mapDataToTopicSectionCards(e,t,i){if(!e||e.length<1)return null;const{followFormatAriaLabel:n,followFormatText:a,unfollowFormatAriaLabel:r,unfollowFormatText:s,contentLinkFormatText:o}=this.interestsData.interestsRiverData.discoverSectionData,c=[];return e.map((d,l)=>{if(!d)return;const u=new ge(t,d.id,d.name,s,a,o,E.c.Topic);c.push({followFormatAriaLabel:null!=n?n:"",followFormatText:null!=a?a:"",imgAltText:d.name,imgSrc:d.imgSrc,followed:"followed"===d.followState,topicId:d.id,topicTitle:d.name,unfollowFormatAriaLabel:null!=r?r:"",unfollowFormatText:null!=s?s:"",enableNavToXfeed:this.config.enableTopicCardNav,contentLinkFormatText:null!=o?o:"",followButtonTelemetryTag:null==u?void 0:u.followButtonTelemetryTag,unfollowButtonTelemetryTag:null==u?void 0:u.unfollowButtonTelemetryTag,imgOnloadCallback:i&&l===e.length-1?this.updateDiscoverSectionsToRender:null,contentLinkButtonTelemetryTag:null==u?void 0:u.contentLinkButtonTelemetryTag})}),c}mapFollowedPublishersDataToTopicSectionCards(e,t){if(!e||e.length<1)return null;const{followFormatAriaLabel:i,followFormatText:n,unfollowFormatAriaLabel:a,unfollowFormatText:r}=this.interestsData.interestsRiverData.discoverSectionData,s=[];return e.map(e=>{var o;let c;t&&(c=new ge(t,e.publisherId,e.publisherTitle,r,n,null,E.c.Publisher)),s.push({followButtonTelemetryTag:c&&c.followButtonTelemetryTag,followFormatAriaLabel:i,followFormatText:n,imgAltText:e.publisherTitle,imgSrc:`${null===(o=e.imgSrc)||void 0===o?void 0:o.split("?")[0]}?w=80&h=80&q=90&m=6&f=${$e.d.JPG}`,followed:e.followed,topicId:e.publisherId,topicTitle:e.publisherTitle,enableNavToXfeed:this.config.enableTopicCardNav,unfollowButtonTelemetryTag:c&&c.unfollowButtonTelemetryTag,unfollowFormatAriaLabel:a,unfollowFormatText:r})}),s}mapFollowedInterestsProps(e){var t;const{followedTopicIds:i,topicMap:n}=e,{enableDefaultInterests:a,enableWorkTopicInterests:r,localizedStrings:s}=this.config,{followFormatText:o,unfollowFormatText:c,followFormatAriaLabel:d,unfollowFormatAriaLabel:l,contentLinkFormatText:u,resetFollowedInterestsActionText:h,moreOptionsAriaLabel:g,explicitlyFollowedInterestsSectionEmptyListInfoText:p,followedInterestsEmptyStateCardTitle:m,followedTopicsListSectionTitle:b,followedTopicsListSectionSubtitle:f}=s||{},v=[...new Set(i)];this.followedTopics=(null===(t=this.followedTopics)||void 0===t?void 0:t.length)&&this.followedTopics||v.map(e=>{var t;const i=n[e];if((null==i?void 0:i.followState)===ye.a.Followed){if(a)return i;if(!(null==i?void 0:i.isInferred)||r&&(null===(t=i.apiSource)||void 0===t?void 0:t.id)===Se.a.work)return i}}).filter(e=>e);const y=Object(mt.a)(this.followedTopics);return{sectionTitle:b,sectionSubTitle:f,sectionId:Re.a.removeHyphens(ft.a.sectionIds.followedInterests),emptyListMessage:p,emptyStateCardTitle:m,followedTopics:y,followFormatText:o,unfollowFormatText:c,followFormatAriaLabel:d,unfollowFormatAriaLabel:l,contentLinkFormatText:u,resetFollowedInterestsActionText:h,moreOptionsAriaLabel:g}}mapFollowedPublisherCardProps(){const{localizedStrings:e}=this.config,{followFormatText:t,unfollowFormatText:i,followedPublishersSectionTitle:n,followedPublishersSectionSubtitle:a,followedPublishersEmptyMessage:r}=e;return{sectionTitle:n,sectionSubTitle:a,sectionId:Re.a.removeHyphens(ft.a.sectionIds.followedPublishers),emptyStateCardTitle:r,publisherCards:Object(mt.a)(this.followedPublishers),followFormatText:t,unfollowFormatText:i,followFormatAriaLabel:t,unfollowFormatAriaLabel:i}}mapDiscoverInterestsProps(e){const{topicListMap:t,topicListIds:i}=e,{localizedStrings:n}=this.config,{followFormatText:a,unfollowFormatText:r,followFormatAriaLabel:s,unfollowFormatAriaLabel:o,contentLinkFormatText:c,discoverTopicsListSectionTitle:d,discoverTopicsListSectionSubtitle:l}=n||{},u=[];return i.map(i=>{const n=t[i];u.push({topics:this.mapDiscoverTopicSectionTopics(n.topicIds,e),id:Re.a.removeHyphens(n.id),title:n.title})}),{sectionTitle:d,sectionSubTitle:l,sectionId:Re.a.removeHyphens(ft.a.sectionIds.discoverInterests),topicSections:u,followFormatText:a,unfollowFormatText:r,followFormatAriaLabel:s,unfollowFormatAriaLabel:o,contentLinkFormatText:c}}mapDiscoverTopicSectionTopics(e,t){const{topicMap:i}=t,{enableDefaultInterests:n,enableWorkTopicInterests:a}=this.config;return e.map(e=>{var t;const r=i[e];return(null==r?void 0:r.followState)===ye.a.Followed?n||!(null==r?void 0:r.isInferred)||a&&(null===(t=r.apiSource)||void 0===t?void 0:t.id)===Se.a.work?r:Object.assign(Object.assign({},r),{followState:ye.a.Unfollowed,isInferred:!1}):r})}requestInterestToast(e,t,i,n){n?Xe.a.renderToast({id:`${e}-${i}`,toastType:i?Ye.a.Follow:Ye.a.Unfollow,inputText:t,expirationInMs:ft.a.defaultToastNotificationTimeoutMs}):Xe.a.renderToast({id:`${e}-${i}`,toastType:Ye.a.InterestFailure,expirationInMs:ft.a.defaultToastNotificationTimeoutMs})}async restoreDefaultFollowedTopics(e){await Promise.all(e.map(e=>this.topicsDataConnector.unfollowTopic(e,!0))),Object(We.a)(Ve.a.InterestsChange),Object(Lt.b)(x.a.desktopFeedEdgeNextWC),Object(u.b)()}mapMutedPublisherCardProps(){var e;let t;const{localizedStrings:i}=this.config,{mutedPublisherEmptyStateCardTitle:n,errorMessage:a}=i||{};return(null===(e=this.mutedPublishers)||void 0===e?void 0:e.length)&&(t=this.mutedPublishers.map(e=>this.mapPublisher(e))),{publisherCards:t,emptyStateCardTitle:this.mutedPublishersError?a:n,emptyListMessage:this.mapPublisherEmptyListMessage(i),sectionId:Re.a.removeHyphens(ft.a.sectionIds.mutedPublishers),sectionTitle:null==i?void 0:i.mutedPublisherSectionHeader,sectionSubTitle:null,unmutePublisherCallback:this.unmutePublisherClickHandler,unmuteData:this.mapUnmuteProps()}}mapPublisher(e){const{logos:t,displayName:i,createdDateTime:n,id:a}=e,{localizedStrings:r,mutedPublisherPlaceholderImageUrl:s}=this.config,o=t.length?t[0].imageLink.href:null,c=Le.b.Locale||"en-us";return{publisherId:a,imgSrc:`${o||s}?w=80&h=80&q=90&m=6&f=${$e.d.JPG}`,imgAltText:i,publisherTitle:i,actionDateLabel:`${r.mutedActionText} ${new Date(n).toLocaleDateString(c)}`,actionButtonAriaLabel:r.unMuteActionButtonAriaLabel,actionButtonText:r.unMuteActionButtonText,actionButtonCallback:null,actionButtonTelemetryTag:this.interestsTelemetry.publisherActionButtonTelemetryTag(r.unMuteActionButtonText,a)}}mapUnmuteProps(){const{dialogConfirmButtonText:e,dialogConfirmButtonAriaLabel:t,dialogCancelButtonText:i,dialogCancelButtonAriaLabel:n,dialogCloseButtonAriaLabel:a,unMutePublisherDialogMessageTemplate:r,unMutePublisherDialogHeaderTemplate:s,dialogAriaText:o}=this.config.localizedStrings;return{dialogContent:r,unmuteDialogData:{actionButtonCallback:null,cancelButtonCallback:null,localizedStrings:{actionButtonAriaLabel:t,actionButtonText:e,actionButtonTitleLabel:t,cancelButtonAriaLabel:n,cancelButtonText:i,cancelButtonTitleLabel:n,closeButtonAriaLabel:a,closeButtonTitleLabel:a,dialogHeadline:s,dialogAriaText:o}}}}mapPublisherEmptyListMessage(e){return e?this.mutedPublishersLoaded?this.mutedPublishersError?e.errorMessageHeading:e.mutedPublisherEmptyListMessage:e.sectionLoadingMessage:""}getSearchData(){var e;const{enableSearch:t,localizedStrings:i}=this.config;return{enableSearch:t,placeHolderText:i.interestsSearchPlaceholder,suggestionItems:null!==(e=this.suggestions)&&void 0!==e?e:[]}}mapSuggestionItemToTopicListboxData(e){var t,i;const{enableDefaultInterests:n,enableWorkTopicInterests:a}=this.config,{followFormatAriaLabel:r,followFormatText:s,unfollowFormatAriaLabel:o,unfollowFormatText:c}=this.config.localizedStrings,{displayText:d,id:l,imageUrl:u,name:h,type:g}=e,p=Object(A.a)(g===ft.a.provideNameTag?de:ce,d),m=new me(l,p,c,s,d,g===ft.a.provideNameTag?E.c.Publisher:E.c.Topic);let b;g===ft.a.provideNameTag&&(null===(t=this.followedPublishers)||void 0===t?void 0:t.some(e=>e.publisherId===l&&e.followed))&&(b=!0);const{topicMap:f}=this.topicsDataConnector.getCurrentState(),v=f[l];if("bingtopic"!==g&&"category"!==g||!v||(b=n?v.followState===ye.a.Followed:v.followState===ye.a.Followed&&(!v.isInferred||a&&(null===(i=v.apiSource)||void 0===i?void 0:i.id)===Se.a.work)),g===Te.a.UserQuery){const{followedTopicNames:t,followedTopicIds:i}=this.topicsDataConnector.getCurrentState(),n=t.find(e=>e.toLowerCase()===h.trim().toLowerCase());if(b=!!n,b){const a=t.indexOf(n);e=Object.assign(Object.assign({},e),{id:i[a]})}}return{followButtonTelemetryTag:m.followButtonTelemetryTag,followFormatAriaLabel:r,followFormatText:s,imgAltText:d,imgSrc:Object($e.g)(u||ft.a.topicCardBackupImageUrl,{width:ft.a.ImageSize.SuggestionCardImgStandardDimensions.width,height:ft.a.ImageSize.SuggestionCardImgStandardDimensions.height,quality:90,enableDpiScaling:!1}),followed:b,topicId:e.id,topicTitle:d,unfollowButtonTelemetryTag:m.unfollowButtonTelemetryTag,unfollowFormatAriaLabel:o,unfollowFormatText:c,type:g}}mapSavedStoriesCardProps(){var e;let t;const{localizedStrings:i}=this.config;return(null===(e=this.savedStories)||void 0===e?void 0:e.length)&&(t=this.savedStories.map(e=>this.mapStory(e))),{emptyListMessage:this.savedStoriesLoaded?i.savedStoriesEmptyListMessage:i.sectionLoadingMessage,sectionId:Re.a.removeHyphens(ft.a.sectionIds.savedStories),sectionTitle:i.savedStoriesSectionHeader,sectionSubTitle:null,cards:t}}mapStory(e,t){var i,n,a,r,s,o,c,d,l,u;const{id:h,title:g,destinationUrl:p,provider:m,images:b}=e.cardContent,{category:f,actions:v}=e.metadata,{titleFormatAriaLabel:y,titleFormatText:S,imgAltFormatText:O,saveButtonText:T,undoSaveButtonText:w,moreOptionsAriaLabel:C}=this.config.localizedStrings,j=Object(A.a)(y,g,null==m?void 0:m.name),I=Object(A.a)(S,g,null===(i=null==b?void 0:b[0])||void 0===i?void 0:i.attribution),x=Object(A.a)(O,g,null===(n=null==b?void 0:b[0])||void 0===n?void 0:n.attribution);return{id:h,title:g,destinationUrl:p,category:f,actions:t&&t.indexOf(h)>-1?["save"]:v,providerName:null==m?void 0:m.name,titleAriaLabel:j,titleLabel:I,saveButtonText:T,undoSaveButtonText:w,actionsButtonText:C,articleProps:{id:h,headlineTitle:g,href:p,image:{alt:null===(a=null==b?void 0:b[0])||void 0===a?void 0:a.caption,src:null===(r=null==b?void 0:b[0])||void 0===r?void 0:r.url},provider:m&&{id:m.id,name:m.name,image:{alt:m.id,src:m.logoUrl}}},imageProps:(null===(s=null==b?void 0:b[0])||void 0===s?void 0:s.url)&&{src:Object($e.g)(null===(o=null==b?void 0:b[0])||void 0===o?void 0:o.url,{width:ft.a.ImageSize.ContentCardImageStandardDimensions.width,height:ft.a.ImageSize.ContentCardImageStandardDimensions.height,focalRegion:null===(c=null==b?void 0:b[0])||void 0===c?void 0:c.focalRegion,quality:null===(d=null==b?void 0:b[0])||void 0===d?void 0:d.quality,enableDpiScaling:!1}),alt:x,"aria-label":null===(l=null==b?void 0:b[0])||void 0===l?void 0:l.caption,title:null===(u=null==b?void 0:b[0])||void 0===u?void 0:u.caption,width:ft.a.ImageSize.ContentCardImageStandardDimensions.width,height:ft.a.ImageSize.ContentCardImageStandardDimensions.height},providerProps:m&&{src:Object($e.g)(m.logoUrl,{width:ft.a.ImageSize.ContentCardProviderImgStandardDimensions.width,height:ft.a.ImageSize.ContentCardProviderImgStandardDimensions.height,enableDpiScaling:!1}),alt:m.name}}}mapReadStoriesCardProps(){var e,t;let i,n;const{localizedStrings:a}=this.config;return(null===(e=this.savedStories)||void 0===e?void 0:e.length)&&(n=this.savedStories.map(e=>e.cardContent.id)),(null===(t=this.readStories)||void 0===t?void 0:t.length)&&(i=this.readStories.map(e=>this.mapStory(e,n))),{emptyListMessage:this.readStoriesLoaded?null==a?void 0:a.readStoriesEmptyListMessage:null==a?void 0:a.sectionLoadingMessage,sectionId:Re.a.removeHyphens(ft.a.sectionIds.readStories),sectionTitle:null==a?void 0:a.readStoriesSectionHeader,sectionSubTitle:null,cards:i}}getSportsEntityTypeDescription(e){if(Object(A.b)(e))return null;switch(e.toLowerCase()){case Je.c.Team.toLowerCase():return this.strings.sportsTeam;case Je.c.League.toLowerCase():return this.strings.sportsLeague;default:return null}}clickOnSportsEntitySwitch(e){if(!e||Object(A.b)(e.id))return;const t=e.id.split(Je.b),i=t.length;if(!i)return;const n=t[0],a=i>1?t[1]:"";e.checked?Ge.a.notInterestedSportsCard({id:n,name:e.title,type:a}):Ge.a.removeDislikeSportsCard({id:n,type:a})}calcUnmutedPublishersCardFocus(e,t){const i=this.shadowRoot.getElementById(ft.a.MutedPublishersId),n=i&&i.querySelector(ft.a.MsftPublishersCardTagName).shadowRoot.querySelectorAll(".publishers-card .publisher");this.cancelHiddenFocusElement=t&&e.path[0]||this.cancelHiddenFocusElement,t&&n&&1===n.length?this.confirmHiddenFocusElement=this.shadowRoot.getElementById(ft.a.MutedPublishersMenuItemId):(t&&n&&n.length&&Array.from(n).map((e,i)=>{if(e.id===t.publisherId){const e=i?n[i-1]:n[i];this.confirmHiddenFocusElement=e&&e.querySelector("fluent-button.action-button.outline")}}),!t&&this.cancelHiddenFocusElement.focus())}}Object(a.d)([lt.d],Nt.prototype,"interestsData",void 0),Object(a.d)([lt.d],Nt.prototype,"topicDataState",void 0),Object(a.d)([lt.d],Nt.prototype,"interestsNextState",void 0),Object(a.d)([lt.d],Nt.prototype,"interestsTelemetry",void 0),Object(a.d)([lt.d],Nt.prototype,"sidePaneSticky",void 0),Object(a.d)([lt.d],Nt.prototype,"searchBoxSticky",void 0),Object(a.d)([lt.d],Nt.prototype,"useStickyHeaderHeightSmallScreen",void 0),Object(a.d)([lt.d],Nt.prototype,"toast",void 0),Object(a.d)([lt.d],Nt.prototype,"suggestions",void 0),Object(a.d)([lt.d],Nt.prototype,"followedPublishers",void 0),Object(a.d)([lt.d],Nt.prototype,"mutedPublishers",void 0),Object(a.d)([lt.d],Nt.prototype,"savedStories",void 0),Object(a.d)([lt.d],Nt.prototype,"readStories",void 0),Object(a.d)([lt.d],Nt.prototype,"notificationSettingMap",void 0),Object(a.d)([lt.d],Nt.prototype,"topicsAndInterestsLoaded",void 0),Object(a.d)([lt.d],Nt.prototype,"mutedPublishersLoaded",void 0),Object(a.d)([lt.d],Nt.prototype,"readStoriesLoaded",void 0),Object(a.d)([lt.d],Nt.prototype,"isDarkMode",void 0),Object(a.d)([lt.d],Nt.prototype,"freArtifact",void 0),Object(a.d)([lt.d],Nt.prototype,"renderColdStart",void 0),Object(a.d)([lt.d],Nt.prototype,"discoverSectionsToRender",void 0),Object(a.d)([lt.d],Nt.prototype,"onTranslucentBackgroundClass",void 0),Object(a.d)([lt.d],Nt.prototype,"sportsDislikes",void 0),Object(a.d)([ut.b],Nt.prototype,"backgroundColors",void 0),Object(a.d)([lt.f],Nt.prototype,"sidePaneLayoutStyle",null),Object(a.d)([lt.f],Nt.prototype,"sidePaneHeaderElement",null),Object(a.d)([lt.f],Nt.prototype,"sidePaneMenuElement",null),Object(a.d)([lt.f],Nt.prototype,"followedInterestsSectionElement",null),Object(a.d)([lt.f],Nt.prototype,"followedPublishersSectionElement",null),Object(a.d)([lt.f],Nt.prototype,"discoverInterestsRiverElement",null),Object(a.d)([lt.f],Nt.prototype,"unmuteDialogElement",null),Object(a.d)([lt.f],Nt.prototype,"unmuteDialogBodyElement",null),Object(a.d)([lt.f],Nt.prototype,"hiddenPublishersSectionElement",null),Object(a.d)([lt.f],Nt.prototype,"savedStoriesSectionElement",null),Object(a.d)([lt.f],Nt.prototype,"readStoriesSectionElement",null),Object(a.d)([lt.f],Nt.prototype,"settingPageElement",null),Object(a.d)([lt.f],Nt.prototype,"feedSettingPageElement",null),Object(a.d)([lt.f],Nt.prototype,"notificationRiverElement",null),Object(a.d)([lt.f],Nt.prototype,"settingMarketSelectorElement",null)},S8sE:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var n=i("D57K");i("roS3"),i("r6MD");setTimeout;let a=setTimeout;function r(e){return Object(n.a)(this,void 0,void 0,(function*(){return new Promise((t,i)=>{a(t,e)})}))}function s(e=1){return Object(n.a)(this,void 0,void 0,(function*(){for(let t=0;t<e;t++)yield r(0)}))}},SHdd:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return a}));var n;!function(e){e.AppAnonCookie="appanoncookie",e.MyFeed="myfeed",e.AuthToken="AuthToken",e.UpdateMyFeed="updatemyfeed",e.RefreshConfigs="refreshconfigs",e.DetectConfigChanges="detectconfigchanges",e.ClearConfigCache="clearconfigcache",e.Updatepdp="updatepdp",e.WeatherPdp="weatherpdp",e.MoneyPdp="moneypdp",e.LocalNews="localnews",e.SportsTeamPdp="sportsteampdp",e.SportsPlayerPdp="sportsplayerpdp",e.SportsLeaguePdp="sportsleaguepdp",e.PerfMarkers="perfmarkers",e.ContentPreviewData="ContentPreviewData",e.ContentPreviewCache="ContentPreviewCache",e.PostTtvr="PostTtvr",e.FeedDisplaySetting="FeedDisplaySetting",e.WebWorkerError="WebWorkerError",e.InvalidateWeatherPdp="InvalidateWeatherPdp",e.InvalidateMoneyPdp="InvalidateMoneyPdp",e.StripeMyFeed="StripeMyFeed",e.UpdateMyBriefing="UpdateMyBriefing",e.MyBriefing="MyBriefing",e.WindowsFeed="WindowsFeed",e.IndustryNewsArticles="IndustryNewsArticles",e.AuctionPrefetch="AuctionPrefetch",e.AuctionAPIDuration="AuctionAPIDuration",e.SAMWebWorkerCalled="SAMWebWorkerCalled",e.SAMMainThreadCalled="SAMMainThreadCalled"}(n||(n={}));const a={None:0,FirstCalledTimes:1,DuplicatedCalledTimes:2};var r;!function(e){e[e.Fetching=1]="Fetching",e[e.Fetched=2]="Fetched"}(r||(r={}))},VGrc:function(e,t,i){"use strict";i.d(t,"b",(function(){return o})),i.d(t,"a",(function(){return c}));var n=i("D57K"),a=i("XlyT"),r=i("HxRh"),s=i("rfxS");function o(e,t,i,o,c=""){return Object(n.a)(this,void 0,void 0,(function*(){if(!e)return null;try{const n=e.tryGetApi("authenticator",s.a,s.a);return yield n.getToken(t,i,o,c)}catch(e){return Object(a.c)(e,r.Xb,"Exception calling GetToken",JSON.stringify(e)),null}}))}function c(e){return Object(n.a)(this,void 0,void 0,(function*(){if(!e)return null;try{const t=e.tryGetApi("authenticator",s.a,s.a);return yield t.getProperty("MUID")}catch(e){return Object(a.c)(e,r.Xb,"Exception fetching MUID",JSON.stringify(e)),null}}))}},W3y6:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n,a=i("D57K"),r=i("Ybri"),s=i("rvYQ"),o=i("ADRF"),c=i("I6Lx"),d=i("msIb"),l=i("KETb"),u=i("6ADy"),h=i("HxRh"),g=i("XlyT"),p=i("fuIx"),m=i("e8jz"),b=i("CgWR"),f=i("tERu"),v=i("ZwaX"),y=i("YuP+"),S=i("u5KZ"),O=i("/+Un"),T=i("kpPY"),w=i("hSGL"),C=i("lifk");!function(e){e.sportsApi="https://api.sports.microsoft.com/SportsReco/v1/SportsRecommendation?apikey=be5b9e52150e49f1b58fafff97d11487";const t={width:32,height:32,enableDpiScaling:!1,format:C.d.PNG};let i,n;function j(e,t,i,n,r=null,s=!1,o=null){return Object(a.a)(this,void 0,void 0,(function*(){if(Object(T.b)(e))return null;const c=i===v.a.Follow?"sid:"+e:e,p={Title:t,Sid:e},m={method:"POST",body:JSON.stringify({actionType:i,targetId:c,targetType:i===v.a.Follow?null:n,metadata:p}),headers:yield d.a.getOneServiceHeaders()};P()&&(m.credentials="include");const b=Object(u.c)("graph/actions");let f;(yield k(r,s)).forEach(e=>e.value&&b.searchParams.set(e.key,e.value)),o&&o.forEach(e=>e.value&&b.searchParams.set(e.key,e.value));try{return f=yield Object(l.b)(()=>Object(a.a)(this,void 0,void 0,(function*(){const e=yield Object(l.a)(b.href,m,h.fh);if(e.status>=400){const t=`postActionRequest OneService returned error response. Status: ${e.status} for actionType: ${i}, targetId: ${c}, targetType: ${n}`;throw new Error(t)}return e.json()})),"postCardAction"+i),yield f}catch(e){Object(g.c)(e,h.gh,"Error while posting action for card interest action","Url: "+b.href)}return f}))}function I(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield function(){return Object(a.a)(this,void 0,void 0,(function*(){const e={method:"GET",headers:yield d.a.getOneServiceHeaders()};P()&&(e.credentials="include");const t=Object(u.c)("graph/actions");let i;(yield k()).forEach(e=>e.value&&t.searchParams.set(e.key,e.value)),t.searchParams.set("$top","100");try{return i=yield Object(l.b)(()=>Object(a.a)(this,void 0,void 0,(function*(){const i=yield Object(l.a)(t.href,e,h.gh);if(i.status>=400){const e="getActionRequest OneService returned error response. Status: "+i.status;throw new Error(e)}return i.json()})),"getCardAction"),yield i}catch(e){return Object(g.c)(e,h.gh,"Error while getting action for card interest action","Url: "+t.href),null}}))}();e&&e.value&&e.value.length?function(e){if(!e)return;i=[],n=[];const t=e.filter(e=>null!=e&&0===e.actionType.localeCompare(v.a.Dislike,void 0,{sensitivity:"accent"})&&(0===e.targetType.localeCompare(v.c.League,void 0,{sensitivity:"accent"})||0===e.targetType.localeCompare(v.c.Team,void 0,{sensitivity:"accent"}))),a=e.filter(e=>null!=e&&0===e.actionType.localeCompare(v.a.Follow,void 0,{sensitivity:"accent"})&&(0===e.targetType.localeCompare(v.c.League,void 0,{sensitivity:"accent"})||0===e.targetType.localeCompare(v.c.Team,void 0,{sensitivity:"accent"})||e.metadata));t.length>0&&t.forEach(e=>{e.metadata&&e.metadata.Title&&i.push({id:e.targetId,name:e.metadata.Title,type:e.targetType})});a.length>0&&a.forEach(e=>{var t,i;n.push({id:(null===(t=e.metadata)||void 0===t?void 0:t.Sid)||"",name:null===(i=e.metadata)||void 0===i?void 0:i.Title,type:e.targetType,feedId:e.targetId})})}(e.value):e&&(i=[],n=[])}))}function x(e,t,i){return Object(a.a)(this,void 0,void 0,(function*(){if(Object(T.b)(e))return null;const n=e,r={method:"DELETE",headers:yield d.a.getOneServiceHeaders()};P()&&(r.credentials="include");const s=Object(u.c)("graph/actions");let o;(yield k()).forEach(e=>e.value&&s.searchParams.set(e.key,e.value));try{return o=yield Object(l.b)(()=>Object(a.a)(this,void 0,void 0,(function*(){const e=yield Object(l.a)(`${s.href}&$filter=actionType+eq+'${t}'+and+targetId+eq+'${n}'+and+targetType+eq+'${i}'`,r,h.fh);if(e.status>=400){const a=`deleteActionRequest OneService returned error response. Status: ${e.status} for actionType: ${t}, targetId: ${n}, targetType: ${i}`;throw new Error(a)}return e})),"deleteCardAction"+t),yield o}catch(e){Object(g.c)(e,h.gh,"Error while delete action for card interest action","Url: "+s.href)}}))}function k(e=null,t=!0){return Object(a.a)(this,void 0,void 0,(function*(){return P()?d.a.getOneServiceParamsWithAuth(Object(s.b)().UserId,e||"Peregrine",t):d.a.getOneServiceParamsWithoutAuth(Object(s.b)().UserId,e||"Peregrine",t)}))}function P(){return Object(a.a)(this,void 0,void 0,(function*(){return!!c.b.UserIsSignedIn||(yield Object(O.d)())===f.c.SignedIn}))}function E(e){const t="undefined"!=typeof window&&Object(p.b)()&&Object(m.b)(),i=t?t.market||"en-us":Object(s.b)().CurrentMarket||"en-us",n=t?t.anid:Object(s.b)().UserId,a=t?t.latitude:Object(s.b)().Latitude,r=t?t.longitude:Object(s.b)().Longitude;e.set("market",i),Object(T.b)(n)||e.set("user",n),a&&r&&(e.set("lat",a),e.set("long",r))}e.fetchSports=function(){return Object(a.a)(this,void 0,void 0,(function*(){const t=e.sportsApi;if(Object(r.a)(t)){const e=new URL(t),i=yield d.a.getBaseRequestData("GET");E(e.searchParams);try{const t=yield Object(l.b)(()=>Object(a.a)(this,void 0,void 0,(function*(){const t=yield Object(l.a)(decodeURIComponent(e.href),i,h.fh);if(!t.ok)throw S.a.sendAppErrorEvent(Object.assign(Object.assign({},h.fh),{message:"Error while calling fetch for sports data ",pb:Object.assign(Object.assign({},h.fh.pb),{fetchNetworkResponse:{statusCode:t.status,statusText:t.statusText,activityId:Object(s.b)().ActivityId,requestUrl:e.href,requestHeaders:JSON.stringify(i&&i.headers)},customMessage:`URL: ${e.href}, responseMessage: ${JSON.stringify(t)}`})})),Error(t.statusText);return t})),"FetchSports");return yield t.json()}catch(t){let n;i&&i.headers&&(n=i.headers),S.a.sendAppErrorEvent(Object.assign(Object.assign({},h.eh),{message:"Error while request sports data with exception.",pb:Object.assign(Object.assign({},h.eh.pb),{fetchNetworkResponse:{activityId:Object(s.b)().ActivityId,requestUrl:e.href,requestHeaders:JSON.stringify(i&&i.headers)},customMessage:`Error: ${t} URL: ${e.href} headers: ${JSON.stringify(n)}`})}))}}}))},e.fetchSportsFeed=function(e=null,t=null,i=!1,n=!0,r=!1,c=null){return Object(a.a)(this,void 0,void 0,(function*(){const u=e;if(!Object(T.b)(u)){let e,g;try{if(e=new URL(u),!e||!o.a.isValidUrl(e.href,!0))return}catch(e){return void S.a.sendAppErrorEvent(Object.assign(Object.assign({},h.eh),{message:"Error while request sports feed data with URL exception.",pb:Object.assign(Object.assign({},h.eh.pb),{fetchNetworkResponse:{activityId:Object(s.b)().ActivityId,requestUrl:u},customMessage:`Error while request sports feed data with URL exception: ${e&&e.message} URL: ${u}`})}))}if(n){g=yield d.a.getBaseRequestData("GET"),E(e.searchParams);(yield k(t,i)).forEach(t=>t.value&&e.searchParams.set(t.key,t.value))}if(r){const t="undefined"!=typeof window&&Object(p.b)()&&Object(m.b)(),i=t?t.market:Object(s.b)().CurrentMarket;e.searchParams.set("market",i)}c&&c.length&&c.forEach(t=>{t.value&&e.searchParams.set(t.key,t.value)});try{const t=yield Object(l.b)(()=>Object(a.a)(this,void 0,void 0,(function*(){const t=yield Object(l.a)(decodeURIComponent(e.href),n?g:null,h.fh);if(t&&t.ok)return t;S.a.sendAppErrorEvent(Object.assign(Object.assign({},h.fh),{message:"Error while calling fetch sports feed data.",pb:Object.assign(Object.assign({},h.fh.pb),{fetchNetworkResponse:{statusCode:t.status,statusText:t.statusText,activityId:Object(s.b)().ActivityId,requestUrl:e.href,requestHeaders:JSON.stringify(g&&g.headers)},customMessage:`Error while calling fetch sports feed data: URL: ${e.href}, responseMessage: ${JSON.stringify(t)}`})}))})),"FetchSportsFeed");return yield t.json()}catch(t){S.a.sendAppErrorEvent(Object.assign(Object.assign({},h.eh),{message:"Error while request sports feed data with exception.",pb:Object.assign(Object.assign({},h.eh.pb),{fetchNetworkResponse:{activityId:Object(s.b)().ActivityId,requestUrl:e.href,requestHeaders:JSON.stringify(g&&g.headers)},customMessage:`Error while request sports feed data with exception: ${t&&t.message} URL: ${e.href} headers: ${(null==g?void 0:g.headers)&&JSON.stringify(null==g?void 0:g.headers)}`})}))}}}))},e.hideSportsCard=function(){return Object(a.a)(this,void 0,void 0,(function*(){try{return yield w.a.updateSegmentCardsEnableStatus([{cardType:b.a.SportsCard,enabled:!1}]),!0}catch(e){return Object(g.c)(e,h.gh,"Sports card settings save failed while hide sports card."),!1}}))},e.notInterestedSportsCard=function(e){return Object(a.a)(this,void 0,void 0,(function*(){if(!e||Object(T.b)(e.id))return!1;try{return yield j(e.id,e.name,v.a.Dislike,e.type||""),!0}catch(t){return Object(g.c)(t,h.gh,"Sports card settings save failed while dislike sports card leagueId: "+e.leagueId),!1}}))},e.removeDislikeSportsCard=function(e){return Object(a.a)(this,void 0,void 0,(function*(){if(!e||Object(T.b)(e.id))return!1;try{return yield x(e.id,v.a.Dislike,e.type||v.c.League),i=null,n=null,!0}catch(t){return Object(g.c)(t,h.gh,"Sports card settings save failed while remove dislike sports card leagueId: "+e.leagueId),!1}}))},e.getDislikeSportsEntities=function(e){I().then(()=>{i&&e(i)})},e.getFollowSportsEntities=function(e){I().then(()=>{n&&e(n)})},e.fetchSuggestions=function(i,n){return Object(a.a)(this,void 0,void 0,(function*(){const a=n.replace("{searchText}",i),r=Object(s.b)().CurrentMarket||"en-us",o=[];return yield e.fetchSportsFeed(a,null,!1,!1,!0).then(e=>{if(!e||!e.suggestionGroups||!e.suggestionGroups.length)return Object(g.b)(h.Xg,"Fetch sports suggestion get null response.",`market=${r}, input:${i}, searchUrl:${a}`),o;if(!e.suggestionGroups[0].searchSuggestions||!e.suggestionGroups[0].searchSuggestions.length)return Object(g.b)(h.Xg,"Fetch sports suggestion get empty groups.",`market=${r}, input:${i}, searchUrl:${a}`),o;let n=0;e.suggestionGroups[0].searchSuggestions.forEach(e=>{var i,a,s,c;if((null===(a=null===(i=e.entityPresentationInfo)||void 0===i?void 0:i.formattedFacts)||void 0===a?void 0:a.length)&&(null===(c=null===(s=e.entityPresentationInfo)||void 0===s?void 0:s.formattedFacts[0].items)||void 0===c?void 0:c.length)&&e.contractualRules.length){let i=e.richContent&&e.richContent.length&&e.richContent[0].webSearchUrl;i=i&&i.startsWith("/")?i:"/"+i;const a=e.richContent&&e.richContent.length&&e.richContent[0].screenshot&&e.richContent[0].screenshot.imageId;let s=a&&Object(y.b)(a,t);s=s&&s.startsWith("//")?"https:"+s:s,o.push({index:n++,id:e.entityPresentationInfo.formattedFacts[0].items[0].text,name:e.displayText,type:e.contractualRules[0].targetPropertyName,displayText:e.displayText,typeDisplayHint:e.entityPresentationInfo.entityTypeDisplayHint,webSearchUrl:i&&`https://${Object(y.g)(r)}/${r}${i}`,imageUrl:s})}})}),o}))},e.postActionRequest=j,e.deleteActionRequest=x}(n||(n={}))},YOxz:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("6BDD"),a=i("Nc2c"),r=i("Q5AN"),s=i("6vBc"),o=i("+53S"),c=i("UauI"),d=i("C5kU");const l=n.b`
    <template
        role="treeitem"
        slot="${e=>e.isNestedItem()?"item":void 0}"
        tabindex="${e=>e.disabled||!e.focusable?void 0:0}"
        class="${e=>e.expanded?"expanded":""} ${e=>e.selected?"selected":""} ${e=>e.nested?"nested":""}
            ${e=>e.disabled?"disabled":""}"
        aria-expanded="${e=>e.childItems&&e.childItemLength()>0?e.expanded:void 0}"
        aria-selected="${e=>e.selected}"
        aria-disabled="${e=>e.disabled}"
        @keydown="${(e,t)=>e.handleKeyDown(t.event)}"
        @click="${(e,t)=>e.handleClick(t.event)}"
        ${Object(a.b)({property:"childItems",filter:Object(r.b)()})}
    >
        <div class="positioning-region" part="positioning-region">
            <div class="content-region" part="content-region">
                ${Object(s.a)(e=>e.childItems&&e.childItemLength()>0,n.b`
                        <div
                            aria-hidden="true"
                            class="expand-collapse-button"
                            part="expand-collapse-button"
                            @click="${(e,t)=>e.handleExpandCollapseButtonClick(t.event)}"
                            ${Object(o.b)("expandCollapseButton")}
                        >
                            <slot name="expand-collapse-glyph">
                                <svg
                                    viewBox="0 0 16 16"
                                    xmlns="http://www.w3.org/2000/svg"
                                    class="expand-collapse-glyph"
                                >
                                    <path
                                        d="M5.00001 12.3263C5.00124 12.5147 5.05566 12.699 5.15699 12.8578C5.25831 13.0167 5.40243 13.1437 5.57273 13.2242C5.74304 13.3047 5.9326 13.3354 6.11959 13.3128C6.30659 13.2902 6.4834 13.2152 6.62967 13.0965L10.8988 8.83532C11.0739 8.69473 11.2153 8.51658 11.3124 8.31402C11.4096 8.11146 11.46 7.88966 11.46 7.66499C11.46 7.44033 11.4096 7.21853 11.3124 7.01597C11.2153 6.81341 11.0739 6.63526 10.8988 6.49467L6.62967 2.22347C6.48274 2.10422 6.30501 2.02912 6.11712 2.00691C5.92923 1.9847 5.73889 2.01628 5.56823 2.09799C5.39757 2.17969 5.25358 2.30817 5.153 2.46849C5.05241 2.62882 4.99936 2.8144 5.00001 3.00369V12.3263Z"
                                    />
                                </svg>
                            </slot>
                        </div>
                    `)}
                ${d.c}
                <slot></slot>
                ${d.b}
            </div>
        </div>
        ${Object(s.a)(e=>e.childItems&&e.childItemLength()>0&&(e.expanded||e.renderCollapsedChildren),n.b`
                <div role="group" class="items" part="items">
                    <slot name="item" ${Object(c.b)("items")}></slot>
                </div>
            `)}
    </template>
`},"YuP+":function(e,t,i){"use strict";i.d(t,"f",(function(){return d})),i.d(t,"e",(function(){return l})),i.d(t,"a",(function(){return u})),i.d(t,"g",(function(){return h})),i.d(t,"d",(function(){return g})),i.d(t,"b",(function(){return p})),i.d(t,"c",(function(){return m}));var n=i("kpPY"),a=i("rvYQ"),r=i("RIQ7"),s=i("fuIx"),o=i("e8jz"),c=i("lifk");c.d.PNG,c.d.PNG,c.d.PNG;function d(){let e,t=null;return Object(s.b)()&&(t=Object(o.b)()),e=t?t.market:a.a.CurrentMarket,e||"en-us"}function l(e,t,i){if(!(i&&e&&t&&i[e]))return null;if(i[e][t])return i[e][t];const n=t?t.substr(0,2):"en";return i[e][n]?i[e][n]:i[e].en}function u(e){if(!e||!e.length||e.includes("ocid="))return e;const t=Object(r.b)();return t?e+"?ocid="+t:e}function h(e){return"zh-cn"===e?"www.msn.cn":"www.msn.com"}function g(e,t,i=!1){return Object(n.b)(e)?i?Object(c.h)("BB1dV8FG",t):null:e.indexOf(".")>0?Object(c.g)(`${c.a}?id=${e}&pid=MSports`,t):Object(c.h)(e,t)}function p(e,t,i=!1){return Object(n.b)(e)?i?Object(c.h)("BB1dV8FG",t):null:Object(c.g)(`${c.a}?id=${e}&pid=MSports`,t)}function m(e,t,i=!1){return Object(n.b)(e)?i?Object(c.h)("BB1dV8FG",t):null:Object(c.g)(e,t)}},ZwaX:function(e,t,i){"use strict";i.d(t,"d",(function(){return n})),i.d(t,"f",(function(){return a})),i.d(t,"e",(function(){return s})),i.d(t,"c",(function(){return c})),i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return l})),i.d(t,"g",(function(){return u})),i.d(t,"h",(function(){return g}));var n,a,r,s,o=i("Am8i");!function(e){e.preGame="pre-game",e.inprogressGame="inprogress-game",e.postGame="post-game"}(n||(n={})),function(e){e.singleparticipant="single",e.dualparticipants="dual"}(a||(a={}));!function(e){e.singleRace="MotorSportsSingleRace",e.raceList="MotorSportsRaceList"}(r||(r={}));!function(e){e.SportsCard="SportsCard",e.Homepage="homepage",e.Game="sports_game",e.MotoRace="motorsports_race",e.Header="sports_header",e.SeeMore="seemore",e.Customization="sportscard_customization",e.MoreSettings="sportscard_customization_moresettings",e.Vertical="sports",e.HideCard="HideSport",e.HideSports="HideSportsCard",e.SaveSetting="done",e.CancelSetting="Cancel",e.SportsInput="searchsports",e.SportsSuggest="suggestresult",e.SportsSuggestUrl="suggesturl",e.ConfidenceScoreKey="cs",e.PreviousMatch="previous",e.NextMatch="next",e.AddSports="FollowWizard",e.AddSportsMenu="FollowTeamOrLeague",e.FollowSports="Follow",e.GoBack="Goback",e.EditSports="FollowWizard",e.ClickCarouselDot="CarouselDotClick"}(s||(s={}));const c={League:"League",Team:"Team"},d={Dislike:"Dislike",Follow:"Follow"},l="#",u=(e,t,i,n,a)=>{if(!(e&&t&&i&&n))return;const r=t||[],c=i||{},d=n.leagueName,l=n.leagueId,u=c.cardTitleClickthroughUrl,g=c.seeMoreClickthroughUrl,p=h(s.SportsCard,e,{category:d,headline:d},a),m=h(s.Header,e,{headline:d,id:l,type:o.c.StructuredData,category:d,destinationUrl:u},a),b=h(s.Customization,e,{headline:s.Customization,id:s.Customization,category:d},a),f=h(s.SeeMore,e,{headline:d,id:l,type:o.c.StructuredData,category:d,destinationUrl:g},a),v=h(s.MoreSettings,e,{category:d},a),y=h(s.HideCard,e,{category:d},a),S=h(s.HideSports,e,{category:d},a),O=new Map,T=new Map;r.forEach(t=>{if(!t.sportsMatchData.matchClickthroughUrl)return;const i=t.sportsMatchTelemetryData.gameId,n=t.sportsMatchData.gameStateCatetory,r=h(s.Game,e,{category:n,headline:d,gameId:i,destinationUrl:t.sportsMatchData.matchClickthroughUrl},a);O.set(t.sportsMatchData.matchClickthroughUrl,r.getMetadataTag()),T.set(i,r)});const w=h(s.SaveSetting,e,{headline:d,id:l,type:o.c.StructuredData,category:d},a),C=h(s.CancelSetting,e,{headline:d,id:l,type:o.c.StructuredData,category:d},a),j=h(s.SportsInput,e,{headline:d,id:l,type:o.c.StructuredData,category:d},a),I=h(s.SportsSuggest,e,{headline:d,id:l,type:o.c.StructuredData,category:d},a),x=h(s.PreviousMatch,e,{headline:d,id:l,type:o.c.StructuredData,category:d},a),k=h(s.NextMatch,e,{headline:d,id:l,type:o.c.StructuredData,category:d},a),P=h(s.AddSports,e,{headline:d,id:l,type:o.c.StructuredData,category:d},a),E=h(s.AddSportsMenu,e,{headline:d,id:l,type:o.c.StructuredData,category:d},a),D=h(s.FollowSports,e,{headline:d,id:l,type:o.c.StructuredData,category:d},a),A=h(s.GoBack,e,{headline:d,id:l,type:o.c.StructuredData,category:d},a),M=h(s.EditSports,e,{category:d,headline:d},a),F=h(s.ClickCarouselDot,e,{category:d,headline:d},a);return{componentRoot:e,sportsCard:p,destinations:O,games:T,header:m,actionButton:b,seeMore:f,menuMoreSettings:v,menuHideCard:y,menuHideSports:S,saveSetting:w,cancelSetting:C,sportsInput:j,sportsSuggest:I,previousMatch:x,nextMatch:k,addSports:P,menuAddSports:E,followSports:D,goBack:A,editSports:M,clickCarouselDot:F}};function h(e,t,i,n){if(!t||!i||!i.category)return null;const a=t.addOrUpdateChild({name:s.SportsCard,type:o.e.Module}),r={contentVertical:s.Vertical,category:i.category};switch(e){case s.SportsCard:return a.addOrUpdateChild({name:s.SportsCard,content:{vertical:r.contentVertical,category:r.category,type:o.c.StructuredData,id:""},ext:n},i.savedChildObject);case s.Header:return a.addOrUpdateChild({name:s.Header,behavior:o.b.Navigate,destinationUrl:i.destinationUrl,content:{vertical:r.contentVertical,category:r.category,headline:i.headline,type:o.c.StructuredData,id:""},ext:n},i.savedChildObject);case s.SeeMore:return a.addOrUpdateChild({name:s.SeeMore,behavior:o.b.Navigate,destinationUrl:i.destinationUrl,content:{vertical:r.contentVertical,category:r.category,headline:i.headline,type:o.c.StructuredData,id:""},ext:n},i.savedChildObject);case s.Game:return a.addOrUpdateChild({name:s.Game,behavior:o.b.Navigate,destinationUrl:i.destinationUrl,content:{vertical:r.contentVertical,category:r.category,headline:i.headline,type:o.c.StructuredData,id:""},ext:n},i.savedChildObject);case s.Customization:return a.addOrUpdateChild({name:s.Customization,behavior:o.b.More,content:{headline:s.Customization,vertical:r.contentVertical,type:o.c.StructuredData,id:""},destinationUrl:"",type:o.e.Interaction,ext:n},i.savedChildObject);case s.MoreSettings:return a.addOrUpdateChild({name:s.MoreSettings,content:{headline:s.MoreSettings,vertical:r.contentVertical,type:o.c.StructuredData,id:""},overrideDestinationUrl:(window.location.origin||"")+"/personalize",type:o.e.ActionButton,ext:n},i.savedChildObject);case s.HideCard:return a.addOrUpdateChild({name:s.HideCard,behavior:o.b.Hide,content:{headline:s.HideCard,vertical:r.contentVertical,type:o.c.StructuredData,id:""},destinationUrl:"",type:o.e.ActionButton,ext:n},i.savedChildObject);case s.HideSports:return a.addOrUpdateChild({name:s.HideSports,behavior:o.b.Hide,content:{headline:s.HideSports,vertical:r.contentVertical,type:o.c.StructuredData,id:""},destinationUrl:"",type:o.e.ActionButton,ext:n},i.savedChildObject);case s.PreviousMatch:return a.addOrUpdateChild({name:s.PreviousMatch,behavior:o.b.Navigate,content:{headline:s.PreviousMatch,vertical:r.contentVertical,type:o.c.StructuredData,id:""},destinationUrl:"",type:o.e.ActionButton,ext:n},i.savedChildObject);case s.NextMatch:return a.addOrUpdateChild({name:s.NextMatch,behavior:o.b.Navigate,content:{headline:s.NextMatch,vertical:r.contentVertical,type:o.c.StructuredData,id:""},destinationUrl:"",type:o.e.ActionButton,ext:n},i.savedChildObject);case s.SaveSetting:return a.addOrUpdateChild({name:s.SaveSetting,behavior:o.b.Save,content:{headline:s.SaveSetting,vertical:r.contentVertical,type:o.c.StructuredData,id:""},destinationUrl:"",type:o.e.ActionButton,ext:n},i.savedChildObject);case s.CancelSetting:{const e=a.addOrUpdateChild({name:s.AddSports,action:o.a.View,type:o.e.Module});return e.addOrUpdateChild({name:s.CancelSetting,behavior:o.b.Cancel,content:{headline:s.CancelSetting,vertical:r.contentVertical,type:o.c.StructuredData,id:""},destinationUrl:"",type:o.e.ActionButton,ext:n},e)}case s.SportsInput:return a.addOrUpdateChild({name:s.SportsInput,content:{headline:s.SportsInput,vertical:r.contentVertical,type:o.c.StructuredData,id:""},destinationUrl:"",type:o.e.InputBox,ext:n},i.savedChildObject);case s.SportsSuggest:return a.addOrUpdateChild({name:s.SportsSuggest,content:{headline:s.SportsSuggest,vertical:r.contentVertical,type:o.c.StructuredData,id:""},destinationUrl:"",type:o.e.AutoSuggest,ext:n},i.savedChildObject);case s.AddSports:return a.addOrUpdateChild({name:s.AddSports,action:o.a.View,type:o.e.Module});case s.AddSportsMenu:return a.addOrUpdateChild({name:s.AddSportsMenu,behavior:o.b.Open,content:{headline:s.AddSportsMenu,vertical:r.contentVertical,type:o.c.StructuredData,id:""},destinationUrl:"",type:o.e.ActionButton,ext:n},i.savedChildObject);case s.FollowSports:return a.addOrUpdateChild({name:s.FollowSports,behavior:o.b.Follow,content:{headline:s.FollowSports,vertical:r.contentVertical,type:o.c.StructuredData,id:""},destinationUrl:"",type:o.e.ActionButton,ext:n},i.savedChildObject);case s.GoBack:return a.addOrUpdateChild({name:s.GoBack,behavior:o.b.Navigate,content:{headline:s.GoBack,vertical:r.contentVertical,type:o.c.StructuredData,id:""},destinationUrl:"",type:o.e.Interaction,ext:n},i.savedChildObject);case s.EditSports:return a.addOrUpdateChild({name:s.EditSports,content:{vertical:r.contentVertical,category:r.category,type:o.c.StructuredData,id:""},ext:n},i.savedChildObject);case s.ClickCarouselDot:return a.addOrUpdateChild({name:s.ClickCarouselDot,content:{vertical:r.contentVertical,category:r.category,type:o.c.StructuredData,id:""},ext:n},i.savedChildObject)}}const g=(e,t,i=!1)=>{if(!e||!t)return null;const n=e.addOrUpdateChild({name:i?s.AddSports:s.SportsCard,action:o.a.View,type:o.e.Module});return{componentRoot:e,webSearchUrl:n.addOrUpdateChild({name:s.SportsSuggestUrl,behavior:o.b.Navigate,content:{headline:s.SportsSuggestUrl,vertical:s.Vertical,category:t.name,type:o.c.StructuredData,id:""},overrideDestinationUrl:t.webSearchUrl}),followEntity:n.addOrUpdateChild({name:s.FollowSports,behavior:o.b.Follow,content:{headline:t.name,vertical:s.Vertical,category:t.name,type:o.c.StructuredData,id:t.id},destinationUrl:""})}}},ac9z:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"d",(function(){return h})),i.d(t,"e",(function(){return g})),i.d(t,"b",(function(){return p})),i.d(t,"c",(function(){return m}));var n=i("D57K"),a=i("k3mM"),r=i("hOj1"),s=i("rvYQ"),o=i("zfSW"),c=i("l+Jz"),d=i("tWvP");const l="cbypass";let u=parseInt(Object(r.a)(l))||0;function h(){return Object(n.a)(this,void 0,void 0,(function*(){u=Date.now(),Object(d.a)(l,u.toString(),10/1440,s.a.HostPage.topDomain,"/"),yield a.b.purgeCacheAsync(a.a.river),Object(o.d)({id:c.a.UpdateMyFeed,payload:u})}))}function g(){return Object(n.a)(this,void 0,void 0,(function*(){u=Date.now(),Object(d.a)(l,u.toString(),10/1440,s.a.HostPage.topDomain,"/"),yield a.b.purgeCacheAsync(a.a.river)}))}function p(){return u}function m(e){u>0&&e.searchParams.set(l,u.toString())}},eAka:function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var n=i("Avji"),a=i("sydv");const r=(e,t,i,r,s)=>Object.assign(Object.assign({},Object(a.c)(e,i+" for CMS",(r||i)+" for CMS")),Object(n.b)(t,i+" for Git",(r||i)+" for Git",s))},f8ag:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n,a=i("rvYQ");!function(e){e.ImageSize={TopicCardImageStandardDimensions:{height:80,width:80},ContentCardImageStandardDimensions:{height:68,width:68},ContentCardProviderImgStandardDimensions:{height:16,width:16},SuggestionCardImgStandardDimensions:{height:42,width:42}},e.topicCardBackupImageUrl="https://img-s-msn-com.akamaized.net/tenant/amp/entityid/AAtCmK3.img",e.informationCardBingShoppingToggle="bingShoppingToggle",e.informationCardMoneyToggle="moneyToggle",e.informationCardSportsToggle="sportsToggle",e.informationCardEsportsToggle="esportsToggle",e.informationCardWeatherToggle="weatherToggle",e.informationCardQnaToggle="qnaToggle",e.informationCardRecipeToggle="recipeToggle",e.informationCardHoroscopeToggle="horoscopeToggle",e.informationCardOnThisDayToggle="onThisDayToggle",e.feedSettingReactionsToggle="reactionsToggle",e.feedSettingCommentsToggle="commentsToggle",e.defaultToastNotificationTimeoutMs=3e3,e.sectionVisibilityBufferPx=25,e.sidePaneLayoutResponsiveWidth=611,e.stickySearchHeights={c1:66,c2:82,default:100},e.searchBoxHalfHeight=70,e.defaultStickyHeaderHeightPx=158,e.oneColumnStickyHeaderHeightPx=50,e.sectionIds={followedInterests:"followed-interests",followedPublishers:"followed-publishers",recommendedTopics:"recommended-topics",discoverInterests:"discover-interests",savedStories:"saved-stories",mutedPublishers:"muted-publishers",readStories:"read-stories",tuneFeed:"tune-feed",notification:"notification",settings:"settings-root",feedSettings:"feed-settings-root"},e.settingsSectionIds={root:"settings-root",Sports:"sports-settings",Esports:"esports-settings",Weather:"weather-settings",Finance:"finance-settings",Shopping:"shopping-settings",Traffic:"traffic-settings",Market:"market-settings",Horoscope:"horoscope-settings",Qna:"qna-settings",Recipe:"recipe-settings",OnThisDay:"on-this-day"},e.feedSettingsSectionIds={root:"feed-settings-root",Reactions:"reactions-settings",Comments:"comments-settings"},e.defaultSelectedSection={Personalize:e.sectionIds.discoverInterests,MyInterests:e.sectionIds.discoverInterests,Setting:Object(a.b)().IsCnDomain?e.settingsSectionIds.root:e.settingsSectionIds.Market},e.SettingsOrder=["Weather","Finance","Sports","Esports","Traffic","Shopping","Horoscope","Qna","Recipe","OnThisDay"],e.FeedSettingsOrder=["Reactions","Comments"],e.SettingCardTelemetryMapping={Weather:e.informationCardWeatherToggle,Sports:e.informationCardSportsToggle,Esports:e.informationCardEsportsToggle,Finance:e.informationCardMoneyToggle,Shopping:e.informationCardBingShoppingToggle,Qna:e.informationCardQnaToggle,Recipe:e.informationCardRecipeToggle,Horoscope:e.informationCardHoroscopeToggle,OnThisDay:e.informationCardOnThisDayToggle},e.FeedSettingCardTelemetryMapping={Reactions:e.feedSettingReactionsToggle,Comments:e.feedSettingCommentsToggle},e.sidePaneWidth="305px",e.treeItemTag="FLUENT-TREE-ITEM",e.savesHash="#saves",e.publishersHash="#mutedPublishers",e.discoveryInterestsMenuId="menuItem-discover-interests",e.notificationMenuId="menuItem-notification",e.provideNameTag="provider",e.settingsRootMenuId="menuItem-settings-root",e.maxNumberOfResults=6,e.FluentTreeItemTagName="fluent-item-tree",e.MutedPublishersId="mutedpublishers",e.MsftPublishersCardTagName="msft-publishers-card",e.MutedPublishersMenuItemId="menuItem-muted-publishers"}(n||(n={}))},fNg4:function(e,t,i){"use strict";var n;i.d(t,"b",(function(){return v})),i.d(t,"a",(function(){return n})),function(e){e.More="More",e.Mute="Mute"}(n||(n={}));var a=i("D57K"),r=i("y+Kz"),s=i("rvYQ"),o=i("I6Lx"),c=i("6ADy"),d=i("msIb"),l=i("KETb"),u=i("ac9z"),h=i("tERu"),g=i("/+Un"),p=i("fuIx"),m=i("e8jz"),b=i("CzGr"),f=i("Zsg4");class v{constructor(e,t=!0){this.fetchImpl=e,this.addPageInfoToOcid=t,this.followedPublishersEndpoint="v1/News/Users/Me/PreferredProviders",this.publishersServiceEndpoint="Msn/Providers",this.actionsServiceEndpoint="Graph/Actions",this.ocid="feeds"}getUserMutedPublishers(){return Object(a.a)(this,void 0,void 0,(function*(){const e=yield this.getUserActions(n.Mute);if(!e||!e.value)return null;if(!e.value.length)return[];const t=e.value.reduce((e,t)=>(e[t.targetId]=t,e),{}),i=yield this.getPublisherDetails(Object.keys(t));if(!i||!i.value||!i.value.length)return null;return i.value.map(e=>{const i={createdDateTime:t[e.id].createdDateTime};return Object.assign(Object.assign({},e),i)})}))}getUserFollowedPublishers(e=100){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.getRequestInit(),i=[...yield this.getCommonParams(),{key:r.t.top,value:""+e}],n=Object(c.c)(this.followedPublishersEndpoint);this.appendQs(i,n),Object(p.b)()||Object(u.c)(n);const a=yield this.sendRequest(decodeURIComponent(n.href),t,"getFollowedPublishers");return null==a?void 0:a.value}))}publisherUserAction(e,t,i){return Object(a.a)(this,void 0,void 0,(function*(){if(!e||!t)return null;const n=yield this.getRequestInit();n.method=i;let a=yield this.getCommonParams();"POST"===i?n.body=JSON.stringify({actionType:t,targetId:e,targetType:"SourceProvider"}):"DELETE"===i&&(a=[...a,{key:r.t.filter,value:`actionType eq '${t}' and targetId eq '${e}'`}]);const s=Object(c.c)(this.actionsServiceEndpoint);this.appendQs(a,s);const o=yield this.sendRequest(decodeURIComponent(s.href),n,"deleteUserAction "+t,!0,!0);if(o.status>=400){const i=`OneService returned error response. Status: ${o.status} for actionType: ${t}, targetId: ${e}`;throw new Error(i)}return o}))}getUserPublisherStatus(e,t){var i;return Object(a.a)(this,void 0,void 0,(function*(){const n=yield this.getRequestInit();n.method="GET";const a=[...yield this.getCommonParams(),{key:r.t.filter,value:`actionType eq '${t}' and targetId eq '${e}'`}],s=Object(c.c)(this.actionsServiceEndpoint);this.appendQs(a,s),Object(p.b)()||Object(u.c)(s);const o=yield this.sendRequest(decodeURIComponent(s.href),n,"getUserPublisherStatus "+t);return!!(null===(i=o.value)||void 0===i?void 0:i.length)}))}getUserActions(e,t=100){return Object(a.a)(this,void 0,void 0,(function*(){const i=yield this.getRequestInit(),n=[...yield this.getCommonParams(),{key:r.t.filter,value:`actionType eq '${e}' and deleted eq false`},{key:r.t.top,value:""+t}],a=Object(c.c)(this.actionsServiceEndpoint);return this.appendQs(n,a),Object(p.b)()||Object(u.c)(a),yield this.sendRequest(decodeURIComponent(a.href),i,"getUserActions "+e)}))}getPublisherDetails(e){return Object(a.a)(this,void 0,void 0,(function*(){const t=yield this.getRequestInit(),i=Object(c.c)(this.publishersServiceEndpoint),n=[...d.a.getOneServiceParamsWithoutAuth(null,this.ocid,this.addPageInfoToOcid),{key:r.t.ids,value:e.join(",")}];return this.appendQs(n,i),yield this.sendRequest(decodeURIComponent(i.href),t,"getPublisherDetails")}))}getCommonParams(){return Object(a.a)(this,void 0,void 0,(function*(){if(Object(p.b)())return this.getSapphireQueryParams();return(yield this.isUserSignedIn())?d.a.getOneServiceParamsWithAuth(s.a.UserId,this.ocid,this.addPageInfoToOcid):d.a.getOneServiceParamsWithoutAuth(s.a.UserId,this.ocid,this.addPageInfoToOcid)}))}getSapphireQueryParams(){const e=d.a.getOneServiceNonDynamicParamsWithoutAuth(this.ocid,this.addPageInfoToOcid),t=Object(m.b)();return t&&(e.push({key:r.t.market,value:t.market}),e.push({key:r.t.fdhead,value:t.features}),e.push({key:r.t.activityId,value:t.activityId}),t.latitude&&t.longitude&&e.push({key:r.t.location,value:`${t.latitude}|${t.longitude}`})),e}getRequestInit(e=null){return Object(a.a)(this,void 0,void 0,(function*(){return null==e&&(e={method:"GET"}),(yield this.isUserSignedIn())&&(e.credentials="include"),e.headers=Object(p.b)()?yield Object(b.a)():yield d.a.getOneServiceHeaders(),e}))}isUserSignedIn(){return Object(a.a)(this,void 0,void 0,(function*(){const e=Object(o.a)().UserIsSignedIn;if(void 0!==e)return e;return(yield Object(g.d)())===h.c.SignedIn}))}sendRequest(e,t,i,n,r){return Object(a.a)(this,void 0,void 0,(function*(){return Object(p.b)()?yield this.sapphireRequest(decodeURIComponent(e),t):yield this.networkRequest(decodeURIComponent(e),t,i,n,r)}))}sapphireRequest(e,t){return Object(a.a)(this,void 0,void 0,(function*(){const i={url:e,headers:t.headers,body:t.body,refresh:!0};let n;switch(t.method){case"POST":n=yield Object(f.j)(i);break;case"DELETE":n=yield Object(f.a)(i);break;default:n=yield Object(f.c)(i)}return JSON.parse(n||"{}")}))}networkRequest(e,t,i,n,r){return Object(a.a)(this,void 0,void 0,(function*(){return Object(l.b)(()=>Object(a.a)(this,void 0,void 0,(function*(){const i=yield this.fetchImpl(e,t);if(!i.ok)throw Error(i.statusText);return n&&Object(u.d)(),r?i:i.json()})),i)}))}appendQs(e,t){e.forEach(e=>{e.value&&t.searchParams.set(e.key,e.value)})}}},h3hC:function(e,t,i){"use strict";var n,a;i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return a})),function(e){e[e.none=0]="none",e[e.enabled=1]="enabled",e[e.saved=2]="saved",e[e.hide=4]="hide",e[e.showMore=8]="showMore",e[e.showFewer=16]="showFewer",e[e.mute=32]="mute",e[e.hidden=64]="hidden",e[e.report=128]="report",e[e.adFeedbackSubmitted=256]="adFeedbackSubmitted",e[e.saveHovered=512]="saveHovered",e[e.seeMoreHovered=1024]="seeMoreHovered",e[e.follow=2048]="follow"}(n||(n={})),function(e){e.Hide="Hide",e.Like="Like",e.Dislike="Dislike",e.Mute="Mute",e.Save="Save",e.Share="Share",e.ShowMore="ShowMore",e.ShowFewer="ShowFewer",e.Divider="Divider",e.Report="Report",e.ManageInterests="ManageInterests",e.ReportAd="ReportAd",e.AdPrivacy="AdPrivacy",e.Follow="Follow"}(a||(a={}))},hSGL:function(e,t,i){"use strict";i.d(t,"a",(function(){return y}));var n=i("D57K"),a=i("tERu"),r=i("ypwz"),s=i("tMmC"),o=i("HxRh"),c=i("XlyT"),d=i("rvYQ"),l=i("zfSW"),u=i("msIb"),h=i("6ADy"),g=i("KETb"),p=i("u8F0"),m=i("u5KZ"),b=i("l+Jz"),f=i("HDSB"),v=i("/+Un");const y=new class extends class{constructor(e){this.fetchImpl=e,this.userUpdateEndpoint="msn/user",this.pdpServiceEndpoint="graph/actions",this.followServiceEndPoint="v1/news/users/me/preferences",this.locationsServiceEndPoint="v1/news/users/me/locations",this.ocid="Peregrine",this.ocidOverride=!1}getUserDefaultLocation(e){return Object(n.a)(this,void 0,void 0,(function*(){const t={method:"GET",headers:yield u.a.getOneServiceHeaders(),credentials:"include"},i=Object(h.c)(this.locationsServiceEndPoint);let a;[...u.a.getCommonParams2(this.ocid,!this.ocidOverride),{key:"autodetect",value:e&&""+e}].forEach(e=>{e.value&&i.searchParams.set(e.key,e.value)});try{a=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(i.href,t);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: getUserDefaultLocation}`;throw new Error(t)}return e})),"getUserDefaultLocation")}catch(e){return a}return a}))}addToFavoriteLocation(e,t){return Object(n.a)(this,void 0,void 0,(function*(){const i={method:"POST",body:JSON.stringify({actionType:"Follow",targetType:"Location",definitionName:t,degree:"FavoriteLocation",metaData:e}),headers:yield u.a.getOneServiceHeaders(),credentials:"include"},r=Object(h.c)(this.pdpServiceEndpoint);let s;((yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&r.searchParams.set(e.key,e.value)});try{s=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(r.href,i);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: Location`;throw new Error(t)}return e.json()})),"addToFavoriteLocation")}catch(e){return!1}return!0}))}removeFavoriteLocation(e){return Object(n.a)(this,void 0,void 0,(function*(){return yield this.deleteFromPdp(p.a.Location,"definitionName",[e])}))}updatePdpHomeLocation(e,t,i={},r){return Object(n.a)(this,void 0,void 0,(function*(){const s=p.a.Location,o=yield this.getRequestInit({method:"POST"},i);o.body=JSON.stringify({actionType:"Follow",targetType:s,definitionName:t,degree:"DefaultLocation",metaData:e});const c=Object(h.c)(this.pdpServiceEndpoint);return((yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(null!=r?r:Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(null!=r?r:Object(d.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&c.searchParams.set(e.key,e.value)}),yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(c.href,o);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${s}`;throw new Error(t)}return e})),"setPdpHomeLocation"),this.tryInvalidateBulkFetchedPdpTargetType(s),!0}))}updateCommuteLocation(e,t,i,r,s){return Object(n.a)(this,void 0,void 0,(function*(){const o=p.a.Traffic,c={method:"POST",body:JSON.stringify({actionType:"Follow",targetType:o,degree:e?"HomeLocation":"WorkLocation",definitionName:t,metadata:{OriginalName:i,Address:{SingleLine:r},formattedAddress:r}}),headers:yield u.a.getOneServiceHeaders(),credentials:"include"},l=Object(h.c)(this.pdpServiceEndpoint);let m;[...(yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride),...s].forEach(e=>{e.value&&l.searchParams.set(e.key,e.value)});try{m=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(l.href,c);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${o}`;throw new Error(t)}return e.json()})),"updateCommuteLocation"),this.tryInvalidateBulkFetchedPdpTargetType(o)}catch(e){return!1}return!0}))}deleteCommuteLocation(e,t,i){return Object(n.a)(this,void 0,void 0,(function*(){const r={method:"DELETE",headers:yield this.getOneserviceHeaders(),credentials:"include"},s=Object(h.c)(this.pdpServiceEndpoint),o=(yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride),c=`targetType eq '${p.a.Traffic}'`,l=`definitionName eq '${t}'`,m=`degree eq '${e?"HomeLocation":"WorkLocation"}'`;s.searchParams.set("$filter",`actionType eq 'Follow' and (${l}) and (${c}) and (${m})`),[...o,...i].forEach(e=>{e.value&&s.searchParams.set(e.key,e.value)});try{yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(s.href,r);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${p.a.Traffic}`;throw new Error(t)}return e})),"deleteTrafficFromPdp"),this.tryInvalidateBulkFetchedPdpTargetType(p.a.Traffic)}catch(e){return!1}return!0}))}addToWatchList(e,t=0,i={}){return Object(n.a)(this,void 0,void 0,(function*(){const r=p.a.Finance,s={method:"POST",body:JSON.stringify({actionType:"Follow",targetType:r,targetId:e,metadata:{securityType:t,tickerId:this.generateUUID()}}),headers:yield this.getOneserviceHeaders(i),credentials:"include"},o=Object(h.c)(this.pdpServiceEndpoint),c="zh-cn"!==Object(d.b)().CurrentMarket;let l;((yield Object(v.d)())===a.c.SignedIn&&c?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&o.searchParams.set(e.key,e.value)});try{l=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(o.href,s);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${r}`;throw new Error(t)}return e.json()})),"addToWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(r)}catch(e){return!1}return!0}))}generateUUID(){let e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){const i=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?i:3&i|8).toString(16)}))}sortWatchList(e,t={}){return Object(n.a)(this,void 0,void 0,(function*(){const i=p.a.Finance,r=yield y.readPdpWithTargetType(p.a.Finance,!0,200,t),s=r&&r.value;if(s.length!=e.length)return!1;const o={};e.forEach((e,t)=>{const n=s.filter(t=>t.targetId===e)[0];if(!n)return!1;o[e]=JSON.stringify({actionType:"Follow",targetId:e,targetType:i,rank:t,metadata:n.metadata})});const c={method:"PUT",body:JSON.stringify(o),headers:yield this.getOneserviceHeaders(t),credentials:"include"},l=Object(h.c)(this.pdpServiceEndpoint);((yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&l.searchParams.set(e.key,e.value)});try{yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(l.href,c);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for actionType: Follow, targetType: ${i}`;throw new Error(t)}return e.json()})),"sortWatchList"),this.tryInvalidateBulkFetchedPdpTargetType(p.a.Finance)}catch(e){return!1}return!0}))}updateWeatherSettings(e,t,i={},r){return Object(n.a)(this,void 0,void 0,(function*(){if(!e&&!t)return!0;let n="";n=e&&!t?'{"weatherDisplayUnit":"'+e+'"}':!e&&t?'{"userSettings":{"weatherLocationSettingMode":"'+t+'"}}':'{"weatherDisplayUnit":"'+e+'","userSettings":{"weatherLocationSettingMode":"'+t+'"}}';const s=yield this.getRequestInit({method:"POST"},i);s.body=n;const o=Object(h.c)(this.userUpdateEndpoint);((yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(null!=r?r:Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(null!=r?r:Object(d.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&o.searchParams.set(e.key,e.value)});const c=yield this.fetchImpl(o.href,s);if(c.status>=400){const e=`OneService returned error response. Status: ${c.status} for update weather setting call`;throw new Error(e)}return!0}))}getPdpUserPreference(e={}){return Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.getRequestInit({method:"GET"},e),i=Object(h.c)(this.userUpdateEndpoint);[...(yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride)].forEach(e=>{e.value&&i.searchParams.set(e.key,e.value)});try{const e=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(i.href,t);if(!e.ok){if(e.status>=400&&e.status<500&&408!=e.status)return e;throw Error(e.statusText)}return e})),"readPDPData");if(!e.ok)throw Error(`code=${e.status}, ${e.statusText}`);return yield e.json()}catch(e){return s.a.logError(e.message),null}}))}updatePdpLayoutPreference(e){return Object(n.a)(this,void 0,void 0,(function*(){const t={method:"PUT",credentials:"include",body:JSON.stringify({dummyid:{userLayoutPreference:e}})},i=Object(h.c)(this.userUpdateEndpoint);((yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&i.searchParams.set(e.key,e.value)});try{const e=yield this.fetchImpl(i.href,t);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for update layout preference setting call`;throw new Error(t)}}catch(e){return s.a.logError(e.message),!1}return!0}))}updateSegmentCardsEnableStatus(e){return Object(n.a)(this,void 0,void 0,(function*(){if(!e&&!e.length)return!0;const t='{"segmentCardSettings":"{'+e.map(e=>`\\"${e.cardType}\\":${e.enabled?'\\"1\\"':'\\"0\\"'}`).join(",")+'}"}';return this.updateUserPreference(t)}))}updateCommunitySettingsOptOutStatus(e){return Object(n.a)(this,void 0,void 0,(function*(){if(!e&&!e.length)return!0;const t={};e.forEach(e=>{t[e.settingType]=e.optedOut?"1":"0"});const i={communitySettings:t};return this.updateUserPreference(JSON.stringify(i))}))}updateUserPreference(e){return Object(n.a)(this,void 0,void 0,(function*(){const t={method:"POST",body:e,credentials:"include"},i=Object(h.c)(this.userUpdateEndpoint);((yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&i.searchParams.set(e.key,e.value)});try{const n=yield this.fetchImpl(i.href,t);if(n.status>=400){const t=`OneService returned error response while updating user preference. Status: ${n.status}, payload: ${e}`;throw new Error(t)}}catch(e){return!1}return!0}))}setPdpTargetTypesForBulkLoad(e){e&&e.length&&!this.bulkGraphActionTargetTypes&&(this.bulkGraphActionTargetTypes=e)}readPdpWithTargetType(e,t=!1,i,a={},r=!0){return Object(n.a)(this,void 0,void 0,(function*(){if(r){const t=yield this.getFromWebWorker(e);if(t)return t}if(this.bulkGraphActionTargetTypes&&this.bulkGraphActionTargetTypes.length)if(this.bulkGraphActionTargetTypes.indexOf(e)>=0){this.bulkGraphActionResultCache=this.bulkGraphActionResultCache||(yield this.bulkGraphActionPromise||(this.bulkGraphActionPromise=this.fetchPdpWithTargetTypes(this.bulkGraphActionTargetTypes,t,i)));const n=this.bulkGraphActionResultCache.get(e);if(n)return{value:n}}else m.a.sendAppErrorEvent(Object.assign(Object.assign({},o.Mh),{message:`Received an unknown target type "${e}" that was not in the bulk graph action target types list "${this.bulkGraphActionTargetTypes}". Falling back to new network call. Please update the EntryPoint config's "graphActionsToBulkLoad" property to include this type.`}));const n=(yield this.fetchPdpWithTargetTypes([e],t,i,a)).get(e);if(n)return{value:n}}))}deleteFromPdp(e,t,i,r={}){return Object(n.a)(this,void 0,void 0,(function*(){const s={method:"DELETE",headers:yield this.getOneserviceHeaders(r),credentials:"include"},o=Object(h.c)(this.pdpServiceEndpoint),c=(yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride),l=`targetType eq '${e}'`,p=i.map(e=>`${t} eq '${e}'`).join(" or ");o.searchParams.set("$filter",`actionType eq 'Follow' and (${p}) and (${l})`),c.forEach(e=>{e.value&&o.searchParams.set(e.key,e.value)});try{yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const t=yield this.fetchImpl(o.href,s);if(t.status>=400){const i=`OneService returned error response. Status: ${t.status} for actionType: Follow, targetType: ${e}`;throw new Error(i)}return t})),"deleteFromPdp"),this.tryInvalidateBulkFetchedPdpTargetType(e)}catch(e){return!1}return!0}))}tryInvalidateBulkFetchedPdpTargetType(e){this.bulkGraphActionResultCache&&this.bulkGraphActionResultCache.delete(e)}fetchPdpWithTargetTypes(e,t=!1,i,r={}){return Object(n.a)(this,void 0,void 0,(function*(){if(!e.length)return new Map;const s=e.map(e=>`targetType eq '${e}'`).join(" or "),o=[{key:"$top",value:""+(i=i||10*e.length*2)},{key:"$filter",value:`actionType eq 'Follow' and (${s})`}],c=yield this.getRequestInit({method:"GET"},r);!0===t&&(c.cache="no-store");const l=Object(h.c)(this.pdpServiceEndpoint);[...o,...(yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride)].forEach(e=>{e.value&&l.searchParams.set(e.key,e.value)});const p=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(l.href,c);if(!e.ok){if(e.status>=400&&e.status<500&&408!=e.status)return e;throw Error(e.statusText)}return e})),"readPDPData");if(!p.ok)throw Error(`code=${p.status}, ${p.statusText}`);const m=new Map,b=yield p.json();if(!b)return m;if(b.value)for(const e of b.value){let t=m.get(e.targetType);t||m.set(e.targetType,t=[]),t.push(e)}for(const t of e)m.get(t)||m.set(t,[]);return m}))}updateMarketPreference(e){return Object(n.a)(this,void 0,void 0,(function*(){const t={method:"POST",credentials:"include",body:JSON.stringify({userSettings:{preferredMarket:e}})},i=Object(h.c)(this.userUpdateEndpoint);((yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&i.searchParams.set(e.key,e.value)});try{const e=yield this.fetchImpl(i.href,t);if(!e.ok)throw new Error("Failed to update market preference: Status: "+e.status);return!0}catch(e){return s.a.logError(e.message),!1}}))}getFromWebWorker(e){return Object(n.a)(this,void 0,void 0,(function*(){let t=null;if(l.c){const i=this.maptoWebWorkerId(e);if(i&&i.trim()){const i=yield Object(l.b)({id:this.maptoWebWorkerId(e)});i.fetched&&(t=i.payload)}}return t}))}maptoWebWorkerId(e){switch(e){case p.a.Location:return b.a.WeatherPdp;case p.a.League:return b.a.SportsLeaguePdp;case p.a.Player:return b.a.SportsPlayerPdp;case p.a.Team:return b.a.SportsTeamPdp;case p.a.Finance:return b.a.MoneyPdp;default:return""}}getRequestInit(e={method:"GET"},t={}){return Object(n.a)(this,void 0,void 0,(function*(){const i=yield u.a.getOneServiceHeaders();return e.headers=Object.assign(Object.assign({},i),t),e.credentials="include",e}))}getOneserviceHeaders(e={}){return Object(n.a)(this,void 0,void 0,(function*(){const t=yield u.a.getOneServiceHeaders();return Object.assign(Object.assign({},t),e)}))}getFollowedLists(){return Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.getRequestInit({method:"GET"}),t=Object(h.c)(this.followServiceEndPoint);[...(yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride)].forEach(e=>{e.value&&t.searchParams.set(e.key,e.value)});try{const i=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const i=yield this.fetchImpl(t.href,e);if(!i.ok){if(i.status>=400&&i.status<500&&408!=i.status)return i;Object(c.c)(null,o.Uc,"Error get followed list")}return i})),"getFollowedLists");return i.ok||Object(c.c)(null,o.Uc,"Error get followed list"),yield i.json()}catch(e){return s.a.logError(e.message),null}}))}addToFollowedLists(e){return Object(n.a)(this,void 0,void 0,(function*(){const t=p.a.Finance,i={method:"POST",body:JSON.stringify({financeListIds:e}),headers:yield u.a.getOneServiceHeaders(),credentials:"include"},r=Object(h.c)(this.followServiceEndPoint);let s;((yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride)).forEach(e=>{e.value&&r.searchParams.set(e.key,e.value)});try{s=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(r.href,i);if(e.status>=400){const i=`OneService returned error response. Status: ${e.status} for actionType: FollowList, targetType: ${t}`;throw new Error(i)}return e.json()})),"addToFollowedLists")}catch(e){return!1}return!0}))}deleteFromFollowedLists(e){return Object(n.a)(this,void 0,void 0,(function*(){const t=p.a.Finance,i={method:"DELETE",body:null,headers:yield u.a.getOneServiceHeaders(),credentials:"include"},r=Object(h.c)(this.followServiceEndPoint);let s;[...(yield Object(v.d)())===a.c.SignedIn?u.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride):u.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,!this.ocidOverride),...[{key:"financeListIds",value:e.toString()}]].forEach(e=>{e.value&&r.searchParams.set(e.key,e.value)});try{s=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(r.href,i);if(e.status>=400){const i=`OneService returned error response. Status: ${e.status} for actionType: UnFollowList, targetType: ${t}`;throw new Error(i)}return e.json()})),"deleteFromFollowedLists")}catch(e){return!1}return!0}))}}{constructor(){super(Object(f.a)()?window.fetch.bind(window):fetch),d.a.AppType!==r.a.WindowsNewsPlus&&d.a.AppType!==r.a.NewsAndInterests||(this.ocid="winp2",this.ocidOverride=!0)}}},hme2:function(e,t,i){"use strict";i.d(t,"a",(function(){return S}));var n=i("D57K"),a=i("OkDC"),r=i("tMmC"),s=i("HxRh"),o=i("ypwz"),c=i("tERu"),d=i("rvYQ"),l=i("msIb"),u=i("6ADy"),h=i("/+Un"),g=i("KETb");class p{constructor(e){this.fetchImpl=e,this.actionsEndpoint="./Graph/Actions",this.defaultOcid="Peregrine"}sendPostActionRequest(e,t=this.defaultOcid,i=!0){return Object(n.a)(this,void 0,void 0,(function*(){const a=JSON.stringify(e),r={method:"POST",body:a,headers:yield l.a.getOneServiceHeaders()};(yield Object(h.e)())&&(r.credentials="include");const s=Object(u.c)(this.actionsEndpoint);(yield l.a.getCommonParams2(t,i)).forEach(e=>e.value&&s.searchParams.set(e.key,e.value));return yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(s.href,r);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for Post request: ${s.href} with params ${JSON.stringify(r)}`;throw new Error(t)}return e})),"postAction"+a)}))}sendDeleteActionRequest(e,t=this.defaultOcid,i=!0){return Object(n.a)(this,void 0,void 0,(function*(){const a=yield l.a.getBaseRequestData("DELETE");(yield Object(h.e)())&&(a.credentials="include");let r="";const s=Object.keys(e),o=s.length;for(let t=0;t<o;t++)r+=`${s[t]} eq '${e[s[t]]}'`,t!=o-1&&o>1&&(r+=" and ");const c={key:"$filter",value:r},d=Object(u.c)(this.actionsEndpoint);[c,...yield l.a.getCommonParams2(t,i)].forEach(e=>e.value&&d.searchParams.set(e.key,e.value));return yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(d.href,a);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for Delete request: ${d.href} with params: ${JSON.stringify(a)}`;throw new Error(t)}return e})),"deleteAction"+r)}))}}var m=i("u5KZ"),b=i("ac9z"),f=i("HDSB");class v extends class{constructor(e){this.fetchImpl=e,this.ocid="feeds",this.freServiceEndpoint="news/fre",this.userEndpoint="./msn/user",this.addPageInfoToOcid=!0,this.actionsClient=new p(e),d.a.AppType!==o.a.NewsAndInterests&&d.a.AppType!==o.a.WindowsNewsPlus||(this.addPageInfoToOcid=!1,this.ocid="winp2")}getFreArtifacts(){return Object(n.a)(this,void 0,void 0,(function*(){const e=Object(u.c)(this.freServiceEndpoint);e.searchParams.set("bypass_trigger","true");return[...(yield Object(h.d)())===c.c.SignedIn?l.a.getOneServiceParamsWithAuth(Object(d.b)().UserId,this.ocid,this.addPageInfoToOcid):l.a.getOneServiceParamsWithoutAuth(Object(d.b)().UserId,this.ocid,this.addPageInfoToOcid),{key:b.a,value:Date.now().toString()}].forEach(t=>{t.value&&e.searchParams.set(t.key,t.value)}),this.getFreArtifactsWithUrl(e.href)}))}getFreArtifactsWithUrl(e){return Object(n.a)(this,void 0,void 0,(function*(){if(!e||"-1"===e)return null;const t={method:a.d.Get,credentials:"include",headers:yield l.a.getOneServiceHeaders()};try{const i=yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){return yield this.fetchImpl(e,t)})),"getFreArtifacts");if(!i.ok)throw Error("[FreServiceClient.getFreArtifacts] Failed with response: "+JSON.stringify(i));const a=i.headers&&i.headers.get("ddd-tmpl");return m.a.addOrUpdateTmplString(a),i.json()}catch(e){throw r.a.logError(e.message),e}}))}setFreArtifactForUser(e,t){return Object(n.a)(this,void 0,void 0,(function*(){if(e&&t){const i={method:t,credentials:"include",headers:yield l.a.getOneServiceHeaders()};Object(u.c)(this.freServiceEndpoint);let a=0;try{if(a=(yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){return yield this.fetchImpl(e,i)})),"setFreArtifact")).status,a>=400){const e=`OneService returned error response. Status: ${a} for done action`;throw new Error(e)}}catch(e){return r.a.logError(e.message),a}return a}return m.a.sendAppErrorEvent(Object.assign(Object.assign({},s.Lg),{message:`Any of the required parameters was not properly set by the caller. callbackUrl: ${e} method: ${t}.`})),0}))}updateArtifactInActionsEndpoint(e,t){return Object(n.a)(this,void 0,void 0,(function*(){let i;a.a[e.type]&&(i=Object.assign({},a.a[e.type])),i.targetId=e.id;try{t?yield this.actionsClient.sendPostActionRequest(i,this.ocid,this.addPageInfoToOcid):yield this.actionsClient.sendDeleteActionRequest(i,this.ocid,this.addPageInfoToOcid),Object(b.d)()}catch(i){m.a.sendAppErrorEvent(Object.assign(Object.assign({},s.je),{message:"Fre Actions call failed",pb:Object.assign(Object.assign({},s.je.pb),{customMessage:`artifact: ${JSON.stringify(e)} following: ${t} error message: ${i}`})}))}}))}setDoneFreState(){return Object(n.a)(this,void 0,void 0,(function*(){yield this.setFreState(JSON.stringify({stage:a.b}),s.Gb)}))}setMaybeLaterFreState(){return Object(n.a)(this,void 0,void 0,(function*(){yield this.setFreState(JSON.stringify({dismiss_timestamp:new Date(Date.now()).toJSON()}),s.le)}))}setFreState(e,t){return Object(n.a)(this,void 0,void 0,(function*(){const i={method:"POST",body:JSON.stringify({freMultiStepState:e}),headers:yield l.a.getOneServiceHeaders()};(yield Object(h.d)())===c.c.SignedIn&&(i.credentials="include");const a=Object(u.c)(this.userEndpoint);(yield l.a.getCommonParams2(this.ocid,this.addPageInfoToOcid)).forEach(e=>e.value&&a.searchParams.set(e.key,e.value));try{yield Object(g.b)(()=>Object(n.a)(this,void 0,void 0,(function*(){const e=yield this.fetchImpl(a.href,i);if(e.status>=400){const t=`OneService returned error response. Status: ${e.status} for call to set user state`;throw new Error(t)}return e.json()})),"sendFreDoneAction")}catch(i){m.a.sendAppErrorEvent(Object.assign(Object.assign({},t),{message:"Service call to set fre state failed",pb:Object.assign(Object.assign({},t.pb),{customMessage:`state: ${e} error: ${i}`})}))}}))}}{constructor(e){let t;t=e||(Object(f.a)()?window.fetch.bind(window):fetch),super(t)}}let y;const S=e=>y||(y=new v(e),y)},kS2v:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var n=i("D57K"),a=i("P4Ao"),r=i("QBS5"),s=i("oePG");class o extends a.a{constructor(){super(...arguments),this.followed=!1,this.enableNavToXfeed=!1}toggleFollow(){this.followed=!this.followed,this.$emit("follow-state-changed")}topicSelected(){this.$emit("topic-selected")}}Object(n.d)([Object(r.b)({attribute:"follow-button-telemetry-tag"})],o.prototype,"followButtonTelemetryTag",void 0),Object(n.d)([Object(r.b)({attribute:"follow-format-aria-label"})],o.prototype,"followFormatAriaLabel",void 0),Object(n.d)([Object(r.b)({attribute:"follow-format-text"})],o.prototype,"followFormatText",void 0),Object(n.d)([Object(r.b)({attribute:"img-alt-text"})],o.prototype,"imgAltText",void 0),Object(n.d)([Object(r.b)({attribute:"img-src"})],o.prototype,"imgSrc",void 0),Object(n.d)([Object(r.b)({attribute:"followed",mode:"boolean"})],o.prototype,"followed",void 0),Object(n.d)([Object(r.b)({attribute:"topic-id"})],o.prototype,"topicId",void 0),Object(n.d)([Object(r.b)({attribute:"topic-title"})],o.prototype,"topicTitle",void 0),Object(n.d)([Object(r.b)({attribute:"unfollow-button-telemetry-tag"})],o.prototype,"unfollowButtonTelemetryTag",void 0),Object(n.d)([Object(r.b)({attribute:"unfollow-format-aria-label"})],o.prototype,"unfollowFormatAriaLabel",void 0),Object(n.d)([Object(r.b)({attribute:"unfollow-format-text"})],o.prototype,"unfollowFormatText",void 0),Object(n.d)([Object(r.b)({attribute:"enable-nav-to-xfeed",mode:"boolean"})],o.prototype,"enableNavToXfeed",void 0),Object(n.d)([Object(r.b)({attribute:"content-link-format-text"})],o.prototype,"contentLinkFormatText",void 0),Object(n.d)([Object(r.b)({attribute:"content-link-button-telemetry-tag"})],o.prototype,"contentLinkButtonTelemetryTag",void 0),Object(n.d)([s.d],o.prototype,"imgOnloadCallback",void 0);var c=i("kL0l"),d=i("wHpb"),l=i("CzTk"),u=i("oqLQ"),h=i("4X57"),g=i("j9Xn");const p=h.a`
    .follow-btn.topic-item {
        border-left: calc(var(--outline-width) * 1px) solid ${c.v.var};
    }

    img {
        border-radius: 4px 0 0 4px;
    }

    @media (max-width: 655px) {
        img {
            border-radius: 4px;
        }
    }
`,m=h.a`
    .follow-btn.topic-item {
        border-right: calc(var(--outline-width) * 1px) solid ${c.v.var};
    }

    img {
        border-radius: 0 4px 4px 0;
    }

    @media (max-width: 655px) {
        img {
            border-radius: 4px;
        }
    }
`,b=h.a`
    :host {
        --image-side-size: 80px;
        align-items: center;
        border-radius: 4px;
        box-sizing: border-box;
        border: calc(var(--outline-width) * 1px) solid transparent;
        cursor: pointer;
        display: grid;
        font-size: var(--type-ramp-base-font-size);
        font-weight: 600;
        grid-template-columns: var(--image-side-size) auto;
        grid-template-rows: var(--image-side-size);
        height: var(--image-side-size);
        width: 300px;
        fill: currentColor;
        outline: none;
    }

    :host(:${d.a}) {
        border: calc(var(--outline-width) * 1px) solid ${c.P.var};
    }

    :host(:hover) {
        border: calc(var(--outline-width) * 1px) solid ${c.v.var};
    }
    
    :host(.follow-card:hover), .img-content:hover, .topic-item:hover  {
        background: ${c.v.var};
    }

    .content {
        display: grid;
        height: 100%;
        grid-template-columns: auto 60px;
        grid-area: 1 / 2 / 2 / 3;
    }

    .img-content {
        display: grid;
        height: 100%;
        grid-template-columns: var(--image-side-size) auto;
        width: 240px;
        grid-area: 1 / 1 / 1 / 3;
    }

    .img-content img{
        grid-area: unset;
    }

    .follow-btn {
        height:100%;
        display: flex;
    }

    .follow-btn.topic-item {
        grid-area: 1 / 4 / 1 / 5;
        width: 60px;
        border-left: calc(var(--outline-width) * 1px) solid ${c.v.var};
    }

    .follow-btn span {
        margin: auto;
    }

    .followed slot[name="followed"] > svg {
        background-color: ${c.c.var};
        border-radius: 16px;
        fill: ${c.w.var};
    }

    img {
        grid-area: 1 / 1 / 2 / 2;
        height: var(--image-side-size);
        width: var(--image-side-size);
    }

    span {
        overflow: hidden;
        padding: 30px 12px;
        text-overflow: ellipsis;
        text-align: start;
        white-space: nowrap;
    }

    @media (max-width: 655px) {
        :host {
            --image-side-size: 42px;
            border-radius: 0;
            grid-template-columns: calc(var(--image-side-size) + 30px) auto;
            grid-template-rows: 62px;
            height: 62px;
            width: 334px;
        }

        .divider {
            display: none;
        }

        .topic-section {
            height: 100%;
        }

        .topic-section:hover .topic {
            background: none;
        }

        img {
            margin: 10px;
            margin-inline-start: 20px;
        }

        span {
            padding: 18px 10px;
        }

        .img-content {
            grid-template-columns: calc(var(--image-side-size) + 30px) auto;
            width: 272px;
        }
    }
`.withBehaviors(c.c,c.k,c.v,c.w,c.P,new l.a(p,m),Object(u.c)(h.a`
                :host {
                    background: ${g.a.ButtonFace};
                    color: ${g.a.ButtonText};
                }
                :host(:hover) {
                    background: ${g.a.Highlight};
                    color: ${g.a.HighlightText};
                }
                :host(:${d.a}) {
                    border-color: ${g.a.Highlight};
                }
                .followed slot[name="followed"] > svg {
                    background-color: ${g.a.ButtonText};
                    fill: ${g.a.ButtonFace};
                }
                :host(:hover) .followed slot[name="followed"] > svg {
                    background-color: ${g.a.HighlightText};
                    fill: ${g.a.Highlight};
                }
                :host(.follow-card:hover), .img-content:hover, .topic-item:hover  {
                    background: ${g.a.Highlight};
                }
            `));var f=i("6BDD"),v=i("6vBc"),y=i("kpPY"),S=i("eUhr");const O=f.b`
<div 
    role="button"
    class="${e=>e.enableNavToXfeed?"follow-btn topic-item":"follow-btn"}" 
    part="follow-btn"
    aria-label="${e=>e.followed?Object(y.a)(e.unfollowFormatAriaLabel,e.topicTitle):Object(y.a)(e.followFormatAriaLabel,e.topicTitle)}"
    title="${e=>e.followed?Object(y.a)(e.unfollowFormatText,e.topicTitle):Object(y.a)(e.followFormatText,e.topicTitle)}"
    @click="${e=>e.toggleFollow&&e.toggleFollow()}"
    ${Object(S.b)(e=>e.followed?e.followButtonTelemetryTag:e.unfollowButtonTelemetryTag)}
>
    ${Object(v.a)(e=>e.followed,f.b`
    <span part="followed" class="followed">
        <slot name="followed">
            <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M12.76 5.26L6.5 11.53 3.24 8.26l.52-.52 2.74 2.73 5.74-5.73.52.52z"
                />
            </svg>
        </slot>
    </span>`)}
    ${Object(v.a)(e=>!e.followed,f.b`
    <span part="unfollowed" class="unfollowed">
        <slot name="unfollowed">
            <svg
                width="16"
                height="16"
                viewBox="0 0 16 16"
                xmlns="http://www.w3.org/2000/svg"
            >
                <path
                    d="M7.5 0a7.39 7.39 0 015.3 2.2 7.2 7.2 0 011.93 3.3 7.39 7.39 0 010 4 7.46 7.46 0 01-5.24 5.23 7.39 7.39 0 01-3.99 0 7.65 7.65 0 01-3.31-1.92A7.75 7.75 0 01.27 9.5a7.47 7.47 0 010-4 7.61 7.61 0 011.92-3.3A7.38 7.38 0 015.5.27C6.14.09 6.8 0 7.5 0zm0 14a6.3 6.3 0 003.27-.9 6.42 6.42 0 003-3.87 6.3 6.3 0 000-3.46 6.58 6.58 0 00-4.54-4.54 6.3 6.3 0 00-3.46 0 6.73 6.73 0 00-2.86 1.68 6.41 6.41 0 00-1.68 2.86 6.3 6.3 0 000 3.46 6.73 6.73 0 001.68 2.86A6.51 6.51 0 007.5 14zM8 7h4v1H8v4H7V8H3V7h4V3h1v4z"
                />
            </svg>
        </slot>
    </span>`)}
</div>`,T=f.b`
<template
    tabindex="0"
    class="${e=>e.enableNavToXfeed?"":"follow-card"}"
    @keypress="${e=>e.enableNavToXfeed?e.topicSelected&&e.topicSelected():e.toggleFollow&&e.toggleFollow()}"
>
${Object(v.a)(e=>!e.enableNavToXfeed,f.b`
    <img
        role="button"
        class="image"
        part="image"
        src="${e=>e.imgSrc}"
        alt="${e=>e.imgAltText}"
        aria-label="${e=>e.followed?Object(y.a)(e.unfollowFormatAriaLabel,e.topicTitle):Object(y.a)(e.followFormatAriaLabel,e.topicTitle)}"
        title="${e=>e.followed?Object(y.a)(e.unfollowFormatText,e.topicTitle):Object(y.a)(e.followFormatText,e.topicTitle)}"
        @load="${e=>e.imgOnloadCallback&&e.imgOnloadCallback()}"
        @click="${e=>e.toggleFollow&&e.toggleFollow()}"
        ${Object(S.b)(e=>e.followed?e.followButtonTelemetryTag:e.unfollowButtonTelemetryTag)}
    />
    <div class="content" part="content">
        <span 
            role="button"
            class="topic-title" 
            part="topic-title" 
            aria-label="${e=>e.followed?Object(y.a)(e.unfollowFormatAriaLabel,e.topicTitle):Object(y.a)(e.followFormatAriaLabel,e.topicTitle)}"
            title="${e=>e.followed?Object(y.a)(e.unfollowFormatText,e.topicTitle):Object(y.a)(e.followFormatText,e.topicTitle)}"
            @click="${e=>e.toggleFollow&&e.toggleFollow()}"
            ${Object(S.b)(e=>e.followed?e.followButtonTelemetryTag:e.unfollowButtonTelemetryTag)}
        >
            ${e=>e.topicTitle}
        </span>
        ${Object(v.a)(e=>e.topicTitle,O)}
    </div>
`)}
${Object(v.a)(e=>e.enableNavToXfeed,f.b`
    <div class="img-content" part="img-content">
        <img
            role="button"
            class="image"
            part="image"
            src="${e=>e.imgSrc}"
            alt="${e=>e.imgAltText}"
            aria-label="${e=>Object(y.a)(e.contentLinkFormatText,e.topicTitle)}"
            title="${e=>Object(y.a)(e.contentLinkFormatText,e.topicTitle)}"
            @load="${e=>e.imgOnloadCallback&&e.imgOnloadCallback()}"
            @click="${e=>e.topicSelected&&e.topicSelected()}"
            ${Object(S.b)(e=>e.contentLinkButtonTelemetryTag)}
        />
        <span
            role="button"
            class="topic-title topic-item" 
            part="topic-title"
            aria-label="${e=>Object(y.a)(e.contentLinkFormatText,e.topicTitle)}"
            title="${e=>Object(y.a)(e.contentLinkFormatText,e.topicTitle)}"
            @click="${e=>e.topicSelected&&e.topicSelected()}"
            ${Object(S.b)(e=>e.contentLinkButtonTelemetryTag)}
        >
            ${e=>e.topicTitle}
        </span>
    </div>
    ${Object(v.a)(e=>e.topicTitle,O)}
`)}
</template>`;let w=class extends o{};w=Object(n.d)([Object(a.b)({name:"msn-topic-card",template:T,styles:b})],w)},lifk:function(e,t,i){"use strict";i.d(t,"d",(function(){return s})),i.d(t,"e",(function(){return o})),i.d(t,"c",(function(){return c})),i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return l})),i.d(t,"h",(function(){return u})),i.d(t,"g",(function(){return h})),i.d(t,"f",(function(){return p}));var n=i("HDSB"),a=i("0hJ9");let r;var s,o;!function(e){e.JPG="jpg",e.PNG="png"}(s||(s={})),function(e){e[e.None=0]="None",e[e.Letterbox=1]="Letterbox",e[e.Scale=2]="Scale",e[e.Stretch=3]="Stretch",e[e.Crop=4]="Crop",e[e.FocalCrop=5]="FocalCrop",e[e.FacialCrop=6]="FacialCrop"}(o||(o={}));const c=90,d="www.bing.com/th",l=new RegExp(/bing.(com|net)\/th/);function u(e,t){return h("//img-s-msn-com.akamaized.net/tenant/amp/entityid/"+e,t)}function h(e,t){if(e&&l.test(e))return p(e,t);const{focalRegion:i,backgroundColor:o}=t;let{width:c=0,height:d=0,format:u=s.JPG}=t,h="";if(i){const e=m(i.x1,i.x2),t=m(i.y1,i.y2);null!=e&&null!=t&&(h+=`&x=${e}&y=${t}`)}o&&(h+="&b="+o);const g=null==t.mode?6:t.mode;if(6===g&&(h+="&u=t"),t.enableDpiScaling){if(!t.devicePixelRatio)throw new Error("A valid devicePixelRatio value must be provided when DPI scaling is enabled");const e=function(e){if(Object(n.a)()&&r)return r;if(e<1)return null;let t=e;Object(a.a)(4*t)||(t=Math.ceil(10*t)/10);t>3&&(t=3);Object(n.a)()&&(r=t);return t}(t.devicePixelRatio);e&&(c=Math.round(c*e),d=Math.round(d*e))}return`${e}?w=${c}&h=${d}&q=${t.quality||60}&m=${g}&f=${u}${h}`}function g(e,t){const{width:i=0,height:n=0}=t,a=t.quality||c;return e.searchParams.set("w",""+i),e.searchParams.set("h",""+n),e.searchParams.set("qlt",""+a),e.searchParams.set("c","1"),e.searchParams.set("rs","1"),t.enableDpiScaling&&(e.searchParams.set("dpr",""+t.devicePixelRatio),e.searchParams.set("p","0")),e}function p(e,t){try{return g(new URL(e),t).href}catch(i){const n=g(new URL("https://"+e),t);return`//${n.host}${n.pathname}${n.search}`}}function m(e,t){if(null!=e&&null!=t)return Math.floor((e+t)/2)}},m4Zs:function(e,t,i){"use strict";i.d(t,"a",(function(){return j}));var n=i("3rEL"),a=i("P4Ao"),r=i("3MDl"),s=i("YOxz"),o=i("4X57"),c=i("Kt+H"),d=i("xY0q"),l=i("wHpb"),u=i("2i1/"),h=i("CzTk"),g=i("oqLQ"),p=i("j9Xn"),m=i("BoLm"),b=i("QkLF"),f=i("kL0l"),v=i("TgmJ");const y=o.a`
  .expand-collapse-glyph {
    transform: rotate(-45deg);
  }
  :host(.nested) .expand-collapse-button {
    left: var(--expand-collapse-button-nested-width, calc(${b.a} * -1px));
  }
  :host([selected])::after {
    left: calc(var(--focus-outline-width) * 1px);
  }
  :host([expanded]) > .positioning-region .expand-collapse-glyph {
    transform: rotate(0deg);
  }
`,S=o.a`
  .expand-collapse-glyph {
    transform: rotate(135deg);
  }
  :host(.nested) .expand-collapse-button {
    right: var(--expand-collapse-button-nested-width, calc(${b.a} * -1px));
  }
  :host([selected])::after {
    right: calc(var(--focus-outline-width) * 1px);
  }
  :host([expanded]) > .positioning-region .expand-collapse-glyph {
    transform: rotate(90deg);
  }
`,O="((var(--base-height-multiplier) / 2) * var(--design-unit)) + ((var(--design-unit) * var(--density)) / 2)",T=Object(c.b)("neutral-stealth-hover-over-hover",e=>Object(m.b)(m.b)(e),v.a.findProvider),w=Object(c.b)("neutral-stealth-hover-over-selected",e=>Object(m.b)(m.c)(e),v.a.findProvider),C=o.a`
    ${Object(d.a)("block")} :host {
        contain: content;
        position: relative;
        outline: none;
        color: ${f.G.var};
        background: ${f.w.var};
        cursor: pointer;
        font-family: var(--body-font);
        --expand-collapse-button-size: calc(${b.a} * 1px);
        --tree-item-nested-width: 0;
    }

    :host(:focus) > .positioning-region {
        outline: none;
    }

    :host(:focus) .content-region {
        outline: none;
    }

    :host(:${l.a}) .positioning-region {
        border: ${f.z.var} calc(var(--outline-width) * 1px) solid;
        border-radius: calc(var(--corner-radius) * 1px);
        color: ${f.B.var};
    }

    .positioning-region {
        display: flex;
        position: relative;
        box-sizing: border-box;
        border: transparent calc(var(--outline-width) * 1px) solid;
        height: calc((${b.a} + 1) * 1px);
    }

    .positioning-region::before {
        content: "";
        display: block;
        width: var(--tree-item-nested-width);
        flex-shrink: 0;
    }

    .positioning-region:hover {
        background: ${f.v.var};
    }

    .positioning-region:active {
        background: ${f.u.var};
    }

    .content-region {
        display: inline-flex;
        align-items: center;
        white-space: nowrap;
        width: 100%;
        height: calc(${b.a} * 1px);
        margin-inline-start: calc(var(--design-unit) * 2px + 8px);
        font-size: var(--type-ramp-base-font-size);
        line-height: var(--type-ramp-base-line-height);
        font-weight: 400;
    }

    .items {
        display: none;
        ${""} font-size: calc(1em + (var(--design-unit) + 16) * 1px);
    }

    .expand-collapse-button {
        background: none;
        border: none;
        outline: none;
        ${""} width: calc((${O} + (var(--design-unit) * 2)) * 1px);
        height: calc((${O} + (var(--design-unit) * 2)) * 1px);
        padding: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        cursor: pointer;
        margin: 0 6px;
    }

    .expand-collapse-glyph {
        ${""} width: 16px;
        height: 16px;
        transition: transform 0.1s linear;
        ${""} transform: rotate(-45deg);
        pointer-events: none;
        fill: ${f.G.var};
    }
    .start,
    .end {
        display: flex;
        fill: currentcolor;
    }

     ::slotted(svg) {
        ${""} width: 16px;
        height: 16px;
    }

    .start {
        ${""} margin-inline-end: calc(var(--design-unit) * 2px + 2px);
    }

    .end {
        ${""} margin-inline-start: calc(var(--design-unit) * 2px + 2px);
    }

    :host(.expanded) > .positioning-region .expand-collapse-glyph {
        ${""} transform: rotate(0deg);
    }

    :host(.expanded) > .items {
        display: block;
    }

    :host([disabled]) .content-region {
        opacity: var(--disabled-opacity);
        cursor: ${u.a};
    }

    :host(.nested) .content-region {
      position: relative;
      margin-inline-start: var(--expand-collapse-button-size);
    }

    :host(.nested) .expand-collapse-button {
        position: absolute;
    }

    :host(.nested) .expand-collapse-button:hover {
        background: ${T.var};
    }

    :host([selected]) .positioning-region {
        background: ${f.x.var};
    }

    :host([selected]) .expand-collapse-button:hover {
      background: ${w.var};
    }

    :host([selected])::after {
        content: "";
        display: block;
        position: absolute;
        top: calc((${b.a} / 4) * 1px);
        width: 3px;
        height: calc((${b.a} / 2) * 1px);
        ${""} background: ${f.h.var};
        border-radius: calc(var(--corner-radius) * 1px);
    }

    ::slotted(fluent-tree-item) {
        --tree-item-nested-width: 1em;
        --expand-collapse-button-nested-width: calc(${b.a} * -1px);
    }
`.withBehaviors(f.h,T,f.x,f.u,f.v,f.w,f.z,f.A,f.B,f.G,w,new h.a(y,S),Object(g.c)(o.a`
        :host {
            forced-color-adjust: none;
            border-color: transparent;
            background: ${p.a.Field};
            color: ${p.a.FieldText};
        }
        :host .content-region {
            color: ${p.a.FieldText};
        }
        :host .content-region .expand-collapse-glyph,
        :host .content-region .start,
        :host .content-region .end {
            fill: ${p.a.FieldText};
        }
        :host .positioning-region:hover,
        :host([selected]) .positioning-region {
            background: ${p.a.Highlight};
        }
        :host .positioning-region:hover .content-region,
        :host([selected]) .positioning-region .content-region {
            color: ${p.a.HighlightText};
        }
        :host .positioning-region:hover .content-region .expand-collapse-glyph,
        :host .positioning-region:hover .content-region .start,
        :host .positioning-region:hover .content-region .end,
        :host([selected]) .content-region .expand-collapse-glyph,
        :host([selected]) .content-region .start,
        :host([selected]) .content-region .end {
            fill: ${p.a.HighlightText};
        }
        :host([selected])::after {
            background: ${p.a.Field}
        }
        :host(:${l.a}) .positioning-region {
            border-color: ${p.a.FieldText};
            box-shadow: 0 0 0 2px inset ${p.a.Field};
            color: ${p.a.FieldText};
        }
        :host([disabled]) .content-region,
        :host([disabled]) .positioning-region:hover .content-region {
            opacity: 1;
            color: ${p.a.GrayText};
        }
        :host([disabled]) .content-region .expand-collapse-glyph,
        :host([disabled]) .content-region .start,
        :host([disabled]) .content-region .end,
        :host([disabled]) .positioning-region:hover .content-region .expand-collapse-glyph,
        :host([disabled]) .positioning-region:hover .content-region .start,
        :host([disabled]) .positioning-region:hover .content-region .end {
            fill: ${p.a.GrayText};
        }
        :host([disabled]) .positioning-region:hover {
            background: ${p.a.Field};
        }
        .expand-collapse-glyph,
        .start,
        .end {
            fill: ${p.a.FieldText};
        }
        :host(.nested) .expand-collapse-button:hover {
            background: ${p.a.Field};
        }
        :host(.nested) .expand-collapse-button:hover .expand-collapse-glyph {
            fill: ${p.a.FieldText};
        }
        `));let j=class extends r.a{};j=Object(n.a)([Object(a.b)({name:"fluent-tree-item",template:s.a,styles:C,shadowOptions:{mode:"closed"}})],j)},mJTN:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return a}));const n=new(i("JzSW").a)("AppState");var a;!function(e){e[e.IsSignedIn=1]="IsSignedIn",e[e.CookieConsentStatus=2]="CookieConsentStatus",e[e.OnetrustActiveCookieGroups=3]="OnetrustActiveCookieGroups",e[e.IsDarkMode=4]="IsDarkMode",e[e.ColumnArrangement=5]="ColumnArrangement",e[e.CurrentRoute=6]="CurrentRoute",e[e.TopicData=7]="TopicData",e[e.AboveTheFoldVisuallyReady=8]="AboveTheFoldVisuallyReady",e[e.IsDocumentVisible=9]="IsDocumentVisible"}(a||(a={}))},msIb:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n,a=i("D57K"),r=i("rvYQ"),s=i("y+Kz"),o=i("I6Lx"),c=i("wBSZ"),d=i("OTKB"),l=i("hOj1"),u=i("ax+D"),h=i("BQg2"),g=i("kN1G"),p=i("VGrc"),m=i("/+Un"),b=i("HDSB"),f=i("NIfb"),v=i("4wjP"),y=i("MptA"),S=i("u5KZ"),O=i("HxRh");!function(e){let t;function i(e=null,t,i=!0,n=null,a=!1,c=Object(g.j)()){const d=Object(r.b)(),l=[{key:s.t.apiKey,value:d.OneServiceApiKey},{key:s.t.activityId,value:d.ActivityId},{key:s.t.ocid,value:i?T(d.TrackInfo,t):t},{key:s.t.market,value:d.CurrentMarket}];e&&l.push({key:s.t.user,value:e});let u=Object(o.a)().CurrentFlights;if(n){u=u?`${u},${n}`:n;const e="prg-bngimg-t";-1===u.indexOf(e)&&(u+=","+e),!0===a&&(u=n)}return u&&l.push({key:s.t.fdhead,value:u}),c&&l.push({key:g.c,value:g.d}),o.b.IsBlendedEnterprise&&l.push({key:"audienceMode",value:"enterprise"}),l}function n(e=Object(g.j)(),t){return Object(a.a)(this,void 0,void 0,(function*(){const i={};if(e&&!(yield Object(g.g)())){const e=yield Object(g.e)(c.c,c.f,c.e);e&&e.token&&t?i[s.s.entAuthorization]=e.token:e&&e.token&&(i[s.s.authorization]="Bearer "+e.token)}if(!Object(b.a)()){const e=Object(f.a)().cookie;e&&(i.Cookie=e);const t=Object(f.a)().referer;t&&(i.Referer=t)}return i}))}function T(e,t){return u.a.isNonNullObject(e)&&u.a.isNonNullObject(e.sitePage)&&Object(y.a)(e.sitePage.page_product)&&Object(y.a)(e.sitePage.page_type)?e.sitePage.page_product+"-"+e.sitePage.page_type+(t?"-"+t:""):t}e.authenticationTicketType="10",e.signedInCookieNameHeader="signedInCookieName",e.userLocationHeader="user-location",e.serviceRequestOnComplete=function(e,t){return Object(a.a)(this,void 0,void 0,(function*(){try{const i=yield e();return t(),i}catch(e){throw t(),e}}))},e.getOneServiceParamsWithoutAuth=i,e.getOneServiceNonDynamicParamsWithoutAuth=function(e,t=!0){const i=Object(r.b)(),n=[{key:s.t.apiKey,value:i.OneServiceApiKey},{key:s.t.ocid,value:t?T(i.TrackInfo,e):e},{key:s.t.market,value:i.CurrentMarket}];return Object(g.j)()&&n.push({key:g.c,value:g.d}),n},e.getOneServiceParamsWithAuth=function(e=null,t,n=!0,a=null,o=!1){const c=Object(r.b)().AuthCookieName,d=[...i(e,t,n,a,o)];return c&&d.push({key:s.t.signInCookieName,value:c.toUpperCase()}),d},e.getOneServiceHeaders=n,e.getWinWidgetOneServiceHeaders=function(e,i=!1,n,o,c){var u;return Object(a.a)(this,void 0,void 0,(function*(){const a=Object(r.b)(),h=(null===(u=null==a?void 0:a.CurrentRequestTargetScope)||void 0===u?void 0:u.audienceMode)===v.a.Enterprise,g={};if(!e)return S.a.sendAppErrorEvent(Object.assign(Object.assign({},O.ic),{message:"Failed to retrieve user auth token and MUID from WDX client due to undefined widget instance",source:"OneSericeUtility",pb:Object.assign(Object.assign({},O.ic.pb),{widgetInstance:e,widgetInstanceId:n,windowsSessionId:o})})),g;let m;const b=Object(p.b)(e,h?d.b:d.c,h?d.f:d.g,h?d.d:d.e);t?m=yield b:[m,t]=yield Promise.all([b,Object(p.a)(e)]),m?(h&&i&&(g[s.s.entAuthorization]=m),h||(g[s.s.rpsToken]=m)):c&&S.a.sendAppErrorEvent(Object.assign(Object.assign({},O.hc),{message:"WDX Client failed to return user auth token",source:"OneSericeUtility",pb:Object.assign(Object.assign({},O.hc.pb),{widgetInstance:e,widgetInstanceId:n,windowsSessionId:o})}));const f=Object(l.b)();return t?(g[s.s.muid]=t,t!==f&&Object(d.a)(t)):f&&(g[s.s.muid]=f),g}))},e.getOneServiceFeedCallHeaders=function(e,t){return Object(a.a)(this,void 0,void 0,(function*(){const i=yield n(e,t),a=Object(r.b)(),o=a.ActivityId;return a.SendFeedCallActivityIdInHeader&&o&&(i[s.s.activityId]=o),i}))},e.getLocationParams=function(e,t){const i=Object(r.b)(),n=e||i.Latitude,a=t||i.Longitude;return n&&a?{key:s.t.location,value:`${n}|${a}`}:null},e.getOneServiceOCID=T,e.getBaseRequestData=function(t){return Object(a.a)(this,void 0,void 0,(function*(){return{headers:yield e.getOneServiceHeaders(),method:t}}))},e.getCommonParams=function(e,t=!1){return Object(o.a)().UserIsSignedIn?this.getOneServiceParamsWithAuth(Object(r.b)().UserId,e,t):this.getOneServiceParamsWithoutAuth(Object(r.b)().UserId,e,t)},e.getCommonParams2=function(e,t=!0,i=!1){return Object(m.e)()?this.getOneServiceParamsWithAuth(Object(r.b)().UserId,e,t,i):this.getOneServiceParamsWithoutAuth(Object(r.b)().UserId,e,t,i)},e.urlContainsOcidParam=function(e){if(!e)return!1;const t=e.split("?");if(t.length<2)return!1;const i=t[1].split("#")[0];return!!new h.a(i).get("ocid")},e.removeOcidFromUrl=function(e){if(!e)return e;const t=e.split("?");if(t.length<2)return e;const i=t[1].split("#")[0],n=new h.a(i);if(n.get("ocid")){n.delete("ocid");let t=e.replace(i,n.toString());return"?"===t.charAt(t.length-1)&&(t=t.substring(0,t.length-1)),t}return e},e.removeOcidFromRiverCardProviderResponse=function(t){t&&t.cardMetadata&&t.cardMetadata.length&&t.cardMetadata.forEach(t=>{t.cardContent&&t.cardContent.destinationUrl?t.cardContent.destinationUrl=e.removeOcidFromUrl(t.cardContent.destinationUrl):t.subItems&&t.subItems.length&&t.subItems.forEach(t=>{t.cardContent&&t.cardContent.destinationUrl&&(t.cardContent.destinationUrl=e.removeOcidFromUrl(t.cardContent.destinationUrl))})})},e.removeOcidFromWindowsOneServiceResponse=function(t){t&&t.cards&&t.cards.forEach(t=>{t.subCards.forEach(t=>{t.url?t.url=e.removeOcidFromUrl(t.url):t.subCards&&t.subCards.forEach(t=>{t.url&&(t.url=e.removeOcidFromUrl(t.url))})})})}}(n||(n={}))},oNh7:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var n=i("mJTN"),a=i("lEej"),r=i("rOCc"),s=i("8Sxh"),o=i("hOj1");function c(e,t,i,c,d,l,u){return!(i>0&&!function(e){if(!e||!n.b.has(n.a.CookieConsentStatus))return!1;const t=n.b.get(n.a.CookieConsentStatus);if(t===a.a.NotRequired)return!0;if(t===a.a.Required){const t=n.b.get(n.a.OnetrustActiveCookieGroups)||[r.a.C0001];if(!t.length)return!1;for(const i of t){if(s.a[i].includes(e))return!0}}}(e))&&(Object(o.c)(e,t,i,c,d,l,u),!0)}},qxGE:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var n,a,r=i("rvYQ"),s=i("Am8i"),o=i("Gsg7"),c=i("mJTN");!function(e){e[e.Router=0]="Router",e[e.ExternalLink=2]="ExternalLink",e[e.PrimeExternalLink=3]="PrimeExternalLink"}(n||(n={})),function(e){e.Replace="replace",e.Retain="retain"}(a||(a={}));const d=new class{constructor(){this.routeMap=new Map,this.market=r.a.CurrentMarket,this.currentUrl=new URL(location.href.toLowerCase())}init(e){if(this.options||!e)return;this.options=e,this.config=e.config,this.options.localizedStrings=this.options.localizedStrings||{},this.options.blockedQueryParams=this.options.blockedQueryParams||[],this.baseUrl=`${location.origin}/${this.market}${e.basePath}`,"/"===location.pathname&&(location.pathname=`/${this.market}${e.basePath}`);const t=this.currentUrl.searchParams.get("spapage");this.currentPath=t?`/${this.market}${e.basePath}/${t}`:this.currentUrl.pathname,this.currentUrl.searchParams.delete("spapage"),this.setRoutes(this.config),this.currentRoute&&(c.b.set(c.a.CurrentRoute,this.currentRoute),window.history.replaceState(this.currentRoute,"",this.currentRoute.destinationUrl)),window.addEventListener("popstate",e=>{const t=this.routeMap.get(e.state.id);c.b.set(c.a.CurrentRoute,t||this.config.homeNavigationItem)})}navigate(e,t){const i=c.b.get(c.a.CurrentRoute);if(i&&i.id===e)return;const n=this.routeMap.get(e),a=new URL(n.destinationUrl);if(a.hash&&(a.hash="",n.destinationUrl=a.toString()),!n)return;const r=Object.assign(Object.assign({},n),{dynamicContext:t});window.history.pushState(r,n.display,n.destinationUrl),c.b.set(c.a.CurrentRoute,r)}getRouteById(e){return this.routeMap.get(e)}updateMarket(e){location.replace(location.href.replace(`/${this.market}/`,`/${e}/`))}getUrlInfo(e){const{context:t,renderType:i,path:a,externalUrl:r}=e.renderInfo;if(e.id===this.config.homeNavigationItem.id)return{url:`${this.baseUrl}${this.currentUrl.search}`,path:`/${this.market}/${a}`};if(i===n.Router){let e=this.baseUrl;t&&t.excludeFeedPrefix&&(e=`${location.origin}/${this.market}/`);const i=`${0===a.indexOf("personalize")?"":"/interest"}/${a}`;return{url:`${e}${i}${this.currentUrl.search}${location.hash}`,path:`/${this.market}${t&&t.excludeFeedPrefix?"":"/feed"}${i}`}}let s=new URL(r);const o=s.searchParams;return-1!==s.hostname.indexOf(".msn.com")&&(s.hostname!==location.hostname&&(s=new URL(`${s.pathname}${s.search}`,location.origin)),this.currentUrl.search&&this.currentUrl.searchParams.forEach((e,t)=>{t=t.toLowerCase(),-1===o.getAll(t).indexOf(e)&&-1===this.options.blockedQueryParams.indexOf(t)&&s.searchParams.append(t,e)}),!s.searchParams.get("ocid")&&this.options.ocid&&s.searchParams.set("ocid",this.options.ocid)),{url:decodeURIComponent(s.toString()),path:s.pathname,searchParams:o}}setRoutes(e){if(!e)return;const{contextualNavItems:t=[],hamburgerMenuItems:i=[],homeNavigationItem:n,interestsNavigationItem:a}=e;n&&i.length&&t.length&&(this.buildNavMap(n),this.buildNavMap(a),this.mapChildItems(i),this.mapChildItems(t))}processRoute(e,t){const{id:i,display:n,displayKey:a}=e,r=a?this.options.localizedStrings[a]:n,c=this.getUrlInfo(e),d=c.url,l=Object.assign(Object.assign({},e),{display:r,destinationUrl:d,parentId:t,telemetryMetadata:new o.a({name:r,action:s.a.Click,behavior:s.b.Navigate,content:{headline:r},destinationUrl:d,overrideDestinationUrl:d,feed:{id:i,name:r,type:"category filter"}}).getMetadata()});return this.detectCurrentRoute(l,c.path,c.searchParams),l}detectCurrentRoute(e,t="",i){if(t=t.toLowerCase(),this.currentPath===t||this.currentPath===t+"/"){let t=!1;if(i&&i.toString()&&i.forEach((e,i)=>{i=i.toLowerCase(),-1===this.currentUrl.searchParams.getAll(i).indexOf(e.toLowerCase())&&(t=!0)}),t)return;this.currentRoute=e}}buildNavMap(e){if(!e||this.routeMap.get(e.id))return;const{id:t,children:i=[]}=e;this.routeMap.set(t,this.processRoute(e)),this.mapChildItems(i,e.id)}mapChildItems(e=[],t){e.forEach(e=>{this.routeMap.get(e.id)||this.routeMap.set(e.id,this.processRoute(e,t));const{children:i}=e;i&&i.length&&this.mapChildItems(i,e.id)})}}},rfxS:function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));const n=1},roS3:function(e,t,i){"use strict";var n=i("B1m9");t.a=function(e,t){return t="function"==typeof t?t:void 0,Object(n.a)(e,5,t)}},u8F0:function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.Location="Location",e.Finance="Finance",e.Team="Team",e.League="League",e.Player="Player",e.Traffic="Traffic"}(n||(n={}))},"uH2+":function(e,t,i){"use strict";var n;i.d(t,"a",(function(){return n})),function(e){e.Followed="followed",e.Unfollowed="unfollowed",e.Locked="locked",e.None="none"}(n||(n={}))},uPYz:function(e,t,i){"use strict";i.d(t,"b",(function(){return l})),i.d(t,"a",(function(){return y}));var n=i("Jw3B"),a=i("kL0l"),r=i("cQsl"),s=i("0fst"),o=i("4X57"),c=i("wHpb"),d=i("oqLQ");const l={DarkMode:"radial-gradient(100% 194% at 100% 0%, #2B3033 0%, #2B2E33 16%, #332B30 32%, #33292F 50%, #332B30 64%, #2B2C33 82%, #2D3238 100%, #2B2F33 100%)",LightMode:"radial-gradient(100% 193.51% at 100% 0%, #EDF4F8 0%, #EFF2FA 16.92%, #FAEFF6 34.8%, #FAE6F2 48.8%, #FAF0F7 63.79%, #F1F1FB 81.34%, #F0F4F8 100%)"},u=(e,t)=>t.replace(/\{([\s\S]+?)\}/g,t=>`{ .${e} ${t} }`),h=`\n${Object(n.c)(n.a.c3,null)} {\n    width: 620px;\n}`,g=`\n${Object(n.c)(n.a.c1,n.a.c2)} {\n    max-width: 334px;\n}\n${Object(n.c)(n.a.c3,null)} {\n    max-width: 620px;\n}`,p=`\n${Object(n.c)(n.a.c1,n.a.c1)} {\n    width: 334px;\n}\n${Object(n.c)(n.a.c2,n.a.c2)} {\n    width: 304px;\n}\n`,m=`\n${Object(n.c)(n.a.c1,n.a.c2)} {\n    max-width: 430px;\n    margin: auto;\n    overflow: hidden;\n}\n${Object(n.c)(n.a.c2,n.a.c2)} {\n    padding-inline-start: 30px;\n    max-width: 314px;\n}\n${Object(n.c)(null,n.a.c2)} {\n    --searchbox-width: 280px\n}`,b=`\n${Object(n.c)(n.a.c1,n.a.c2)} {\n    grid-template-columns: 1fr;\n    grid-column-gap: 0;\n    grid-row-gap: 12px;\n}`,f=`\n${Object(n.c)(n.a.c2,n.a.c2)} {\n    width: 640px\n}\n${Object(n.c)(n.a.c3,n.a.c3)} {\n    width: 990px\n}\n${Object(n.c)(n.a.c4,null)} {\n    width: 990px;\n    margin: 0px auto\n}`,v=`\n${Object(n.c)(n.a.c2,n.a.c5)} {\n    background-color: var(--background-color);\n}`,y=o.a`
:host {
    border-radius: 6px;
}

.title {
    height: 48px;
    border-bottom: 1px solid ${a.k.var};
}

.interests-river {
    padding-inline-start: 60px;
    outline: none;
    --searchbox-width: 540px;
}

${u("interests-river",m)}

.interests-river > *:last-child {
    padding-bottom: 80vh
}

.mute-dialog {
    --action-dialog-z-index: ${s.a.Dialog.toString()};
    --elevated-corner-radius: 6px;
    --neutral-divider-rest: ${a.k.var};
    --action-dialog-width: 368px;
    --button-min-width: 150px;
    position: absolute;
}

.action-dialog-controls-container {
    display: grid;
    grid-template-columns: var(--button-min-width) var(--button-min-width);
    justify-content: center;
    grid-gap: var(--space-between-buttons);
}

.action-dialog-control-buttons {
    border-radius: var(--button-border-radius);
    font-size: var(--type-ramp-minus-1-font-size, 12px);
}

.mute-dialog-img {
    display: flex;
    justify-content: center;
    margin: 27px auto;
}

.mute-dialog-img > img {
    height: 64px;
    width: 64px;
}

.mute-dialog-content {
    margin: 27px 0;
}

${u("muted-publishers",p)}

.side-pane-layout-container-search {
    --search-background: var(--background-color);
}

.side-pane-layout-container-search msft-side-pane-layout::part(header-container) {
    bottom: 55px;
}

.side-pane-layout-container msft-side-pane-layout::part(navigation-pane) {
    padding-top: 21px;
}

.side-pane-layout-container msft-side-pane-layout[is-responsive]::part(navigation-pane) {
    top: calc(var(--navigation-pane-wrapper-sticky-top) - 21px);
    padding-top: 21px;
    z-index: ${s.a.Over.toString()};
}

.side-pane-layout-container msft-side-pane-layout, 
.side-pane-layout-container msft-side-pane-layout::part(wrapper), 
.side-pane-layout-container msft-side-pane-layout::part(content-pane) {
    outline: none;
    padding: 0px;
}

.side-pane-layout-container msft-side-pane-layout::part(content-pane) {
    padding-inline-end: 2px;
    padding-top: 1px;
    width: 100%;
    --content-pane-min-width: 350px;
}

.side-pane-layout-container msft-side-pane-layout::part(navigation-menu-button) {
    background-color: var(--neutral-fill-rest);
}

@media (max-width: 624px) {
    .side-pane-layout-container msft-side-pane-layout fluent-tree-item#menuItem-tune-feed {
        display: none;
    }
}

.side-pane-layout-container msft-side-pane-layout fluent-tree-view {
    border-radius: calc(var(--elevated-corner-radius) * 1px);
}

.side-pane-layout-container msft-side-pane-layout fluent-tree-item#menuItem-tune-feed {
    color: ${a.h.var};
}

.side-pane-layout-container msft-side-pane-layout fluent-tree-item#menuItem-tune-feed:hover {
    text-decoration: underline;
}

.side-pane-layout-container msft-side-pane-layout fluent-tree-item#menuItem-tune-feed svg {
    fill: ${a.h.var};
}

.side-pane-layout-container msft-side-pane-layout fluent-tree-item#menuItem-tune-feed::after {
    content: none;
}

.side-pane-layout-container msft-side-pane-layout fluent-tree-item#menuItem-tune-feed::part(positioning-region) {
    background: none;
}

.side-pane-layout-container msft-side-pane-layout fluent-tree-item#menuItem-tune-feed::part(end) {
    margin-inline-start: 6px;
}

.side-pane-layout-container msft-side-pane-layout fluent-tree-item:focus:not:${c.a} {
    border: none;
}

${u("side-pane-layout-container",f)}

msft-side-pane-layout::part(navigation-pane-wrapper) {
    position: relative;
}

msft-side-pane-layout.sticky::part(navigation-pane-wrapper) {
    position: fixed;
    top: var(--navigation-pane-wrapper-sticky-top);
    padding-top: 21px;
}

.tree-item-glyph-start-container {
    display: flex;
}

msn-discover-interests-river-section msn-topics-section::part(heading) {
    font-size: var(--type-ramp-plus-1-font-size);
    font-weight: 600;
    padding-bottom: 15px;
}

.content-card-section {
    padding: 20px 2px;
}

.content-card-section-heading {
    font-size: var(--type-ramp-plus-2-font-size);
    line-height: var(--type-ramp-plus-2-line-height);
    font-weight: 600;
}

.content-card-description {
    font-size: var(--type-ramp-minus-1-font-size);
    line-height: var(--type-ramp-minus-1-line-height);
    padding-top: 2px;
    padding-bottom: 20px;
}

.content-cards-list {
    display: grid;
    grid-area: 2 / 1 / 3 / 3;
    grid-gap: 20px;
    grid-template-columns: 1fr 1fr;
    width: 100%;
    max-width: 620px;
    padding-top: 15px;
}

${u("content-cards-list",b)}

.content-card-button-icon {
    vertical-align: bottom
}

._1x_1y {
    height: 119px;
    max-width: 351px;
    min-width: 300px;
    --heading-start-padding: 12px;
    --heading-end-padding: 12px;
    --media-inline-padding: 12px;
    --footer-start-padding: 4px;
}

._1x_1y msft-content-card::part(media-wrapper) {
    margin-top: 12px
}

._1x_1y msft-content-card::part(heading-container) {
    padding-top: 12px;
    --heading-max-lines: 2;
}

.setting-heading {
    font-size: var(--type-ramp-plus-2-font-size);
    line-height: var(--type-ramp-plus-2-line-height);
    font-weight: 600;
}

${u("setting-card-container",h)}
${u("settings-container",g)}

.setting-card-container {
    padding-inline-end: 2px;
    margin-bottom: 20px;
}

.setting-card-toggle {
    min-height: 48px;
    margin-top: 0
}

.setting-card-toggle-text {
    display: block;
    max-width: 100%;
    font-size: var(--type-ramp-base-font-size);
    line-height: var(--type-ramp-base-line-height);
    margin-top: 10px;
    margin-bottom: 10px;
}

.setting-card-item-title-text {
    padding: 8px 21px;
    margin: 0;
}

.setting-card-item-title-description {
    font-size: var(--type-ramp-minus-1-font-size);
    line-height: var(--type-ramp-minus-1-line-height);
}

.inline-settings {
    border-top: 1px solid var(--neutral-divider-rest);
}

.setting-card-item-text {
    display: flex;
    max-width: 100%;
    font-size: var(--type-ramp-base-font-size);
    line-height: var(--type-ramp-base-line-height);
    align-items: center;
}

.setting-card-item-icon {
    width: 42px;
    height: 42px;
    border-radius: 4px;
    padding-inline-end: 20px;
}

.setting-card-sub-item-line {
    display: grid;
    grid-template-columns: 1fr auto;
    align-items: center;
    padding: 0 21px;
    
}

.setting-card-sub-item-line:nth-child(1n+2) {
    border-top: 1px solid var(--neutral-divider-rest)
}

.setting-card-link-icon {
    width: 16px !important;
    height: 16px !important;
    padding-inline-end: 16px;
    fill: accentFillRest
}

.setting-card-link {
    display: flex;
    align-items: center;
    font-size: var(--type-ramp-base-font-size);
    padding-inline-start: 21px;
    font-weight: 600;
    line-height: var(--type-ramp-base-line-height);
    height: 48px;
    border-top: 1px solid var(--neutral-divider-rest);
    text-decoration: none;
    cursor: pointer;
    color: accentFillRest;
    background-color: var(--neutral-fill-stealth-rest)
}

msn-market-selector::part(select) {
    max-width: unset;
    margin-bottom: 0px;
}

.market-settings-container {
    background: ${a.H.var};
    margin-bottom: 30px;
    border-radius: 6px;
    --elevation: 4;
    ${r.a};
}

.market-settings-content {
    padding: 20px;
}

.settings-container {
    padding: 20px 2px;
}

.setting-card-container, .market-settings-container {
    margin-top: 15px;
}

.notification-setting-card-container {
    box-shadow: 0px 1.6px 3.6px rgba(0, 0, 0, 0.13), 0px 0px 2.9px rgba(0, 0, 0, 0.11);
    border-radius: 2px;
    margin-top: 30px;
}

.notification-setting-card-container > .notification-setting-card:not(:last-child) {
    border-bottom: 0.5px solid #E1E1E1;
}

.notification-setting-card {
    height: 62px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 0 24px;
}

.notification-setting-card .left {
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
}

.notification-setting-card .notification-setting-card-title {
    color: var(--neutral-foreground-rest);
    font-weight: 600;
    font-size: var(--type-ramp-plus-1-font-size);
    line-height: var(--type-ramp-plus-1-line-height);
}
    
.notification-setting-card .notification-setting-card-desc {
    font-size: var(--type-ramp-base-font-size);
    line-height: var(--type-ramp-base-line-height);
    color: var(--neutral-focus);
}

.notification-setting-card .left > *:only-child {
    font-weight: normal;
    color: var(--neutral-foreground-rest);
} 

.compliance-disclaimer-message {
    align-items: center;
    padding-top: 8px;
    padding-right: 16px;
    padding-bottom: 8px;
    padding-left: 24px;
    max-height: 88px;
    max-width: 280px;
    font-family: Segoe UI;
    font-size: 14px;
    line-height: 24px;
    margin-top: 30px;
    background: var(--neutral-fill-stealth-selected);
}

.compliance-text {
    margin: 0px;
    width: 240px;
}

${u("translucentBackground fluent-tree-view",v)}

.translucentBackground msn-topics-section::part(heading) {
    color: white;
}
`.withBehaviors(a.k,a.s,a.H,a.h,Object(d.c)(o.a`
                :host fluent-tree-item#menuItem-tune-feed::part(content-region){
                    color: ${a.h.var};
                }
            `))},uaFm:function(e,t,i){"use strict";i.d(t,"a",(function(){return l})),i.d(t,"b",(function(){return u}));var n=i("hOj1"),a=i("rvYQ"),r=i("zfSW"),s=i("SHdd"),o=i("k3mM"),c=i("oNh7");let d=parseInt(Object(n.a)("cbypass"))||0;function l(){return Promise.all([o.b.purgeCacheAsync(o.a.base),o.b.purgeCacheAsync(o.a.followedTopics)])}async function u(){d=Date.now(),Object(c.a)("cbypass",d.toString(),10/1440,a.a.HostPage.topDomain,"/"),await o.b.purgeCacheAsync(o.a.river),Object(r.d)({id:s.b.UpdateMyFeed,payload:d})}},zI0X:function(e,t,i){"use strict";var n=i("QjXF");t.a=function(e,t){return!!(null==e?0:e.length)&&Object(n.a)(e,t,0)>-1}},zJcZ:function(e,t,i){"use strict";i.d(t,"b",(function(){return s})),i.d(t,"a",(function(){return c}));var n=i("LJMo"),a=i("HxRh"),r=i("u5KZ");function s(e,t=!1,i=!1){if(!e)return e;if(Array.isArray(e)){if(!e.length)return e;e=e[0]}if(!e||!e.subCards||!Array.isArray(e.subCards))return e;const n=e.subCards.map(e=>o(e,t,i));return!e.subCards.length||n&&n.length&&e.subCards.length===n.length||r.a.sendAppErrorEvent(Object.assign(Object.assign({},a.bb),{message:"Mapper returned invalid data",pb:Object.assign(Object.assign({},a.bb.pb),{customMessage:`Count mismatch - expected count [${e.subCards.length}] - actual count [${n.length}]`})})),{feedItems:n,nextPageUrl:e.nextPageUrl}}function o(e,t=!1,i=!1){if(!e)return{};if(e.type===n.a.EsportsLiveStream||e.type===n.a.EsportsHighlight||e.type===n.a.LocalNews||e.type===n.a.LocalNewsFeed||e.type===n.a.MyBriefRiverCard||e.type===n.a.ShoppingMerchantCategoryDeals||e.type===n.a.SportsMatch||e.type===n.a.SportsOlympics||e.type===n.a.StockQuote||e.type===n.a.StockQuote_spotlight||e.type===n.a.TopStories||e.type===n.a.TrafficDelays||e.type===n.a.Upsell||e.type===n.a.WeatherSummary||e.type===n.a.WeatherSummary_spotlight||e.type===n.a.WorkHeadlines)return e;if(e.subCards)return t?{subItems:e.subCards.map(e=>o(e)),type:e.type||"tabbedInfopane"}:function(e){const{type:t,title:i}=e,n=e.subCards.map(e=>o(e));return{type:t,subItems:n,metadata:{title:i}}}(e);if(e.type===n.a.ExternalLink)return function(e){const{id:t,type:i,images:n,url:a,category:r,feed:s={},title:o="",abstract:c=""}=e,d=u(n)||{},h=l(a),{uiHint:g,actionText:p}=e.uiMetadata||{};return{id:t,type:i,metadata:{abstractLength:c.length,title:o,titleLength:o.length,category:r||h[4],subCategory:"other",primaryImage:{height:d.height,width:d.width,url:d.url},locale:h[3],url:a,abstract:c,uiHint:g,actionText:p,feed:{id:s.id},kicker:[{feedName:s.feedName}]}}}(e);if(e.type===n.a.WebContent&&!i)return function(e){const{id:t,type:i,images:n,url:a,category:r,locale:s,reactionSummary:o,commentSummary:c,tag:g,abstract:p="",feed:m={},title:b="",provider:f={},actions:v=[],isBreaking:y=0,externalVideoFiles:S={},publishedDateTime:O,colorSamples:T,dataUrl:w,sourceId:C,financeMetadata:j,isLocalContent:I}=e,x=u(n)||{},k=l(a);return{id:t,type:i,metadata:{abstract:p,abstractLength:p.length,titleLength:b.length,category:r||k[4],subCategory:k[5],publishedDateTime:O,externalVideoFiles:S,locale:s,feed:{id:m.id},kicker:[m],actions:v.map(e=>h[e]||e),reactionSummary:o,commentSummary:c,primaryImage:{height:x.height,width:x.width,url:x.url},url:a,title:b,provider:{name:f.name,logo:{url:f.logoUrl}}},cardContent:{id:t,type:i,title:b,abstract:p,isBreaking:y,tags:[g||{}],provider:{id:f.id,name:f.name,logoUrl:f.logoUrl,image:{alt:f.name,src:f.logoUrl}},category:{product:r,label:void 0},locale:s,images:[{id:d(x.url),height:x.height,width:x.width,caption:x.title,focalRegion:x.focalRegion,attribution:x.attribution,url:x.url,colorSamples:x.colorSamples}],colorSamples:T,videoFiles:S,publishedDateTime:O,kicker:b,sourceHref:w,destinationUrl:a,sourceId:C,financeMetadata:j,isLocalContent:I}}}(e);const{type:a,isBreaking:r,locale:s,category:g,images:p,topics:m=[],dataUrl:b,publishedDateTime:f,id:v,url:y,abstract:S="",title:O="",provider:T={},feed:w={},actions:C=[],externalVideoFiles:j,reactionSummary:I,commentSummary:x,engagementSummary:k,sourceId:P,financeMetadata:E,topComments:D,colorSamples:A,isLocalContent:M}=e,F=u(p)||{},R=j||{},L=m.find(e=>e.feedId===w.id&&e.locale===s),U=l(y);let N=d(T.logoUrl);return!N&&T.logo&&T.logo.url&&(N=d(T.logo.url)),{id:v,type:a,metadata:{abstractLength:S.length,titleLength:O.length,category:g||U[4],subCategory:U[5],primaryImage:{height:F.height,width:F.width},locale:s,feed:{id:w.id},kicker:[w],actions:C.map(e=>h[e]||e),reactionSummary:I,commentSummary:x,engagementSummary:k,topComments:D},cardContent:{id:v,type:c(a),title:O,uriTitle:U[6],abstract:S,isBreaking:r||0,tags:[L||{}],provider:{id:T.id,name:T.name,logo:{id:N},logoUrl:T.logoUrl||T.logo&&T.logo.url,subscribable:!1},category:{product:g,label:void 0},locale:s,images:[{id:d(F.url),height:F.height,width:F.width,caption:F.title,focalRegion:F.focalRegion,attribution:F.attribution,source:F.source,url:F.url,colorSamples:F.colorSamples}],colorSamples:A,videoFiles:R,publishedDateTime:f,kicker:O,sourceHref:b,destinationUrl:y,sourceId:P,financeMetadata:E,isLocalContent:M}}}function c(e){switch(e){case"article":return"ArticlePreview";case"video":return"VideoPreview";case"slideshow":return"SlideshowPreview";case"webcontent":return"WebContentPreview";default:return""}}function d(e){if(!e)return"";if(e.includes("bing.com/th"))return;const t=e.split("/");return u(t)&&t[t.length-1].replace(".img","")}function l(e){return e?e.split("/"):[]}function u(e=[],t=0){return e[t]}const h={liked:"like",unliked:"unlike",saved:"save"}}}]);